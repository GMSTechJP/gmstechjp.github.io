<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Node-RED Changeãƒãƒ¼ãƒ‰ å®Œå…¨ã‚¬ã‚¤ãƒ‰</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.8;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }
        
        h1 {
            color: #8f0000;
            border-bottom: 3px solid #8f0000;
            padding-bottom: 10px;
        }
        
        h2 {
            color: #c00000;
            margin-top: 30px;
            border-left: 5px solid #c00000;
            padding-left: 15px;
        }
        
        h3 {
            color: #555;
            margin-top: 25px;
        }
        
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .node-example {
            background-color: #2d3133;
            padding: 20px;
            border-radius: 5px;
            margin: 20px 0;
            color: white;
            font-family: 'Courier New', monospace;
        }
        
        .node {
            display: inline-block;
            padding: 8px 15px;
            border-radius: 4px;
            margin: 5px;
            font-weight: bold;
            font-size: 14px;
        }
        
        .node-inject {
            background-color: #3fadb5;
            color: white;
        }
        
        .node-function {
            background-color: #e6b0aa;
            color: #333;
        }
        
        .node-catch {
            background-color: #f39c12;
            color: white;
        }
        
        .node-debug {
            background-color: #87a48d;
            color: white;
        }
        
        .node-change {
            background-color: #e7a070;
            color: white;
        }
        
        .node-switch {
            background-color: #e8c46b;
            color: #333;
        }
        
        .arrow {
            color: #999;
            font-size: 20px;
            margin: 0 10px;
        }
        
        .important {
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }
        
        .tip {
            background-color: #d1ecf1;
            border-left: 4px solid #17a2b8;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }
        
        .code-block {
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 15px;
            margin: 15px 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            position: relative;
        }
        
        .copy-button {
            position: absolute;
            top: 8px;
            right: 8px;
            padding: 6px 12px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            font-family: 'Segoe UI', sans-serif;
            transition: background-color 0.2s;
            z-index: 10;
        }
        
        .copy-button:hover {
            background-color: #0056b3;
        }
        
        .copy-button.copied {
            background-color: #28a745;
        }
        
        .exercise {
            background-color: #e8f5e9;
            border: 2px solid #4caf50;
            border-radius: 8px;
            padding: 20px;
            margin: 25px 0;
        }
        
        .exercise h3 {
            color: #2e7d32;
            margin-top: 0;
        }
        
        .difficulty {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
            margin-left: 10px;
        }
        
        .difficulty-easy {
            background-color: #4caf50;
            color: white;
        }
        
        .difficulty-medium {
            background-color: #ff9800;
            color: white;
        }
        
        .difficulty-hard {
            background-color: #f44336;
            color: white;
        }
        
        ul, ol {
            padding-left: 25px;
        }
        
        li {
            margin: 8px 0;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        
        th {
            background-color: #8f0000;
            color: white;
        }
        
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        .flow-json {
            background-color: #263238;
            color: #aed581;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 400px;
            overflow-y: auto;
            position: relative;
        }
        
        .answer-section {
            background-color: #fff9e6;
            border: 2px dashed #ffc107;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        details {
            margin: 15px 0;
        }
        
        summary {
            cursor: pointer;
            padding: 10px;
            background-color: #6c757d;
            color: white;
            border-radius: 4px;
            font-weight: bold;
        }
        
        summary:hover {
            background-color: #5a6268;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .feature-card {
            background-color: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
        }
        
        .feature-card h4 {
            color: #e7a070;
            margin-top: 0;
        }
        
        .operation-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: bold;
            margin-right: 5px;
        }
        
        .badge-set {
            background-color: #28a745;
            color: white;
        }
        
        .badge-delete {
            background-color: #dc3545;
            color: white;
        }
        
        .badge-move {
            background-color: #17a2b8;
            color: white;
        }
        
        .badge-change {
            background-color: #ffc107;
            color: #333;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”„ Node-RED Changeãƒãƒ¼ãƒ‰ å®Œå…¨ã‚¬ã‚¤ãƒ‰</h1>
        
        <p>ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ã€Node-REDã®<strong>Changeãƒãƒ¼ãƒ‰</strong>ã«ã¤ã„ã¦ã€åˆå¿ƒè€…ã®æ–¹ã§ã‚‚ç†è§£ã§ãã‚‹ã‚ˆã†ã«è©³ã—ãèª¬æ˜ã—ã¾ã™ã€‚</p>
        
        <h2>ğŸ“š 1. Changeãƒãƒ¼ãƒ‰ã¨ã¯?</h2>
        
        <h3>ğŸ¤” ã€Œãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®åŠ å·¥ã€ã£ã¦ä½•?</h3>
        <p>Node-REDã§ã¯ã€ãƒãƒ¼ãƒ‰ã‹ã‚‰ãƒãƒ¼ãƒ‰ã¸ã€Œãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€ãŒæµã‚Œã¾ã™ã€‚Changeãƒãƒ¼ãƒ‰ã¯ã€ãã®æµã‚Œã‚‹é€”ä¸­ã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ä¸­èº«ã‚’<strong>å¤‰æ›´ãƒ»è¿½åŠ ãƒ»å‰Šé™¤</strong>ã§ãã‚‹ãƒãƒ¼ãƒ‰ã§ã™ã€‚</p>
        
        <div class="important">
            <strong>ğŸ’¡ æ—¥å¸¸ã®ä¾‹ã§è€ƒãˆã¦ã¿ã¾ã—ã‚‡ã†:</strong>
            <ul>
                <li>éƒµä¾¿ç‰©ã®è»¢é€ â†’ å®›å…ˆã‚’å¤‰æ›´ã™ã‚‹(ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£å¤‰æ›´)</li>
                <li>è·ç‰©ã®æ¢±åŒ… â†’ ãƒ©ãƒ™ãƒ«ã‚’è¿½åŠ ã™ã‚‹(ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®è¿½åŠ )</li>
                <li>æ›¸é¡ã®ç·¨é›† â†’ ä¸è¦ãªæƒ…å ±ã‚’æ¶ˆã™(ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å‰Šé™¤)</li>
                <li>ãƒ•ã‚¡ã‚¤ãƒ«ã®ç§»å‹• â†’ ã‚ã‚‹ãƒ•ã‚©ãƒ«ãƒ€ã‹ã‚‰åˆ¥ã®ãƒ•ã‚©ãƒ«ãƒ€ã¸(ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®ç§»å‹•)</li>
            </ul>
            <p>Changeãƒãƒ¼ãƒ‰ã¯ã€ã“ã‚Œã‚‰ã®ã€ŒåŠ å·¥ã€ã‚’ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã‹ãšã«ç°¡å˜ã«è¡Œãˆã¾ã™!</p>
        </div>
        
        <h3>ğŸ¯ Changeãƒãƒ¼ãƒ‰ã®å½¹å‰²</h3>
        <p><strong>Changeãƒãƒ¼ãƒ‰</strong>ã¯ã€Functionãƒãƒ¼ãƒ‰ã‚’ä½¿ã‚ãšã«ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å†…å®¹ã‚’å¤‰æ›´ã§ãã‚‹ä¾¿åˆ©ãªãƒãƒ¼ãƒ‰ã§ã™ã€‚</p>
        
        <div class="tip">
            <strong>ğŸ­ å·¥å ´ã®ä½œæ¥­å·¥ç¨‹ã®ä¾‹:</strong><br>
            ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ = è£½å“<br>
            Changeãƒãƒ¼ãƒ‰ = åŠ å·¥æ‹…å½“ã®ä½œæ¥­å“¡<br>
            <br>
            è£½å“(ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸)ãŒæµã‚Œã¦ããŸã‚‰ã€ä½œæ¥­å“¡(Changeãƒãƒ¼ãƒ‰)ãŒ:<br>
            ãƒ»ãƒ©ãƒ™ãƒ«ã‚’è²¼ã‚‹(ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è¨­å®š)<br>
            ãƒ»ä¸è‰¯å“ãƒãƒ¼ã‚¯ã‚’æ¶ˆã™(ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’å‰Šé™¤)<br>
            ãƒ»ç®±ã‚’å…¥ã‚Œæ›¿ãˆã‚‹(ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ç§»å‹•)<br>
            <br>
            ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã‹ãšã«ã€è¨­å®šã ã‘ã§åŠ å·¥ã§ãã‚‹ã®ãŒç‰¹å¾´ã§ã™!
        </div>
        
        <h2>ğŸ” 2. ã‚µãƒ³ãƒ—ãƒ«ãƒ•ãƒ­ãƒ¼ã®è©³ã—ã„è§£èª¬</h2>
        
        <p>ã‚µãƒ³ãƒ—ãƒ«ãƒ•ãƒ­ãƒ¼ã«ã¯ã€Changeãƒãƒ¼ãƒ‰ã®<strong>7ã¤ã®ä¸»è¦ãªä½¿ã„æ–¹</strong>ãŒå«ã¾ã‚Œã¦ã„ã¾ã™:</p>
        
        <h3>ãƒ‘ã‚¿ãƒ¼ãƒ³1: å›ºå®šå€¤ã‚’ã‚»ãƒƒãƒˆ</h3>
        <div class="node-example">
            <span class="node node-inject">inject<br>(timestamp)</span>
            <span class="arrow">â†’</span>
            <span class="node node-change">change<br>payload="Hello World!"</span>
            <span class="arrow">â†’</span>
            <span class="node node-debug">debug</span>
        </div>
        <p>å…ƒã®payload(ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—)ã‚’ã€ŒHello World!ã€ã¨ã„ã†æ–‡å­—åˆ—ã«ç½®ãæ›ãˆã¾ã™ã€‚</p>
        
        <h3>ãƒ‘ã‚¿ãƒ¼ãƒ³2: è¤‡æ•°ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ã‚»ãƒƒãƒˆ</h3>
        <div class="node-example">
            <span class="node node-inject">inject</span>
            <span class="arrow">â†’</span>
            <span class="node node-change">change<br>payload="Hello, World!"<br>topic="Title"</span>
            <span class="arrow">â†’</span>
            <span class="node node-debug">debug</span>
        </div>
        <p>payloadã¨topicã®ä¸¡æ–¹ã‚’ä¸€åº¦ã«è¨­å®šã—ã¾ã™ã€‚</p>
        
        <h3>ãƒ‘ã‚¿ãƒ¼ãƒ³3: JSONataã§å‹•çš„ã«å€¤ã‚’ç”Ÿæˆ</h3>
        <div class="node-example">
            <span class="node node-inject">inject</span>
            <span class="arrow">â†’</span>
            <span class="node node-change">change<br>payload="Hello"<br>â†’"Hello, World!"</span>
            <span class="arrow">â†’</span>
            <span class="node node-debug">debug</span>
        </div>
        <p>æ—¢å­˜ã®å€¤ã«æ–‡å­—åˆ—ã‚’è¿½åŠ ã™ã‚‹ãªã©ã€å‹•çš„ãªåŠ å·¥ãŒã§ãã¾ã™ã€‚</p>
        
        <h3>ãƒ‘ã‚¿ãƒ¼ãƒ³4: ç’°å¢ƒå¤‰æ•°ã‹ã‚‰å€¤ã‚’å–å¾—</h3>
        <div class="node-example">
            <span class="node node-inject">inject</span>
            <span class="arrow">â†’</span>
            <span class="node node-change">change<br>payload=env.HOME</span>
            <span class="arrow">â†’</span>
            <span class="node node-debug">debug</span>
        </div>
        <p>ã‚·ã‚¹ãƒ†ãƒ ã®ç’°å¢ƒå¤‰æ•°(ä¾‹: HOMEãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª)ã‚’å–å¾—ã—ã¾ã™ã€‚</p>
        
        <h3>ãƒ‘ã‚¿ãƒ¼ãƒ³5: Flowå¤‰æ•°ã®æ“ä½œ</h3>
        <div class="node-example">
            <span class="node node-inject">åˆæœŸåŒ–</span>
            <span class="arrow">â†’</span>
            <span class="node node-change">flow.count=0</span>
            <span class="arrow">â†’</span>
            <span class="node node-debug">debug</span>
            <br><br>
            <span class="node node-inject">ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ—</span>
            <span class="arrow">â†’</span>
            <span class="node node-change">flow.count+1</span>
            <span class="arrow">â†’</span>
            <span class="node node-debug">debug</span>
        </div>
        <p>flowå¤‰æ•°ã‚’ä½¿ã£ã¦ã€ãƒ•ãƒ­ãƒ¼å…¨ä½“ã§å…±æœ‰ã™ã‚‹ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’ä½œæˆã—ã¾ã™ã€‚</p>
        
        <h3>ãƒ‘ã‚¿ãƒ¼ãƒ³6: ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å‰Šé™¤</h3>
        <div class="node-example">
            <span class="node node-inject">inject</span>
            <span class="arrow">â†’</span>
            <span class="node node-change">change<br>delete payload</span>
            <span class="arrow">â†’</span>
            <span class="node node-debug">debug</span>
        </div>
        <p>payloadãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’å‰Šé™¤ã—ã¾ã™(undefinedã«ãªã‚Šã¾ã™)ã€‚</p>
        
        <h3>ãƒ‘ã‚¿ãƒ¼ãƒ³7: ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®ç§»å‹•</h3>
        <div class="node-example">
            <span class="node node-inject">inject<br>topic="Hello"</span>
            <span class="arrow">â†’</span>
            <span class="node node-change">change<br>topicâ†’payload</span>
            <span class="arrow">â†’</span>
            <span class="node node-debug">debug</span>
        </div>
        <p>topicã®å€¤ã‚’payloadã«ç§»å‹•ã—ã¾ã™(å…ƒã®topicã¯å‰Šé™¤ã•ã‚Œã¾ã™)ã€‚</p>
        
        <h2>âš™ï¸ 3. Changeãƒãƒ¼ãƒ‰ã®è¨­å®šé …ç›®</h2>
        
        <h3>4ã¤ã®ä¸»è¦ãªæ“ä½œ</h3>
        
        <div class="feature-grid">
            <div class="feature-card">
                <h4><span class="operation-badge badge-set">Set</span> å€¤ã‚’è¨­å®š</h4>
                <p>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«å€¤ã‚’è¨­å®šã—ã¾ã™</p>
                <ul>
                    <li>å›ºå®šå€¤</li>
                    <li>ä»–ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å€¤</li>
                    <li>JSONataå¼</li>
                    <li>ç’°å¢ƒå¤‰æ•°</li>
                    <li>flow/globalå¤‰æ•°</li>
                </ul>
            </div>
            
            <div class="feature-card">
                <h4><span class="operation-badge badge-change">Change</span> å€¤ã‚’å¤‰æ›´</h4>
                <p>æ–‡å­—åˆ—ã®ç½®æ›ã‚’è¡Œã„ã¾ã™</p>
                <ul>
                    <li>é€šå¸¸ã®æ–‡å­—åˆ—ç½®æ›</li>
                    <li>æ­£è¦è¡¨ç¾ã‚’ä½¿ã£ãŸç½®æ›</li>
                </ul>
            </div>
            
            <div class="feature-card">
                <h4><span class="operation-badge badge-delete">Delete</span> å€¤ã‚’å‰Šé™¤</h4>
                <p>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’å‰Šé™¤ã—ã¾ã™</p>
                <ul>
                    <li>ä¸è¦ãªãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å‰Šé™¤</li>
                    <li>ã‚»ãƒ³ã‚·ãƒ†ã‚£ãƒ–æƒ…å ±ã®é™¤å»</li>
                </ul>
            </div>
            
            <div class="feature-card">
                <h4><span class="operation-badge badge-move">Move</span> å€¤ã‚’ç§»å‹•</h4>
                <p>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ç§»å‹•ã—ã¾ã™</p>
                <ul>
                    <li>å…ƒã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯å‰Šé™¤</li>
                    <li>æ–°ã—ã„ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«è¨­å®š</li>
                </ul>
            </div>
        </div>
        
        <h3>ğŸ“‹ å€¤ã®å‹(Type)ã«ã¤ã„ã¦</h3>
        
        <table>
            <tr>
                <th>å‹</th>
                <th>èª¬æ˜</th>
                <th>ä¾‹</th>
            </tr>
            <tr>
                <td>string</td>
                <td>æ–‡å­—åˆ—</td>
                <td>"Hello, World!"</td>
            </tr>
            <tr>
                <td>number</td>
                <td>æ•°å€¤</td>
                <td>42, 3.14</td>
            </tr>
            <tr>
                <td>boolean</td>
                <td>çœŸå½å€¤</td>
                <td>true, false</td>
            </tr>
            <tr>
                <td>timestamp</td>
                <td>ç¾åœ¨æ™‚åˆ»(ãƒŸãƒªç§’)</td>
                <td>1699123456789</td>
            </tr>
            <tr>
                <td>JSON</td>
                <td>JSONã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ</td>
                <td>{"temp": 25}</td>
            </tr>
            <tr>
                <td>JSONata</td>
                <td>JSONataå¼(å‹•çš„è¨ˆç®—)</td>
                <td>payload & ", World!"</td>
            </tr>
            <tr>
                <td>msg</td>
                <td>ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£</td>
                <td>msg.payload</td>
            </tr>
            <tr>
                <td>flow</td>
                <td>flowå¤‰æ•°</td>
                <td>flow.counter</td>
            </tr>
            <tr>
                <td>global</td>
                <td>globalå¤‰æ•°</td>
                <td>global.settings</td>
            </tr>
            <tr>
                <td>env</td>
                <td>ç’°å¢ƒå¤‰æ•°</td>
                <td>env.HOME</td>
            </tr>
        </table>
        
        <h3>ğŸ”§ JSONataã¨ã¯?</h3>
        
        <div class="important">
            <p><strong>JSONata</strong>ã¯ã€JSON ãƒ‡ãƒ¼ã‚¿ã‚’å¤‰æ›ãƒ»ã‚¯ã‚¨ãƒªã™ã‚‹ãŸã‚ã®è»½é‡è¨€èªã§ã™ã€‚</p>
            
            <p><strong>ã‚ˆãä½¿ã†ä¾‹:</strong></p>
            <ul>
                <li><code>payload & ", World!"</code> â†’ æ–‡å­—åˆ—ã‚’é€£çµ</li>
                <li><code>payload * 2</code> â†’ æ•°å€¤ã‚’2å€ã«ã™ã‚‹</li>
                <li><code>$number(payload)</code> â†’ æ–‡å­—åˆ—ã‚’æ•°å€¤ã«å¤‰æ›</li>
                <li><code>$substring(payload, 0, 5)</code> â†’ å…ˆé ­5æ–‡å­—ã‚’å–å¾—</li>
                <li><code>$flowContext("count") + 1</code> â†’ flowå¤‰æ•°ã‚’å¢—ã‚„ã™</li>
            </ul>
        </div>
        
        <h2>ğŸ’¡ 4. Changeãƒãƒ¼ãƒ‰ã®å®Ÿç”¨çš„ãªä½¿ã„æ–¹</h2>
        
        <h3>å®Ÿéš›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã®æ´»ç”¨ä¾‹</h3>
        
        <h4>ä¾‹1: ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã®å˜ä½å¤‰æ›</h4>
        <div class="node-example">
            <span class="node node-inject">æ¸©åº¦ã‚»ãƒ³ã‚µãƒ¼<br>(Â°F)</span>
            <span class="arrow">â†’</span>
            <span class="node node-change">Â°Fâ†’Â°Cå¤‰æ›<br>(payload-32)*5/9</span>
            <span class="arrow">â†’</span>
            <span class="node node-debug">è¡¨ç¤º(Â°C)</span>
        </div>
        <p>è¯æ°(Â°F)ã‚’æ‘‚æ°(Â°C)ã«å¤‰æ›ã—ã¾ã™ã€‚</p>
        
        <h4>ä¾‹2: APIã‚­ãƒ¼ã®é™¤å»(ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£)</h4>
        <div class="node-example">
            <span class="node node-function">APIå‘¼ã³å‡ºã—<br>(ã‚­ãƒ¼å«ã‚€)</span>
            <span class="arrow">â†’</span>
            <span class="node node-change">delete apiKey</span>
            <span class="arrow">â†’</span>
            <span class="node node-debug">ãƒ­ã‚°å‡ºåŠ›</span>
        </div>
        <p>ãƒ­ã‚°ã«å‡ºåŠ›ã™ã‚‹å‰ã«ã€ã‚»ãƒ³ã‚·ãƒ†ã‚£ãƒ–ãªæƒ…å ±ã‚’å‰Šé™¤ã—ã¾ã™ã€‚</p>
        
        <h4>ä¾‹3: ãƒ‡ãƒã‚¤ã‚¹è­˜åˆ¥æƒ…å ±ã®è¿½åŠ </h4>
        <div class="node-example">
            <span class="node node-inject">ã‚»ãƒ³ã‚µãƒ¼å€¤</span>
            <span class="arrow">â†’</span>
            <span class="node node-change">deviceIdè¿½åŠ <br>locationè¿½åŠ </span>
            <span class="arrow">â†’</span>
            <span class="node node-debug">ã‚¯ãƒ©ã‚¦ãƒ‰é€ä¿¡</span>
        </div>
        <p>ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã«ãƒ‡ãƒã‚¤ã‚¹IDã¨ä½ç½®æƒ…å ±ã‚’è¿½åŠ ã—ã¾ã™ã€‚</p>
        
        <h2>ğŸ“ 5. ç·´ç¿’å•é¡Œ</h2>
        
        <div class="exercise">
            <h3>ç·´ç¿’å•é¡Œ 1: æ¸©åº¦ã®å˜ä½å¤‰æ› <span class="difficulty difficulty-easy">åˆç´š</span></h3>
            
            <h4>ğŸ¯ ç›®æ¨™</h4>
            <p>è¯æ°(Â°F)ã®æ¸©åº¦ã‚’æ‘‚æ°(Â°C)ã«å¤‰æ›ã™ã‚‹</p>
            
            <h4>ğŸ“‹ è¦ä»¶</h4>
            <ol>
                <li>Injectãƒãƒ¼ãƒ‰ã§è¯æ°æ¸©åº¦(ä¾‹: 68Â°F)ã‚’é€ä¿¡</li>
                <li>Changeãƒãƒ¼ãƒ‰ã§æ‘‚æ°ã«å¤‰æ›(å…¬å¼: (Â°F - 32) Ã— 5 / 9)</li>
                <li>Debugãƒãƒ¼ãƒ‰ã§æ‘‚æ°æ¸©åº¦ã‚’è¡¨ç¤º</li>
            </ol>
            
            <h4>ğŸ’­ ãƒ’ãƒ³ãƒˆ</h4>
            
            <p><strong>ğŸ¯ Changeãƒãƒ¼ãƒ‰ã®è¨­å®š(è‡ªåˆ†ã§è¨­å®šã—ã¦ã¿ã‚ˆã†):</strong></p>
            <ul>
                <li>ã©ã®æ“ä½œã‚’ä½¿ã†? (Set/Change/Delete/Move)</li>
                <li>ã©ã®å‹ã‚’ä½¿ã†? (number/string/JSONata/...)</li>
                <li>å¤‰æ›å¼ã‚’ã©ã†æ›¸ã?</li>
            </ul>
            
            <p><strong>ğŸ”¢ Injectãƒãƒ¼ãƒ‰ã®è¨­å®š(ãã®ã¾ã¾è¨­å®šã—ã¦ãã ã•ã„):</strong></p>
            <ul>
                <li>Payload: numberå‹</li>
                <li>å€¤: <code>68</code> (68Â°F)</li>
            </ul>
            
            <p><strong>ğŸ› Debugãƒãƒ¼ãƒ‰ã®è¨­å®š:</strong></p>
            <ul>
                <li>Output: <code>msg.payload</code> (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã¾ã¾)</li>
            </ul>
            
            <p><strong>ğŸ“ å¤‰æ›å¼ã®ãƒ’ãƒ³ãƒˆ:</strong></p>
            <div class="code-block">
JSONataå¼ã§è¨ˆç®—: (payload - 32) * 5 / 9
            </div>
            
            <details>
                <summary>ğŸ“¦ è§£ç­”ãƒ•ãƒ­ãƒ¼ (ã‚¯ãƒªãƒƒã‚¯ã—ã¦è¡¨ç¤º)</summary>
                <div class="flow-json">
[
    {
        "id": "ex1_inject",
        "type": "inject",
        "z": "exercise1",
        "name": "è¯æ°68åº¦",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "68",
        "payloadType": "num",
        "x": 130,
        "y": 100,
        "wires": [
            ["ex1_change"]
        ]
    },
    {
        "id": "ex1_change",
        "type": "change",
        "z": "exercise1",
        "name": "Â°F â†’ Â°C",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(payload - 32) * 5 / 9",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 100,
        "wires": [
            ["ex1_debug"]
        ]
    },
    {
        "id": "ex1_debug",
        "type": "debug",
        "z": "exercise1",
        "name": "æ‘‚æ°æ¸©åº¦",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 470,
        "y": 100,
        "wires": []
    }
]
                </div>
                <p><strong>âœ… å‹•ä½œç¢ºèª:</strong></p>
                <ul>
                    <li>68Â°F â†’ 20Â°C ãŒè¡¨ç¤ºã•ã‚Œã‚‹</li>
                    <li>Injectãƒãƒ¼ãƒ‰ã®å€¤ã‚’å¤‰ãˆã¦ã€ä»–ã®æ¸©åº¦ã‚‚è©¦ã—ã¦ã¿ã¾ã—ã‚‡ã†</li>
                    <li>32Â°F â†’ 0Â°C (æ°´ã®å‡çµç‚¹)</li>
                    <li>212Â°F â†’ 100Â°C (æ°´ã®æ²¸ç‚¹)</li>
                </ul>
            </details>
        </div>
        
        <div class="exercise">
            <h3>ç·´ç¿’å•é¡Œ 2: ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã®æ•´å½¢ <span class="difficulty difficulty-medium">ä¸­ç´š</span></h3>
            
            <h4>ğŸ¯ ç›®æ¨™</h4>
            <p>æ¸©åº¦ã‚»ãƒ³ã‚µãƒ¼ã®ãƒ‡ãƒ¼ã‚¿ã«ã€ãƒ‡ãƒã‚¤ã‚¹æƒ…å ±ã¨ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’è¿½åŠ ã™ã‚‹</p>
            
            <h4>ğŸ“‹ è¦ä»¶</h4>
            <ol>
                <li>Injectãƒãƒ¼ãƒ‰ã§æ¸©åº¦(ä¾‹: 25)ã‚’é€ä¿¡</li>
                <li>Changeãƒãƒ¼ãƒ‰ã§ä»¥ä¸‹ã®æƒ…å ±ã‚’è¿½åŠ :
                    <ul>
                        <li>deviceId: "sensor-001"</li>
                        <li>location: "Office Room A"</li>
                        <li>timestamp: ç¾åœ¨æ™‚åˆ»</li>
                        <li>unit: "celsius"</li>
                    </ul>
                </li>
                <li>å…ƒã®payloadã¯ãã®ã¾ã¾ä¿æŒ</li>
                <li>Debugãƒãƒ¼ãƒ‰ã§å®Œå…¨ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¡¨ç¤º</li>
            </ol>
            
            <h4>ğŸ’­ ãƒ’ãƒ³ãƒˆ</h4>
            
            <p><strong>ğŸ¯ Changeãƒãƒ¼ãƒ‰ã®è¨­å®š(è‡ªåˆ†ã§è¨­å®šã—ã¦ã¿ã‚ˆã†):</strong></p>
            <ul>
                <li>è¤‡æ•°ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è¨­å®šã™ã‚‹ã«ã¯ã€ã©ã†ã™ã‚‹?</li>
                <li>ã€Œ+ãƒ«ãƒ¼ãƒ«ã‚’è¿½åŠ ã€ãƒœã‚¿ãƒ³ã‚’ä½¿ã„ã¾ã—ã‚‡ã†</li>
                <li>timestampã¯ã©ã®å‹ã‚’ä½¿ã†?</li>
            </ul>
            
            <p><strong>ğŸ”§ Changeãƒãƒ¼ãƒ‰ã®è©³ç´°è¨­å®š(è¨­å®šç”»é¢ã§ä»¥ä¸‹ã®é€šã‚Šã«è¨­å®šã—ã¦ãã ã•ã„):</strong></p>
            <div class="important">
                <p>Changeãƒãƒ¼ãƒ‰ã§4ã¤ã®ãƒ«ãƒ¼ãƒ«ã‚’è¿½åŠ ã—ã¾ã™:</p>
                
                <p><strong>ãƒ«ãƒ¼ãƒ«1:</strong></p>
                <ul>
                    <li>å‹•ä½œ: Set(è¨­å®š)</li>
                    <li>å¯¾è±¡: <code>msg.deviceId</code></li>
                    <li>å€¤: <code>sensor-001</code> (stringå‹)</li>
                </ul>
                
                <p><strong>ãƒ«ãƒ¼ãƒ«2:</strong></p>
                <ul>
                    <li>å‹•ä½œ: Set(è¨­å®š)</li>
                    <li>å¯¾è±¡: <code>msg.location</code></li>
                    <li>å€¤: <code>Office Room A</code> (stringå‹)</li>
                </ul>
                
                <p><strong>ãƒ«ãƒ¼ãƒ«3:</strong></p>
                <ul>
                    <li>å‹•ä½œ: Set(è¨­å®š)</li>
                    <li>å¯¾è±¡: <code>msg.timestamp</code></li>
                    <li>å€¤: timestampå‹ã‚’é¸æŠ</li>
                </ul>
                
                <p><strong>ãƒ«ãƒ¼ãƒ«4:</strong></p>
                <ul>
                    <li>å‹•ä½œ: Set(è¨­å®š)</li>
                    <li>å¯¾è±¡: <code>msg.unit</code></li>
                    <li>å€¤: <code>celsius</code> (stringå‹)</li>
                </ul>
            </div>
            
            <p><strong>ğŸ”¢ Injectãƒãƒ¼ãƒ‰ã®è¨­å®š:</strong></p>
            <ul>
                <li>Payload: numberå‹ã§ <code>25</code></li>
            </ul>
            
            <p><strong>ğŸ› Debugãƒãƒ¼ãƒ‰ã®è¨­å®š:</strong></p>
            <ul>
                <li>Output: <code>complete msg object</code> ã‚’é¸æŠ</li>
                <li>ã“ã‚Œã«ã‚ˆã‚Šã€ã™ã¹ã¦ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒè¡¨ç¤ºã•ã‚Œã¾ã™</li>
            </ul>
            
            <details>
                <summary>ğŸ“¦ è§£ç­”ãƒ•ãƒ­ãƒ¼ (ã‚¯ãƒªãƒƒã‚¯ã—ã¦è¡¨ç¤º)</summary>
                <div class="flow-json">
[
    {
        "id": "ex2_inject",
        "type": "inject",
        "z": "exercise2",
        "name": "æ¸©åº¦25â„ƒ",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "25",
        "payloadType": "num",
        "x": 130,
        "y": 100,
        "wires": [
            ["ex2_change"]
        ]
    },
    {
        "id": "ex2_change",
        "type": "change",
        "z": "exercise2",
        "name": "ãƒ‡ãƒã‚¤ã‚¹æƒ…å ±è¿½åŠ ",
        "rules": [
            {
                "t": "set",
                "p": "deviceId",
                "pt": "msg",
                "to": "sensor-001",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "location",
                "pt": "msg",
                "to": "Office Room A",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "timestamp",
                "pt": "msg",
                "to": "",
                "tot": "date"
            },
            {
                "t": "set",
                "p": "unit",
                "pt": "msg",
                "to": "celsius",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 100,
        "wires": [
            ["ex2_debug"]
        ]
    },
    {
        "id": "ex2_debug",
        "type": "debug",
        "z": "exercise2",
        "name": "å®Œå…¨ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 560,
        "y": 100,
        "wires": []
    }
]
                </div>
                <p><strong>âœ… å‹•ä½œç¢ºèª:</strong></p>
                <ul>
                    <li>Debugã‚¿ãƒ–ã§ä»¥ä¸‹ã®æ§‹é€ ãŒè¡¨ç¤ºã•ã‚Œã‚‹:</li>
                </ul>
                <div class="code-block">
{
    "payload": 25,
    "deviceId": "sensor-001",
    "location": "Office Room A",
    "timestamp": 1699123456789,
    "unit": "celsius",
    "_msgid": "..."
}
                </div>
            </details>
        </div>
        
        <div class="exercise">
            <h3>ç·´ç¿’å•é¡Œ 3: ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚·ã‚¹ãƒ†ãƒ  <span class="difficulty difficulty-medium">ä¸­ç´š</span></h3>
            
            <h4>ğŸ¯ ç›®æ¨™</h4>
            <p>flowå¤‰æ•°ã‚’ä½¿ã£ã¦ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’ä½œæˆã—ã€ãƒªã‚»ãƒƒãƒˆæ©Ÿèƒ½ã‚‚å®Ÿè£…ã™ã‚‹</p>
            
            <h4>ğŸ“‹ è¦ä»¶</h4>
            <ol>
                <li>ã€Œãƒªã‚»ãƒƒãƒˆã€ãƒœã‚¿ãƒ³: ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’0ã«åˆæœŸåŒ–</li>
                <li>ã€Œã‚«ã‚¦ãƒ³ãƒˆã€ãƒœã‚¿ãƒ³: ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’1å¢—ã‚„ã™</li>
                <li>ä¸¡æ–¹ã¨ã‚‚Debugã§ç¾åœ¨ã®ã‚«ã‚¦ãƒ³ãƒˆå€¤ã‚’è¡¨ç¤º</li>
                <li>flowå¤‰æ•° "counter" ã‚’ä½¿ç”¨</li>
            </ol>
            
            <h4>ğŸ’­ ãƒ’ãƒ³ãƒˆ</h4>
            
            <p><strong>ğŸ¯ Changeãƒãƒ¼ãƒ‰ã®è¨­å®š(è‡ªåˆ†ã§è€ƒãˆã¦ã¿ã‚ˆã†):</strong></p>
            <ul>
                <li>flowå¤‰æ•°ã‚’è¨­å®šã™ã‚‹ã«ã¯?</li>
                <li>flowå¤‰æ•°ã‚’å¢—ã‚„ã™ã«ã¯?</li>
                <li>JSONataã§è¨ˆç®—ã™ã‚‹æ–¹æ³•ã¯?</li>
            </ul>
            
            <p><strong>ğŸ”§ Changeãƒãƒ¼ãƒ‰1(ãƒªã‚»ãƒƒãƒˆ)ã®è©³ç´°è¨­å®š:</strong></p>
            <div class="important">
                <p>2ã¤ã®ãƒ«ãƒ¼ãƒ«ã‚’è¿½åŠ ã—ã¾ã™:</p>
                
                <p><strong>ãƒ«ãƒ¼ãƒ«1:</strong></p>
                <ul>
                    <li>å‹•ä½œ: Set(è¨­å®š)</li>
                    <li>å¯¾è±¡: <code>flow.counter</code></li>
                    <li>å€¤: <code>0</code> (numberå‹)</li>
                </ul>
                
                <p><strong>ãƒ«ãƒ¼ãƒ«2:</strong></p>
                <ul>
                    <li>å‹•ä½œ: Set(è¨­å®š)</li>
                    <li>å¯¾è±¡: <code>msg.payload</code></li>
                    <li>å€¤: <code>counter</code> (flowå‹ã‚’é¸æŠ)</li>
                </ul>
                
                <p>ã“ã‚Œã«ã‚ˆã‚Šã€ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’0ã«ãƒªã‚»ãƒƒãƒˆã—ã€ãã®å€¤ã‚’payloadã«è¨­å®šã—ã¾ã™ã€‚</p>
            </div>
            
            <p><strong>ğŸ”§ Changeãƒãƒ¼ãƒ‰2(ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ—)ã®è©³ç´°è¨­å®š:</strong></p>
            <div class="important">
                <p>2ã¤ã®ãƒ«ãƒ¼ãƒ«ã‚’è¿½åŠ ã—ã¾ã™:</p>
                
                <p><strong>ãƒ«ãƒ¼ãƒ«1:</strong></p>
                <ul>
                    <li>å‹•ä½œ: Set(è¨­å®š)</li>
                    <li>å¯¾è±¡: <code>flow.counter</code></li>
                    <li>å€¤ã‚¿ã‚¤ãƒ—: JSONataå¼</li>
                    <li>å€¤: <code>$flowContext("counter") + 1</code></li>
                </ul>
                
                <p><strong>ãƒ«ãƒ¼ãƒ«2:</strong></p>
                <ul>
                    <li>å‹•ä½œ: Set(è¨­å®š)</li>
                    <li>å¯¾è±¡: <code>msg.payload</code></li>
                    <li>å€¤: <code>counter</code> (flowå‹ã‚’é¸æŠ)</li>
                </ul>
                
                <p>ã“ã‚Œã«ã‚ˆã‚Šã€ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’1å¢—ã‚„ã—ã€ãã®å€¤ã‚’payloadã«è¨­å®šã—ã¾ã™ã€‚</p>
            </div>
            
            <p><strong>ğŸ”¢ Injectãƒãƒ¼ãƒ‰ã®è¨­å®š:</strong></p>
            <ul>
                <li>2ã¤ã®Injectãƒãƒ¼ãƒ‰ã‚’ä½œæˆ</li>
                <li>åå‰: ã€Œãƒªã‚»ãƒƒãƒˆã€ã¨ã€Œã‚«ã‚¦ãƒ³ãƒˆã€</li>
                <li>Payload: ã©ã¡ã‚‰ã‚‚timestampã§OK(ä½¿ç”¨ã—ãªã„)</li>
            </ul>
            
            <details>
                <summary>ğŸ“¦ è§£ç­”ãƒ•ãƒ­ãƒ¼ (ã‚¯ãƒªãƒƒã‚¯ã—ã¦è¡¨ç¤º)</summary>
                <div class="flow-json">
[
    {
        "id": "ex3_inject_reset",
        "type": "inject",
        "z": "exercise3",
        "name": "ãƒªã‚»ãƒƒãƒˆ",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 120,
        "y": 100,
        "wires": [
            ["ex3_reset"]
        ]
    },
    {
        "id": "ex3_reset",
        "type": "change",
        "z": "exercise3",
        "name": "ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼=0",
        "rules": [
            {
                "t": "set",
                "p": "counter",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "counter",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 310,
        "y": 100,
        "wires": [
            ["ex3_debug"]
        ]
    },
    {
        "id": "ex3_inject_count",
        "type": "inject",
        "z": "exercise3",
        "name": "ã‚«ã‚¦ãƒ³ãƒˆ",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 120,
        "y": 180,
        "wires": [
            ["ex3_increment"]
        ]
    },
    {
        "id": "ex3_increment",
        "type": "change",
        "z": "exercise3",
        "name": "ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼+1",
        "rules": [
            {
                "t": "set",
                "p": "counter",
                "pt": "flow",
                "to": "$flowContext(\"counter\") + 1",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "counter",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 310,
        "y": 180,
        "wires": [
            ["ex3_debug"]
        ]
    },
    {
        "id": "ex3_debug",
        "type": "debug",
        "z": "exercise3",
        "name": "ã‚«ã‚¦ãƒ³ãƒˆè¡¨ç¤º",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 520,
        "y": 140,
        "wires": []
    }
]
                </div>
                <p><strong>âœ… å‹•ä½œç¢ºèª:</strong></p>
                <ul>
                    <li>ã€Œãƒªã‚»ãƒƒãƒˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯ â†’ 0ãŒè¡¨ç¤ºã•ã‚Œã‚‹</li>
                    <li>ã€Œã‚«ã‚¦ãƒ³ãƒˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯ â†’ 1ãŒè¡¨ç¤ºã•ã‚Œã‚‹</li>
                    <li>ã€Œã‚«ã‚¦ãƒ³ãƒˆã€ã‚’ä½•åº¦ã‹ã‚¯ãƒªãƒƒã‚¯ â†’ 2, 3, 4...ã¨å¢—ãˆã‚‹</li>
                    <li>ã€Œãƒªã‚»ãƒƒãƒˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯ â†’ å†ã³0ã«æˆ»ã‚‹</li>
                </ul>
            </details>
        </div>
        
        <div class="exercise">
            <h3>ç·´ç¿’å•é¡Œ 4: ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ  <span class="difficulty difficulty-hard">ä¸Šç´š</span></h3>
            
            <h4>ğŸ¯ ç›®æ¨™</h4>
            <p>è¤‡æ•°ã®å‡¦ç†ã‚’çµ„ã¿åˆã‚ã›ã¦ã€ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°ã™ã‚‹</p>
            
            <h4>ğŸ“‹ ã‚·ãƒŠãƒªã‚ª</h4>
            <p>æ¸©åº¦ã‚»ãƒ³ã‚µãƒ¼ã‹ã‚‰å—ä¿¡ã—ãŸãƒ‡ãƒ¼ã‚¿ã«ã¯ä½™åˆ†ãªæƒ…å ±ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚ä»¥ä¸‹ã®å‡¦ç†ã‚’è¡Œã£ã¦ã‚¯ãƒªãƒ¼ãƒ³ãªãƒ‡ãƒ¼ã‚¿ã«ã—ã¾ã™:</p>
            
            <h4>ğŸ“‹ è¦ä»¶</h4>
            <ol>
                <li>Injectãƒãƒ¼ãƒ‰ã§ä»¥ä¸‹ã®ã‚ˆã†ãªç”Ÿãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡:
                    <div class="code-block">
{
    "sensorId": "temp-001",
    "rawValue": "25.5C",
    "apiKey": "secret123",
    "metadata": "debug info"
}
                    </div>
                </li>
                <li>Changeãƒãƒ¼ãƒ‰1ã§ä»¥ä¸‹ã®å‡¦ç†:
                    <ul>
                        <li>rawValueã‹ã‚‰æ•°å€¤ã ã‘ã‚’æŠ½å‡º(25.5)</li>
                        <li>payloadã«æ•°å€¤ã‚’è¨­å®š</li>
                    </ul>
                </li>
                <li>Changeãƒãƒ¼ãƒ‰2ã§ä»¥ä¸‹ã®å‡¦ç†:
                    <ul>
                        <li>ã‚»ãƒ³ã‚·ãƒ†ã‚£ãƒ–ãªæƒ…å ±(apiKey, metadata)ã‚’å‰Šé™¤</li>
                    </ul>
                </li>
                <li>Changeãƒãƒ¼ãƒ‰3ã§ä»¥ä¸‹ã®å‡¦ç†:
                    <ul>
                        <li>timestampã‚’è¿½åŠ </li>
                        <li>å‡¦ç†æ¸ˆã¿ãƒ•ãƒ©ã‚°(processed: true)ã‚’è¿½åŠ </li>
                    </ul>
                </li>
                <li>Debugãƒãƒ¼ãƒ‰ã§æœ€çµ‚çµæœã‚’è¡¨ç¤º</li>
            </ol>
            
            <h4>ğŸ’­ ãƒ’ãƒ³ãƒˆ</h4>
            
            <p><strong>ğŸ¯ Changeãƒãƒ¼ãƒ‰ã®è¨­å®š(è‡ªåˆ†ã§è€ƒãˆã¦ã¿ã‚ˆã†):</strong></p>
            <ul>
                <li>æ–‡å­—åˆ—ã‹ã‚‰æ•°å€¤ã‚’æŠ½å‡ºã™ã‚‹ã«ã¯?</li>
                <li>è¤‡æ•°ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’å‰Šé™¤ã™ã‚‹ã«ã¯?</li>
                <li>ã©ã®ã‚ˆã†ãªé †ç•ªã§å‡¦ç†ã™ã‚‹?</li>
            </ul>
            
            <p><strong>ğŸ”¢ Injectãƒãƒ¼ãƒ‰ã®è¨­å®š(ãã®ã¾ã¾è¨­å®šã—ã¦ãã ã•ã„):</strong></p>
            <div class="important">
                <p>Injectãƒãƒ¼ãƒ‰ã®è¨­å®š:</p>
                <ul>
                    <li>Payload: JSONå‹ã‚’é¸æŠ</li>
                    <li>ä»¥ä¸‹ã®JSONã‚’å…¥åŠ›:</li>
                </ul>
                <div class="code-block">
{
    "sensorId": "temp-001",
    "rawValue": "25.5C",
    "apiKey": "secret123",
    "metadata": "debug info"
}
                </div>
            </div>
            
            <p><strong>ğŸ”§ Changeãƒãƒ¼ãƒ‰1(æ•°å€¤æŠ½å‡º)ã®è©³ç´°è¨­å®š:</strong></p>
            <div class="important">
                <p>2ã¤ã®ãƒ«ãƒ¼ãƒ«ã‚’è¿½åŠ :</p>
                
                <p><strong>ãƒ«ãƒ¼ãƒ«1:</strong></p>
                <ul>
                    <li>å‹•ä½œ: Set(è¨­å®š)</li>
                    <li>å¯¾è±¡: <code>msg.payload</code></li>
                    <li>å€¤ã‚¿ã‚¤ãƒ—: JSONataå¼</li>
                    <li>å€¤: <code>$number($substringBefore(rawValue, "C"))</code></li>
                </ul>
                <p>â€» ã“ã‚Œã¯"25.5C"ã‹ã‚‰"C"ã‚ˆã‚Šå‰ã®éƒ¨åˆ†ã‚’å–ã‚Šå‡ºã—ã€æ•°å€¤ã«å¤‰æ›ã—ã¾ã™</p>
                
                <p><strong>ãƒ«ãƒ¼ãƒ«2:</strong></p>
                <ul>
                    <li>å‹•ä½œ: Delete(å‰Šé™¤)</li>
                    <li>å¯¾è±¡: <code>msg.rawValue</code></li>
                </ul>
            </div>
            
            <p><strong>ğŸ”§ Changeãƒãƒ¼ãƒ‰2(æƒ…å ±å‰Šé™¤)ã®è©³ç´°è¨­å®š:</strong></p>
            <div class="important">
                <p>2ã¤ã®ãƒ«ãƒ¼ãƒ«ã‚’è¿½åŠ :</p>
                
                <p><strong>ãƒ«ãƒ¼ãƒ«1:</strong></p>
                <ul>
                    <li>å‹•ä½œ: Delete(å‰Šé™¤)</li>
                    <li>å¯¾è±¡: <code>msg.apiKey</code></li>
                </ul>
                
                <p><strong>ãƒ«ãƒ¼ãƒ«2:</strong></p>
                <ul>
                    <li>å‹•ä½œ: Delete(å‰Šé™¤)</li>
                    <li>å¯¾è±¡: <code>msg.metadata</code></li>
                </ul>
            </div>
            
            <p><strong>ğŸ”§ Changeãƒãƒ¼ãƒ‰3(æƒ…å ±è¿½åŠ )ã®è©³ç´°è¨­å®š:</strong></p>
            <div class="important">
                <p>2ã¤ã®ãƒ«ãƒ¼ãƒ«ã‚’è¿½åŠ :</p>
                
                <p><strong>ãƒ«ãƒ¼ãƒ«1:</strong></p>
                <ul>
                    <li>å‹•ä½œ: Set(è¨­å®š)</li>
                    <li>å¯¾è±¡: <code>msg.timestamp</code></li>
                    <li>å€¤: timestampå‹ã‚’é¸æŠ</li>
                </ul>
                
                <p><strong>ãƒ«ãƒ¼ãƒ«2:</strong></p>
                <ul>
                    <li>å‹•ä½œ: Set(è¨­å®š)</li>
                    <li>å¯¾è±¡: <code>msg.processed</code></li>
                    <li>å€¤: <code>true</code> (booleanå‹)</li>
                </ul>
            </div>
            
            <p><strong>ğŸ› Debugãƒãƒ¼ãƒ‰ã®è¨­å®š:</strong></p>
            <ul>
                <li>Output: <code>complete msg object</code></li>
            </ul>
            
            <details>
                <summary>ğŸ“¦ è§£ç­”ãƒ•ãƒ­ãƒ¼ (ã‚¯ãƒªãƒƒã‚¯ã—ã¦è¡¨ç¤º)</summary>
                <div class="flow-json">
[
    {
        "id": "ex4_inject",
        "type": "inject",
        "z": "exercise4",
        "name": "ç”Ÿãƒ‡ãƒ¼ã‚¿",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"sensorId\":\"temp-001\",\"rawValue\":\"25.5C\",\"apiKey\":\"secret123\",\"metadata\":\"debug info\"}",
        "payloadType": "json",
        "x": 120,
        "y": 100,
        "wires": [
            ["ex4_extract"]
        ]
    },
    {
        "id": "ex4_extract",
        "type": "change",
        "z": "exercise4",
        "name": "æ•°å€¤æŠ½å‡º",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$number($substringBefore(rawValue, \"C\"))",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "rawValue",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 280,
        "y": 100,
        "wires": [
            ["ex4_clean"]
        ]
    },
    {
        "id": "ex4_clean",
        "type": "change",
        "z": "exercise4",
        "name": "æƒ…å ±å‰Šé™¤",
        "rules": [
            {
                "t": "delete",
                "p": "apiKey",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "metadata",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 430,
        "y": 100,
        "wires": [
            ["ex4_add"]
        ]
    },
    {
        "id": "ex4_add",
        "type": "change",
        "z": "exercise4",
        "name": "æƒ…å ±è¿½åŠ ",
        "rules": [
            {
                "t": "set",
                "p": "timestamp",
                "pt": "msg",
                "to": "",
                "tot": "date"
            },
            {
                "t": "set",
                "p": "processed",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 580,
        "y": 100,
        "wires": [
            ["ex4_debug"]
        ]
    },
    {
        "id": "ex4_debug",
        "type": "debug",
        "z": "exercise4",
        "name": "ã‚¯ãƒªãƒ¼ãƒ³ãƒ‡ãƒ¼ã‚¿",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 750,
        "y": 100,
        "wires": []
    }
]
                </div>
                <p><strong>âœ… å‹•ä½œç¢ºèª:</strong></p>
                <p>æœ€çµ‚çš„ã«ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¯ãƒªãƒ¼ãƒ³ãªãƒ‡ãƒ¼ã‚¿ãŒå¾—ã‚‰ã‚Œã¾ã™:</p>
                <div class="code-block">
{
    "sensorId": "temp-001",
    "payload": 25.5,
    "timestamp": 1699123456789,
    "processed": true,
    "_msgid": "..."
}
                </div>
                <ul>
                    <li>rawValueãŒæ•°å€¤ã«å¤‰æ›ã•ã‚Œpayloadã«æ ¼ç´ã•ã‚ŒãŸ</li>
                    <li>apiKeyã¨metadataãŒå‰Šé™¤ã•ã‚ŒãŸ</li>
                    <li>timestampã¨processedãƒ•ãƒ©ã‚°ãŒè¿½åŠ ã•ã‚ŒãŸ</li>
                </ul>
            </details>
        </div>
        
        <h2>ğŸ“ 6. ã¾ã¨ã‚</h2>
        
        <div class="important">
            <h3>Changeãƒãƒ¼ãƒ‰ã®é‡è¦ãƒã‚¤ãƒ³ãƒˆ</h3>
            <ul>
                <li>âœ… <strong>ã‚³ãƒ¼ãƒ‰ä¸è¦</strong>: Functionãƒãƒ¼ãƒ‰ã‚’ä½¿ã‚ãšã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’åŠ å·¥</li>
                <li>âœ… <strong>4ã¤ã®æ“ä½œ</strong>: Set(è¨­å®š)ã€Change(å¤‰æ›´)ã€Delete(å‰Šé™¤)ã€Move(ç§»å‹•)</li>
                <li>âœ… <strong>å¤šæ§˜ãªå‹</strong>: æ–‡å­—åˆ—ã€æ•°å€¤ã€JSONã€JSONataã€å¤‰æ•°ãªã©</li>
                <li>âœ… <strong>è¤‡æ•°ãƒ«ãƒ¼ãƒ«</strong>: 1ã¤ã®ãƒãƒ¼ãƒ‰ã§è¤‡æ•°ã®å‡¦ç†ã‚’å®Ÿè¡Œå¯èƒ½</li>
                <li>âœ… <strong>å¤‰æ•°ç®¡ç†</strong>: flowå¤‰æ•°ã‚„globalå¤‰æ•°ã®æ“ä½œãŒç°¡å˜</li>
            </ul>
        </div>
        
        <div class="tip">
            <h3>ğŸ“š æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—</h3>
            <p>Changeãƒãƒ¼ãƒ‰ã‚’ãƒã‚¹ã‚¿ãƒ¼ã—ãŸã‚‰ã€ä»¥ä¸‹ã®ãƒãƒ¼ãƒ‰ã‚‚å­¦ã‚“ã§ã¿ã¾ã—ã‚‡ã†:</p>
            <ul>
                <li><strong>Switchãƒãƒ¼ãƒ‰</strong>: æ¡ä»¶åˆ†å²ã¨ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°</li>
                <li><strong>Templateãƒãƒ¼ãƒ‰</strong>: ãƒ†ã‚­ã‚¹ãƒˆã‚„HTMLã®ç”Ÿæˆ</li>
                <li><strong>JSONãƒãƒ¼ãƒ‰</strong>: JSONâ‡”æ–‡å­—åˆ—ã®ç›¸äº’å¤‰æ›</li>
                <li><strong>Functionãƒãƒ¼ãƒ‰</strong>: ã‚ˆã‚Šè¤‡é›‘ãªãƒ­ã‚¸ãƒƒã‚¯ã®å®Ÿè£…</li>
            </ul>
        </div>
        
        <h2>ğŸ”§ 7. ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°</h2>
        
        <h3>ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ–¹æ³•</h3>
        
        <table>
            <tr>
                <th>å•é¡Œ</th>
                <th>åŸå› </th>
                <th>è§£æ±ºæ–¹æ³•</th>
            </tr>
            <tr>
                <td>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒè¨­å®šã•ã‚Œãªã„</td>
                <td>å‹ã®é¸æŠãƒŸã‚¹</td>
                <td>string/number/JSONataãªã©ã€æ­£ã—ã„å‹ã‚’é¸æŠ</td>
            </tr>
            <tr>
                <td>JSONataå¼ãŒã‚¨ãƒ©ãƒ¼</td>
                <td>æ§‹æ–‡ã‚¨ãƒ©ãƒ¼</td>
                <td>å¼ã‚’ç¢ºèªã€‚å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§æ§‹æ–‡ã‚’ç¢ºèª</td>
            </tr>
            <tr>
                <td>flowå¤‰æ•°ãŒä¿å­˜ã•ã‚Œãªã„</td>
                <td>å¯¾è±¡ãŒmsgã«ãªã£ã¦ã„ã‚‹</td>
                <td>å¯¾è±¡ã‚’ã€Œflowã€ã«å¤‰æ›´</td>
            </tr>
            <tr>
                <td>å‰Šé™¤ã—ãŸãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒã¾ã ã‚ã‚‹</td>
                <td>å‰Šé™¤æ“ä½œã®é †ç•ª</td>
                <td>ãƒ«ãƒ¼ãƒ«ã®é †ç•ªã‚’ç¢ºèªã€‚ä¸Šã‹ã‚‰é †ã«å®Ÿè¡Œã•ã‚Œã‚‹</td>
            </tr>
        </table>
        
        <h2>ğŸ“– 8. JSONataå‚è€ƒè³‡æ–™</h2>
        
        <h3>ã‚ˆãä½¿ã†JSONataé–¢æ•°</h3>
        
        <table>
            <tr>
                <th>é–¢æ•°</th>
                <th>èª¬æ˜</th>
                <th>ä¾‹</th>
            </tr>
            <tr>
                <td>$number()</td>
                <td>æ•°å€¤ã«å¤‰æ›</td>
                <td>$number("42") â†’ 42</td>
            </tr>
            <tr>
                <td>$string()</td>
                <td>æ–‡å­—åˆ—ã«å¤‰æ›</td>
                <td>$string(42) â†’ "42"</td>
            </tr>
            <tr>
                <td>$substring()</td>
                <td>éƒ¨åˆ†æ–‡å­—åˆ—ã‚’å–å¾—</td>
                <td>$substring("Hello", 0, 3) â†’ "Hel"</td>
            </tr>
            <tr>
                <td>$substringBefore()</td>
                <td>æŒ‡å®šæ–‡å­—ã‚ˆã‚Šå‰ã‚’å–å¾—</td>
                <td>$substringBefore("a-b-c", "-") â†’ "a"</td>
            </tr>
            <tr>
                <td>$substringAfter()</td>
                <td>æŒ‡å®šæ–‡å­—ã‚ˆã‚Šå¾Œã‚’å–å¾—</td>
                <td>$substringAfter("a-b-c", "-") â†’ "b-c"</td>
            </tr>
            <tr>
                <td>$uppercase()</td>
                <td>å¤§æ–‡å­—ã«å¤‰æ›</td>
                <td>$uppercase("hello") â†’ "HELLO"</td>
            </tr>
            <tr>
                <td>$lowercase()</td>
                <td>å°æ–‡å­—ã«å¤‰æ›</td>
                <td>$lowercase("HELLO") â†’ "hello"</td>
            </tr>
            <tr>
                <td>$round()</td>
                <td>å››æ¨äº”å…¥</td>
                <td>$round(3.14159, 2) â†’ 3.14</td>
            </tr>
        </table>
        
        <h2>ğŸ”— 9. è¿½åŠ ãƒªã‚½ãƒ¼ã‚¹</h2>
        
        <ul>
            <li><a href="https://nodered.org/docs/user-guide/nodes#change" target="_blank">Node-REDå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: Changeãƒãƒ¼ãƒ‰</a></li>
            <li><a href="https://cookbook.nodered.org/" target="_blank">Node-RED Cookbook: ãƒ‘ã‚¿ãƒ¼ãƒ³é›†</a></li>
            <li><a href="https://docs.jsonata.org/" target="_blank">JSONataå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a></li>
            <li><a href="https://try.jsonata.org/" target="_blank">JSONata Exerciser: ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«</a></li>
        </ul>
        
        <hr>
        
        <p style="text-align: center; color: #999; margin-top: 40px;">
            <small>ã“ã®ã‚¬ã‚¤ãƒ‰ãŒå½¹ã«ç«‹ã¡ã¾ã—ãŸã‚‰ã€å®Ÿéš›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ç·´ç¿’ã—ã¦ã¿ã¦ãã ã•ã„!<br>
            Changeãƒãƒ¼ãƒ‰ã¯ã‚³ãƒ¼ãƒ‰ä¸è¦ã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’åŠ å·¥ã§ãã‚‹ã€ã¨ã¦ã‚‚ä¾¿åˆ©ãªãƒãƒ¼ãƒ‰ã§ã™ã€‚</small>
        </p>
    </div>
    
    <script>
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ã‚’è¿½åŠ 
        document.addEventListener('DOMContentLoaded', function() {
            // ã™ã¹ã¦ã®.code-blockã¨.flow-jsonã«ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ã‚’è¿½åŠ 
            const codeBlocks = document.querySelectorAll('.code-block, .flow-json');
            
            codeBlocks.forEach(function(block) {
                // ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ã‚’ä½œæˆ
                const button = document.createElement('button');
                button.className = 'copy-button';
                button.textContent = 'ã‚³ãƒ”ãƒ¼';
                
                // ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¿½åŠ 
                button.addEventListener('click', function() {
                    // ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’å–å¾—
                    const code = block.textContent.replace('ã‚³ãƒ”ãƒ¼', '').trim();
                    
                    // ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼
                    navigator.clipboard.writeText(code).then(function() {
                        // æˆåŠŸæ™‚ã®è¦–è¦šçš„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
                        button.textContent = 'ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ!';
                        button.classList.add('copied');
                        
                        // 2ç§’å¾Œã«å…ƒã«æˆ»ã™
                        setTimeout(function() {
                            button.textContent = 'ã‚³ãƒ”ãƒ¼';
                            button.classList.remove('copied');
                        }, 2000);
                    }).catch(function(err) {
                        console.error('ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ:', err);
                        button.textContent = 'ã‚¨ãƒ©ãƒ¼';
                        setTimeout(function() {
                            button.textContent = 'ã‚³ãƒ”ãƒ¼';
                        }, 2000);
                    });
                });
                
                // ãƒœã‚¿ãƒ³ã‚’ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã«è¿½åŠ 
                block.style.position = 'relative';
                block.appendChild(button);
            });
        });
    </script>
</body>
</html>
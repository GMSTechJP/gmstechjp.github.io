<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Node-RED TCP ãƒãƒ¼ãƒ‰å®Œå…¨ã‚¬ã‚¤ãƒ‰</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.8; max-width: 1000px; margin: 0 auto; padding: 20px; background-color: #f5f5f5; color: #333; }
        h1 { color: #b92d5d; border-bottom: 3px solid #b92d5d; padding-bottom: 10px; }
        h2 { color: #d33682; margin-top: 40px; border-left: 5px solid #d33682; padding-left: 15px; }
        h3 { color: #555; margin-top: 25px; }
        h4 { color: #666; margin-top: 20px; }
        .container { background-color: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 20px; }
        .node-example { background-color: #2d3133; padding: 20px; border-radius: 5px; margin: 20px 0; color: white; font-family: 'Courier New', monospace; display: flex; align-items: center; flex-wrap: wrap; gap: 5px; }
        .node { display: inline-block; padding: 8px 15px; border-radius: 4px; margin: 5px; font-weight: bold; font-size: 14px; }
        .node-inject { background-color: #3fadb5; color: white; }
        .node-debug { background-color: #87a48d; color: white; }
        .node-function { background-color: #e8a658; color: white; }
        .node-change { background-color: #e7a070; color: white; }
        .node-switch { background-color: #e2d96e; color: #333; }
        .node-tcp-in { background-color: #c9b6d5; color: #333; }
        .node-tcp-out { background-color: #c9b6d5; color: #333; }
        .node-tcp-request { background-color: #c9b6d5; color: #333; }
        .node-catch { background-color: #e8967a; color: white; }
        .arrow { color: #999; font-size: 20px; margin: 0 10px; }
        .important { background-color: #fce4ec; border-left: 4px solid #b92d5d; padding: 15px; margin: 20px 0; border-radius: 0 5px 5px 0; }
        .tip { background-color: #e8f5e9; border-left: 4px solid #4caf50; padding: 15px; margin: 20px 0; border-radius: 0 5px 5px 0; }
        .warning { background-color: #fff3e0; border-left: 4px solid #ff9800; padding: 15px; margin: 20px 0; border-radius: 0 5px 5px 0; }
        .code-block { background-color: #2d3133; color: #f8f8f2; padding: 15px; border-radius: 5px; margin: 15px 0; overflow-x: auto; font-family: 'Courier New', Consolas, monospace; font-size: 14px; white-space: pre; }
        .flow-json { background-color: #1a1a2e; color: #a6e22e; padding: 15px; border-radius: 5px; font-family: 'Courier New', Consolas, monospace; font-size: 12px; overflow-x: auto; white-space: pre; position: relative; max-height: 400px; overflow-y: auto; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
        th { background-color: #b92d5d; color: white; }
        tr:nth-child(even) { background-color: #f9f9f9; }
        .exercise { background-color: #e3f2fd; padding: 20px; border-radius: 8px; margin: 20px 0; border: 2px solid #2196f3; }
        .exercise h3 { color: #1976d2; margin-top: 0; }
        .difficulty { display: inline-block; padding: 3px 10px; border-radius: 12px; font-size: 12px; font-weight: bold; margin-left: 10px; }
        .difficulty-easy { background-color: #c8e6c9; color: #2e7d32; }
        .difficulty-medium { background-color: #fff9c4; color: #f57f17; }
        .difficulty-hard { background-color: #ffcdd2; color: #c62828; }
        details { background-color: #f5f5f5; padding: 10px 15px; border-radius: 5px; margin: 10px 0; }
        details summary { cursor: pointer; font-weight: bold; color: #1976d2; }
        details[open] summary { margin-bottom: 10px; }
        .toc { background-color: #fafafa; border: 1px solid #ddd; border-radius: 8px; padding: 20px; margin: 20px 0; }
        .toc h3 { margin-top: 0; color: #b92d5d; }
        .toc ul { list-style: none; padding-left: 0; }
        .toc li { padding: 5px 0; }
        .toc a { color: #1976d2; text-decoration: none; }
        .toc a:hover { text-decoration: underline; }
        .copy-btn { position: absolute; top: 5px; right: 5px; background-color: #666; color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer; font-size: 12px; }
        .copy-btn:hover { background-color: #888; }
        .node-compare { display: flex; gap: 20px; flex-wrap: wrap; margin: 20px 0; }
        .node-card { background: #f9f9f9; border: 1px solid #ddd; border-radius: 8px; padding: 15px; flex: 1; min-width: 200px; }
        .node-card h4 { margin-top: 0; color: #b92d5d; }
        .diagram-box { background: #2d3133; color: white; padding: 20px; border-radius: 8px; font-family: monospace; margin: 15px 0; text-align: center; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”— Node-RED TCP ãƒãƒ¼ãƒ‰å®Œå…¨ã‚¬ã‚¤ãƒ‰</h1>
        
        <div class="toc">
            <h3>ğŸ“š ç›®æ¬¡</h3>
            <ul>
                <li><a href="#section1">1. æ¦‚è¦</a></li>
                <li><a href="#section2">2. TCP In ãƒãƒ¼ãƒ‰</a></li>
                <li><a href="#section3">3. TCP Out ãƒãƒ¼ãƒ‰</a></li>
                <li><a href="#section4">4. TCP Request ãƒãƒ¼ãƒ‰</a></li>
                <li><a href="#section5">5. å®Ÿç”¨çš„ãªä½¿ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³</a></li>
                <li><a href="#section6">6. ã‚µãƒ³ãƒ—ãƒ«ãƒ•ãƒ­ãƒ¼</a></li>
                <li><a href="#section7">7. æ¼”ç¿’å•é¡Œ</a></li>
                <li><a href="#section8">8. ã¾ã¨ã‚</a></li>
                <li><a href="#section9">9. ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°</a></li>
                <li><a href="#section10">10. å®Ÿå‹™æ´»ç”¨ä¾‹</a></li>
            </ul>
        </div>
        
        <h2 id="section1">ğŸ“– 1. æ¦‚è¦</h2>
        
        <p>TCP ãƒãƒ¼ãƒ‰ã¯ã€<strong>ä½ãƒ¬ãƒ™ãƒ«ã®TCP/IPã‚½ã‚±ãƒƒãƒˆé€šä¿¡</strong>ã‚’è¡Œã†ãŸã‚ã®ãƒãƒ¼ãƒ‰ã§ã™ã€‚HTTPã‚„MQTTãªã©ã®é«˜ãƒ¬ãƒ™ãƒ«ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’ä½¿ã‚ãšã€ç›´æ¥TCPã§é€šä¿¡ã—ãŸã„å ´åˆã«ä½¿ç”¨ã—ã¾ã™ã€‚</p>
        
        <p>ğŸ“ <strong>é›»è©±ã«ä¾‹ãˆã‚‹ã¨</strong>ï¼šTCPã¯ã€Œç³¸é›»è©±ã€ã®ã‚ˆã†ãªã‚‚ã®ã§ã™ã€‚ç›¸æ‰‹ã¨1å¯¾1ã§ç·šã‚’ã¤ãªãã€ãã®ç·šã‚’é€šã˜ã¦ãƒ‡ãƒ¼ã‚¿ã‚’é€ã‚Šåˆã„ã¾ã™ã€‚HTTPã‚„MQTTã¯ã“ã®ã€Œç³¸é›»è©±ã€ã®ä¸Šã«æ±ºã¾ã£ãŸä¼šè©±ãƒ«ãƒ¼ãƒ«ï¼ˆãƒ—ãƒ­ãƒˆã‚³ãƒ«ï¼‰ã‚’è¼‰ã›ãŸã‚‚ã®ã§ã™ã€‚</p>
        
        <h3>TCPã®ç‰¹å¾´</h3>
        <ul>
            <li><strong>ä¿¡é ¼æ€§</strong>ï¼šãƒ‡ãƒ¼ã‚¿ãŒå¿…ãšé †ç•ªé€šã‚Šã«å±Šãï¼ˆå†é€åˆ¶å¾¡ã‚ã‚Šï¼‰</li>
            <li><strong>ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³å‹</strong>ï¼šé€šä¿¡å‰ã«æ¥ç¶šã‚’ç¢ºç«‹</li>
            <li><strong>åŒæ–¹å‘é€šä¿¡</strong>ï¼šä¸€åº¦æ¥ç¶šã™ã‚Œã°åŒæ–¹ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿é€ä¿¡å¯èƒ½</li>
            <li><strong>ã‚¹ãƒˆãƒªãƒ¼ãƒ </strong>ï¼šãƒ‡ãƒ¼ã‚¿ã¯é€£ç¶šã—ãŸãƒã‚¤ãƒˆåˆ—ã¨ã—ã¦æ‰±ã†</li>
        </ul>
        
        <div class="node-compare">
            <div class="node-card">
                <h4>ğŸ“¥ TCP In</h4>
                <div class="node-example" style="justify-content: center;">
                    <span class="node node-tcp-in">TCP In</span>
                </div>
                <p><strong>å½¹å‰²:</strong> TCPæ¥ç¶šã‚’å¾…ã¡å—ã‘ã€ãƒ‡ãƒ¼ã‚¿ã‚’å—ä¿¡</p>
                <p>ã‚µãƒ¼ãƒãƒ¼/ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä¸¡ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ</p>
            </div>
            
            <div class="node-card">
                <h4>ğŸ“¤ TCP Out</h4>
                <div class="node-example" style="justify-content: center;">
                    <span class="node node-tcp-out">TCP Out</span>
                </div>
                <p><strong>å½¹å‰²:</strong> TCPæ¥ç¶šã§ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡</p>
                <p>æ—¢å­˜æ¥ç¶šã¾ãŸã¯æ–°è¦æ¥ç¶šã«é€ä¿¡</p>
            </div>
            
            <div class="node-card">
                <h4>ğŸ”„ TCP Request</h4>
                <div class="node-example" style="justify-content: center;">
                    <span class="node node-tcp-request">TCP Request</span>
                </div>
                <p><strong>å½¹å‰²:</strong> ãƒªã‚¯ã‚¨ã‚¹ãƒˆé€ä¿¡â†’ãƒ¬ã‚¹ãƒãƒ³ã‚¹å—ä¿¡</p>
                <p>HTTP Requestã®ã‚ˆã†ãªä½¿ã„æ–¹</p>
            </div>
        </div>
        
        <h2 id="section2">âš™ï¸ 2. TCP In ãƒãƒ¼ãƒ‰</h2>
        
        <h3>å‹•ä½œãƒ¢ãƒ¼ãƒ‰</h3>
        <table>
            <tr><th>ãƒ¢ãƒ¼ãƒ‰</th><th>èª¬æ˜</th><th>ç”¨é€”</th></tr>
            <tr>
                <td><strong>Listen on</strong></td>
                <td>æŒ‡å®šãƒãƒ¼ãƒˆã§ã‚µãƒ¼ãƒãƒ¼ã¨ã—ã¦å¾…ã¡å—ã‘</td>
                <td>TCPã‚µãƒ¼ãƒãƒ¼ã‚’æ§‹ç¯‰</td>
            </tr>
            <tr>
                <td><strong>Connect to</strong></td>
                <td>æŒ‡å®šãƒ›ã‚¹ãƒˆ:ãƒãƒ¼ãƒˆã«ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨ã—ã¦æ¥ç¶š</td>
                <td>å¤–éƒ¨TCPã‚µãƒ¼ãƒãƒ¼ã«æ¥ç¶š</td>
            </tr>
        </table>
        
        <h3>ä¸»è¦ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£</h3>
        <table>
            <tr><th>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£</th><th>èª¬æ˜</th><th>ä¾‹</th></tr>
            <tr><td><strong>Type</strong></td><td>Listen on / Connect to</td><td>Listen on</td></tr>
            <tr><td><strong>Port</strong></td><td>ãƒãƒ¼ãƒˆç•ªå·</td><td>9000</td></tr>
            <tr><td><strong>Host</strong></td><td>æ¥ç¶šå…ˆãƒ›ã‚¹ãƒˆï¼ˆConnect toæ™‚ï¼‰</td><td>192.168.1.100</td></tr>
            <tr><td><strong>Output</strong></td><td>å‡ºåŠ›å½¢å¼</td><td>stream / single / after silence</td></tr>
        </table>
        
        <h3>Output ã‚ªãƒ—ã‚·ãƒ§ãƒ³</h3>
        <table>
            <tr><th>ã‚ªãƒ—ã‚·ãƒ§ãƒ³</th><th>èª¬æ˜</th><th>ç”¨é€”</th></tr>
            <tr>
                <td><strong>stream of</strong></td>
                <td>å›ºå®šé•·ãƒã‚¤ãƒˆæ•°ã§åˆ†å‰²å‡ºåŠ›</td>
                <td>ãƒã‚¤ãƒŠãƒªãƒ—ãƒ­ãƒˆã‚³ãƒ«</td>
            </tr>
            <tr>
                <td><strong>single</strong></td>
                <td>æ¥ç¶šã”ã¨ã«1ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</td>
                <td>çŸ­ã„ãƒ‡ãƒ¼ã‚¿</td>
            </tr>
            <tr>
                <td><strong>after silence of</strong></td>
                <td>æŒ‡å®šç§’ã®ç„¡é€šä¿¡å¾Œã«å‡ºåŠ›</td>
                <td>ä¸å®šé•·ãƒ‡ãƒ¼ã‚¿</td>
            </tr>
            <tr>
                <td><strong>never - keep connection</strong></td>
                <td>æ¥ç¶šç¶­æŒã€ãƒ‡ãƒ¼ã‚¿ã”ã¨ã«å‡ºåŠ›</td>
                <td>ã‚¹ãƒˆãƒªãƒ¼ãƒ å‡¦ç†</td>
            </tr>
        </table>
        
        <h3>å—ä¿¡æ™‚ã® msg ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£</h3>
        <table>
            <tr><th>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£</th><th>èª¬æ˜</th></tr>
            <tr><td><strong>msg.payload</strong></td><td>å—ä¿¡ãƒ‡ãƒ¼ã‚¿ï¼ˆBuffer ã¾ãŸã¯ Stringï¼‰</td></tr>
            <tr><td><strong>msg._session</strong></td><td>æ¥ç¶šã‚»ãƒƒã‚·ãƒ§ãƒ³è­˜åˆ¥å­</td></tr>
            <tr><td><strong>msg.ip</strong></td><td>æ¥ç¶šå…ƒIPã‚¢ãƒ‰ãƒ¬ã‚¹</td></tr>
            <tr><td><strong>msg.port</strong></td><td>æ¥ç¶šå…ƒãƒãƒ¼ãƒˆç•ªå·</td></tr>
        </table>
        
        <h2 id="section3">âš™ï¸ 3. TCP Out ãƒãƒ¼ãƒ‰</h2>
        
        <h3>å‹•ä½œãƒ¢ãƒ¼ãƒ‰</h3>
        <table>
            <tr><th>ãƒ¢ãƒ¼ãƒ‰</th><th>èª¬æ˜</th><th>ç”¨é€”</th></tr>
            <tr>
                <td><strong>Listen on</strong></td>
                <td>ã‚µãƒ¼ãƒãƒ¼ã¨ã—ã¦å¾…ã¡å—ã‘ã€æ¥ç¶šã—ãŸã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«é€ä¿¡</td>
                <td>ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¸é€ä¿¡</td>
            </tr>
            <tr>
                <td><strong>Connect to</strong></td>
                <td>æŒ‡å®šãƒ›ã‚¹ãƒˆã«æ¥ç¶šã—ã¦é€ä¿¡</td>
                <td>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨ã—ã¦é€ä¿¡</td>
            </tr>
            <tr>
                <td><strong>Reply to TCP</strong></td>
                <td>TCP In ã§å—ä¿¡ã—ãŸæ¥ç¶šã«è¿”ä¿¡</td>
                <td>ãƒªã‚¯ã‚¨ã‚¹ãƒˆâ†’ãƒ¬ã‚¹ãƒãƒ³ã‚¹</td>
            </tr>
        </table>
        
        <h3>ä¸»è¦ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£</h3>
        <table>
            <tr><th>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£</th><th>èª¬æ˜</th><th>ä¾‹</th></tr>
            <tr><td><strong>Type</strong></td><td>å‹•ä½œãƒ¢ãƒ¼ãƒ‰</td><td>Reply to TCP</td></tr>
            <tr><td><strong>Port</strong></td><td>ãƒãƒ¼ãƒˆç•ªå·</td><td>9000</td></tr>
            <tr><td><strong>Host</strong></td><td>æ¥ç¶šå…ˆãƒ›ã‚¹ãƒˆ</td><td>192.168.1.100</td></tr>
            <tr><td><strong>Close connection</strong></td><td>é€ä¿¡å¾Œã«æ¥ç¶šã‚’é–‰ã˜ã‚‹</td><td>after each message</td></tr>
        </table>
        
        <h3>é€ä¿¡æ™‚ã«è¨­å®šã§ãã‚‹ msg ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£</h3>
        <table>
            <tr><th>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£</th><th>èª¬æ˜</th></tr>
            <tr><td><strong>msg.payload</strong></td><td>é€ä¿¡ãƒ‡ãƒ¼ã‚¿ï¼ˆString ã¾ãŸã¯ Bufferï¼‰</td></tr>
            <tr><td><strong>msg._session</strong></td><td>é€ä¿¡å…ˆã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼ˆReply to TCPæ™‚ã«å¿…è¦ï¼‰</td></tr>
        </table>
        
        <h2 id="section4">âš™ï¸ 4. TCP Request ãƒãƒ¼ãƒ‰</h2>
        
        <p>TCP Request ãƒãƒ¼ãƒ‰ã¯ã€<strong>ãƒªã‚¯ã‚¨ã‚¹ãƒˆé€ä¿¡â†’ãƒ¬ã‚¹ãƒãƒ³ã‚¹å¾…æ©Ÿ</strong>ã‚’1ãƒãƒ¼ãƒ‰ã§è¡Œã„ã¾ã™ã€‚HTTP Request ã«ä¼¼ãŸå‹•ä½œã§ã™ã€‚</p>
        
        <h3>ä¸»è¦ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£</h3>
        <table>
            <tr><th>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£</th><th>èª¬æ˜</th><th>ä¾‹</th></tr>
            <tr><td><strong>Host</strong></td><td>æ¥ç¶šå…ˆãƒ›ã‚¹ãƒˆ</td><td>192.168.1.100</td></tr>
            <tr><td><strong>Port</strong></td><td>æ¥ç¶šå…ˆãƒãƒ¼ãƒˆ</td><td>9000</td></tr>
            <tr><td><strong>Return</strong></td><td>ãƒ¬ã‚¹ãƒãƒ³ã‚¹å‡ºåŠ›æ¡ä»¶</td><td>after fixed number of chars</td></tr>
        </table>
        
        <h3>Return ã‚ªãƒ—ã‚·ãƒ§ãƒ³</h3>
        <table>
            <tr><th>ã‚ªãƒ—ã‚·ãƒ§ãƒ³</th><th>èª¬æ˜</th></tr>
            <tr><td><strong>never - keep connection open</strong></td><td>æ¥ç¶šç¶­æŒã€ãƒ‡ãƒ¼ã‚¿å—ä¿¡ã”ã¨ã«å‡ºåŠ›</td></tr>
            <tr><td><strong>after fixed number of chars</strong></td><td>æŒ‡å®šãƒã‚¤ãƒˆæ•°å—ä¿¡å¾Œã«å‡ºåŠ›</td></tr>
            <tr><td><strong>when character received</strong></td><td>ç‰¹å®šæ–‡å­—ï¼ˆä¾‹: æ”¹è¡Œï¼‰å—ä¿¡æ™‚ã«å‡ºåŠ›</td></tr>
            <tr><td><strong>after a fixed timeout</strong></td><td>ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå¾Œã«å‡ºåŠ›</td></tr>
            <tr><td><strong>immediately</strong></td><td>é€ä¿¡å¾Œã™ãã«å‡ºåŠ›ï¼ˆãƒ¬ã‚¹ãƒãƒ³ã‚¹å¾…ãŸãªã„ï¼‰</td></tr>
        </table>
        
        <h2 id="section5">ğŸ”§ 5. å®Ÿç”¨çš„ãªä½¿ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³</h2>
        
        <h3>ãƒ‘ã‚¿ãƒ¼ãƒ³1: TCPã‚µãƒ¼ãƒãƒ¼ï¼ˆEchoï¼‰</h3>
        <div class="node-example">
            <span class="node node-tcp-in">TCP In (Listen)</span>
            <span class="arrow">â†’</span>
            <span class="node node-function">å‡¦ç†</span>
            <span class="arrow">â†’</span>
            <span class="node node-tcp-out">TCP Out (Reply)</span>
        </div>
        <p><strong>ç”¨é€”:</strong> ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰ã®æ¥ç¶šã‚’å—ã‘ä»˜ã‘ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã™</p>
        
        <h3>ãƒ‘ã‚¿ãƒ¼ãƒ³2: TCPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ</h3>
        <div class="node-example">
            <span class="node node-inject">ãƒˆãƒªã‚¬ãƒ¼</span>
            <span class="arrow">â†’</span>
            <span class="node node-tcp-request">TCP Request</span>
            <span class="arrow">â†’</span>
            <span class="node node-debug">çµæœ</span>
        </div>
        <p><strong>ç”¨é€”:</strong> å¤–éƒ¨TCPã‚µãƒ¼ãƒãƒ¼ã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡</p>
        
        <h3>ãƒ‘ã‚¿ãƒ¼ãƒ³3: ãƒ‡ãƒã‚¤ã‚¹é–“é€šä¿¡ï¼ˆåŒæ–¹å‘ï¼‰</h3>
        <div class="diagram-box">
            [Raspberry Pi A]          [Raspberry Pi B]<br>
            TCP Out (Connect) â”€â”€â”€â”€â”€â”€â†’ TCP In (Listen)<br>
            TCP In (Listen)  â†â”€â”€â”€â”€â”€â”€ TCP Out (Connect)
        </div>
        <p><strong>ç”¨é€”:</strong> 2å°ã®ãƒ‡ãƒã‚¤ã‚¹é–“ã§ãƒ‡ãƒ¼ã‚¿ã‚’åŒæ–¹å‘ã«ã‚„ã‚Šå–ã‚Š</p>
        
        <h3>ãƒ‘ã‚¿ãƒ¼ãƒ³4: ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆé€ä¿¡</h3>
        <div class="node-example">
            <span class="node node-inject">ãƒ‡ãƒ¼ã‚¿</span>
            <span class="arrow">â†’</span>
            <span class="node node-tcp-out">TCP Out (Listen)</span>
        </div>
        <p><strong>ç”¨é€”:</strong> æ¥ç¶šä¸­ã®å…¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«ãƒ‡ãƒ¼ã‚¿ã‚’é…ä¿¡</p>
        
        <h2 id="section6">ğŸ“¥ 6. ã‚µãƒ³ãƒ—ãƒ«ãƒ•ãƒ­ãƒ¼</h2>
        
        <div class="warning">
            <p><strong>âš ï¸ ãƒ†ã‚¹ãƒˆæ–¹æ³•:</strong></p>
            <p>TCPã®ãƒ†ã‚¹ãƒˆã«ã¯ä»¥ä¸‹ã®ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã§ãã¾ã™ï¼š</p>
            <ul>
                <li><strong>netcat (nc):</strong> <code>nc localhost 9000</code>ï¼ˆLinux/Macï¼‰</li>
                <li><strong>telnet:</strong> <code>telnet localhost 9000</code></li>
                <li><strong>Node-REDå†…:</strong> TCP Request ãƒãƒ¼ãƒ‰ã§ã‚»ãƒ«ãƒ•ãƒ†ã‚¹ãƒˆ</li>
                <li><strong>Python:</strong> socket ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä½œæˆ</li>
            </ul>
        </div>
        
        <h3>netcat ã§ã®ãƒ†ã‚¹ãƒˆä¾‹</h3>
        <div class="code-block"># ã‚µãƒ¼ãƒãƒ¼ã«æ¥ç¶šï¼ˆã‚µãƒ³ãƒ—ãƒ«ãƒ•ãƒ­ãƒ¼å®Ÿè¡Œå¾Œï¼‰
nc localhost 9000

# ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›ã—ã¦Enter
Hello Server!

# ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒè¡¨ç¤ºã•ã‚Œã‚‹</div>
        
        <details>
            <summary>ğŸ“¥ ã‚µãƒ³ãƒ—ãƒ«ãƒ•ãƒ­ãƒ¼JSONï¼ˆã‚¯ãƒªãƒƒã‚¯ã§å±•é–‹ï¼‰</summary>
            <div class="flow-json">[
    {
        "id": "tcp_sample_tab",
        "type": "tab",
        "label": "TCP ã‚µãƒ³ãƒ—ãƒ«",
        "disabled": false,
        "info": ""
    },
    {
        "id": "tcp_comment1",
        "type": "comment",
        "z": "tcp_sample_tab",
        "name": "â”â”â” TCPã‚µãƒ¼ãƒãƒ¼ï¼ˆã‚¨ã‚³ãƒ¼ï¼‰ â”â”â”",
        "info": "ãƒãƒ¼ãƒˆ9000ã§å¾…ã¡å—ã‘ã€å—ä¿¡ãƒ‡ãƒ¼ã‚¿ã‚’ãã®ã¾ã¾è¿”ã™",
        "x": 200,
        "y": 40,
        "wires": []
    },
    {
        "id": "tcp_in_server",
        "type": "tcp in",
        "z": "tcp_sample_tab",
        "name": "TCP Server :9000",
        "server": "server",
        "host": "",
        "port": "9000",
        "datamode": "stream",
        "datatype": "utf8",
        "newline": "",
        "topic": "",
        "trim": false,
        "base64": false,
        "tls": "",
        "x": 180,
        "y": 100,
        "wires": [["tcp_func_echo", "tcp_debug_received"]]
    },
    {
        "id": "tcp_func_echo",
        "type": "function",
        "z": "tcp_sample_tab",
        "name": "ã‚¨ã‚³ãƒ¼å‡¦ç†",
        "func": "// å—ä¿¡ãƒ‡ãƒ¼ã‚¿ã«æƒ…å ±ã‚’è¿½åŠ ã—ã¦è¿”ä¿¡\nvar received = msg.payload;\nvar clientInfo = msg.ip + \":\" + msg.port;\n\nnode.status({fill: \"green\", shape: \"dot\", text: clientInfo});\n\nmsg.payload = \"[Echo] \" + received + \" (from \" + clientInfo + \")\\n\";\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 390,
        "y": 100,
        "wires": [["tcp_out_reply"]]
    },
    {
        "id": "tcp_out_reply",
        "type": "tcp out",
        "z": "tcp_sample_tab",
        "name": "Reply to Client",
        "host": "",
        "port": "",
        "beserver": "reply",
        "base64": false,
        "end": false,
        "tls": "",
        "x": 600,
        "y": 100,
        "wires": []
    },
    {
        "id": "tcp_debug_received",
        "type": "debug",
        "z": "tcp_sample_tab",
        "name": "å—ä¿¡ãƒ‡ãƒ¼ã‚¿",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "ip",
        "statusType": "msg",
        "x": 390,
        "y": 140,
        "wires": []
    },
    {
        "id": "tcp_comment2",
        "type": "comment",
        "z": "tcp_sample_tab",
        "name": "â”â”â” TCP Requestï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼‰ â”â”â”",
        "info": "ä¸Šè¨˜ã‚µãƒ¼ãƒãƒ¼ã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡",
        "x": 210,
        "y": 220,
        "wires": []
    },
    {
        "id": "tcp_inject_request",
        "type": "inject",
        "z": "tcp_sample_tab",
        "name": "ãƒªã‚¯ã‚¨ã‚¹ãƒˆé€ä¿¡",
        "props": [{"p": "payload"}],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "Hello TCP Server!",
        "payloadType": "str",
        "x": 180,
        "y": 280,
        "wires": [["tcp_request"]]
    },
    {
        "id": "tcp_request",
        "type": "tcp request",
        "z": "tcp_sample_tab",
        "name": "TCP Request",
        "server": "localhost",
        "port": "9000",
        "out": "sit",
        "ret": "string",
        "splitc": " ",
        "newline": "",
        "trim": false,
        "tls": "",
        "x": 390,
        "y": 280,
        "wires": [["tcp_debug_response"]]
    },
    {
        "id": "tcp_debug_response",
        "type": "debug",
        "z": "tcp_sample_tab",
        "name": "ãƒ¬ã‚¹ãƒãƒ³ã‚¹",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "\"å—ä¿¡\"",
        "statusType": "str",
        "x": 590,
        "y": 280,
        "wires": []
    },
    {
        "id": "tcp_comment3",
        "type": "comment",
        "z": "tcp_sample_tab",
        "name": "â”â”â” JSONãƒ‡ãƒ¼ã‚¿ã®é€å—ä¿¡ â”â”â”",
        "info": "",
        "x": 190,
        "y": 360,
        "wires": []
    },
    {
        "id": "tcp_in_json_server",
        "type": "tcp in",
        "z": "tcp_sample_tab",
        "name": "TCP Server :9001",
        "server": "server",
        "host": "",
        "port": "9001",
        "datamode": "stream",
        "datatype": "utf8",
        "newline": "\\n",
        "topic": "",
        "trim": false,
        "base64": false,
        "tls": "",
        "x": 180,
        "y": 420,
        "wires": [["tcp_func_json_process"]]
    },
    {
        "id": "tcp_func_json_process",
        "type": "function",
        "z": "tcp_sample_tab",
        "name": "JSONå‡¦ç†",
        "func": "try {\n    // å—ä¿¡ãƒ‡ãƒ¼ã‚¿ã‚’JSONã¨ã—ã¦ãƒ‘ãƒ¼ã‚¹\n    var data = JSON.parse(msg.payload);\n    \n    // å‡¦ç†çµæœã‚’ä½œæˆ\n    var response = {\n        status: \"success\",\n        received: data,\n        processed: true,\n        timestamp: new Date().toISOString()\n    };\n    \n    msg.payload = JSON.stringify(response) + \"\\n\";\n} catch(e) {\n    msg.payload = JSON.stringify({status: \"error\", message: \"Invalid JSON\"}) + \"\\n\";\n}\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 390,
        "y": 420,
        "wires": [["tcp_out_json_reply", "tcp_debug_json"]]
    },
    {
        "id": "tcp_out_json_reply",
        "type": "tcp out",
        "z": "tcp_sample_tab",
        "name": "Reply JSON",
        "host": "",
        "port": "",
        "beserver": "reply",
        "base64": false,
        "end": false,
        "tls": "",
        "x": 590,
        "y": 420,
        "wires": []
    },
    {
        "id": "tcp_debug_json",
        "type": "debug",
        "z": "tcp_sample_tab",
        "name": "JSONå‡¦ç†çµæœ",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 600,
        "y": 460,
        "wires": []
    },
    {
        "id": "tcp_inject_json",
        "type": "inject",
        "z": "tcp_sample_tab",
        "name": "JSONãƒªã‚¯ã‚¨ã‚¹ãƒˆ",
        "props": [{"p": "payload"}],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"command\":\"getData\",\"id\":123}",
        "payloadType": "str",
        "x": 180,
        "y": 500,
        "wires": [["tcp_request_json"]]
    },
    {
        "id": "tcp_request_json",
        "type": "tcp request",
        "z": "tcp_sample_tab",
        "name": "TCP Request JSON",
        "server": "localhost",
        "port": "9001",
        "out": "char",
        "ret": "string",
        "splitc": "\\n",
        "newline": "",
        "trim": false,
        "tls": "",
        "x": 410,
        "y": 500,
        "wires": [["tcp_debug_json_response"]]
    },
    {
        "id": "tcp_debug_json_response",
        "type": "debug",
        "z": "tcp_sample_tab",
        "name": "JSONãƒ¬ã‚¹ãƒãƒ³ã‚¹",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "\"JSONå—ä¿¡\"",
        "statusType": "str",
        "x": 620,
        "y": 500,
        "wires": []
    },
    {
        "id": "tcp_comment4",
        "type": "comment",
        "z": "tcp_sample_tab",
        "name": "â”â”â” æ¥ç¶šçŠ¶æ…‹ã®ç›£è¦– â”â”â”",
        "info": "",
        "x": 180,
        "y": 580,
        "wires": []
    },
    {
        "id": "tcp_in_monitor",
        "type": "tcp in",
        "z": "tcp_sample_tab",
        "name": "TCP Server :9002",
        "server": "server",
        "host": "",
        "port": "9002",
        "datamode": "stream",
        "datatype": "utf8",
        "newline": "",
        "topic": "",
        "trim": false,
        "base64": false,
        "tls": "",
        "x": 180,
        "y": 640,
        "wires": [["tcp_func_monitor"]]
    },
    {
        "id": "tcp_func_monitor",
        "type": "function",
        "z": "tcp_sample_tab",
        "name": "æ¥ç¶šç®¡ç†",
        "func": "// ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæƒ…å ±ã‚’å–å¾—\nvar clientId = msg.ip + \":\" + msg.port;\nvar session = msg._session;\n\n// æ¥ç¶šãƒªã‚¹ãƒˆã‚’ç®¡ç†\nvar clients = flow.get('tcpClients') || {};\n\nif (msg.payload === '') {\n    // ç©ºãƒ‡ãƒ¼ã‚¿ã¯åˆ‡æ–­ã‚’æ„å‘³ã™ã‚‹ã“ã¨ãŒã‚ã‚‹\n    delete clients[session];\n    node.warn(\"Client disconnected: \" + clientId);\n} else {\n    // æ¥ç¶šä¸­ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’è¨˜éŒ²\n    clients[session] = {\n        ip: msg.ip,\n        port: msg.port,\n        lastSeen: new Date().toISOString()\n    };\n}\n\nflow.set('tcpClients', clients);\nnode.status({fill: \"blue\", shape: \"dot\", text: Object.keys(clients).length + \" clients\"});\n\nmsg.payload = \"Welcome! You are: \" + clientId + \"\\n\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 390,
        "y": 640,
        "wires": [["tcp_out_monitor"]]
    },
    {
        "id": "tcp_out_monitor",
        "type": "tcp out",
        "z": "tcp_sample_tab",
        "name": "Reply",
        "host": "",
        "port": "",
        "beserver": "reply",
        "base64": false,
        "end": false,
        "tls": "",
        "x": 570,
        "y": 640,
        "wires": []
    }
]</div>
        </details>
        
        <h2 id="section7">ğŸ“ 7. æ¼”ç¿’å•é¡Œ</h2>
        
        <div class="exercise">
            <h3>æ¼”ç¿’1: ã‚·ãƒ³ãƒ—ãƒ«ãªTCPã‚¨ã‚³ãƒ¼ã‚µãƒ¼ãƒãƒ¼ <span class="difficulty difficulty-easy">åˆç´š</span></h3>
            <p><strong>ğŸ“‹ èª²é¡Œ:</strong> ãƒãƒ¼ãƒˆ9100ã§æ¥ç¶šã‚’å¾…ã¡å—ã‘ã€å—ä¿¡ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’ãã®ã¾ã¾è¿”ã™ã‚¨ã‚³ãƒ¼ã‚µãƒ¼ãƒãƒ¼ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚</p>
            
            <p><strong>ğŸ¯ è¦æ±‚ä»•æ§˜:</strong></p>
            <ul>
                <li>TCP In ãƒãƒ¼ãƒ‰: Listen on ãƒãƒ¼ãƒˆ 9100</li>
                <li>å—ä¿¡ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’ãã®ã¾ã¾ TCP Out ã§è¿”ä¿¡</li>
            </ul>
            
            <details>
                <summary>ğŸ’¡ ãƒ’ãƒ³ãƒˆ</summary>
                <p><strong>TCP In ãƒãƒ¼ãƒ‰:</strong></p>
                <ul>
                    <li>Type: Listen on</li>
                    <li>Port: 9100</li>
                    <li>Output: stream of String</li>
                </ul>
                <p><strong>TCP Out ãƒãƒ¼ãƒ‰:</strong></p>
                <ul>
                    <li>Type: Reply to TCP</li>
                </ul>
                <p>TCP In ã®å‡ºåŠ›ã‚’ç›´æ¥ TCP Out ã«æ¥ç¶šã™ã‚Œã°ã€msg._session ãŒä¿æŒã•ã‚Œã¦ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«è¿”ä¿¡ã•ã‚Œã¾ã™ã€‚</p>
            </details>
            
            <details>
                <summary>âœ… è§£ç­”ä¾‹ãƒ•ãƒ­ãƒ¼</summary>
                <div class="flow-json">[
    {"id": "ex1_tab", "type": "tab", "label": "æ¼”ç¿’1"},
    {"id": "ex1_tcp_in", "type": "tcp in", "z": "ex1_tab", "name": "TCP Server :9100", "server": "server", "host": "", "port": "9100", "datamode": "stream", "datatype": "utf8", "newline": "", "topic": "", "trim": false, "base64": false, "tls": "", "x": 180, "y": 100, "wires": [["ex1_tcp_out", "ex1_debug"]]},
    {"id": "ex1_tcp_out", "type": "tcp out", "z": "ex1_tab", "name": "Reply", "host": "", "port": "", "beserver": "reply", "base64": false, "end": false, "tls": "", "x": 410, "y": 100, "wires": []},
    {"id": "ex1_debug", "type": "debug", "z": "ex1_tab", "name": "å—ä¿¡ãƒ­ã‚°", "active": true, "tosidebar": true, "console": false, "tostatus": true, "complete": "payload", "targetType": "msg", "statusVal": "ip", "statusType": "msg", "x": 410, "y": 140, "wires": []}
]</div>
            </details>
        </div>
        
        <div class="exercise">
            <h3>æ¼”ç¿’2: æ™‚åˆ»ä»˜ããƒ¬ã‚¹ãƒãƒ³ã‚¹ <span class="difficulty difficulty-easy">åˆç´š</span></h3>
            <p><strong>ğŸ“‹ èª²é¡Œ:</strong> å—ä¿¡ãƒ‡ãƒ¼ã‚¿ã«ç¾åœ¨æ™‚åˆ»ã‚’è¿½åŠ ã—ã¦è¿”ä¿¡ã™ã‚‹ã‚µãƒ¼ãƒãƒ¼ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚</p>
            
            <p><strong>ğŸ¯ è¦æ±‚ä»•æ§˜:</strong></p>
            <ul>
                <li>ãƒãƒ¼ãƒˆ: 9101</li>
                <li>å—ä¿¡: <code>Hello</code></li>
                <li>è¿”ä¿¡: <code>[2024-01-01T12:00:00] Hello</code></li>
            </ul>
            
            <details>
                <summary>ğŸ’¡ ãƒ’ãƒ³ãƒˆ</summary>
                <p><strong>Function ãƒãƒ¼ãƒ‰:</strong></p>
                <div class="code-block">var timestamp = new Date().toISOString();
msg.payload = "[" + timestamp + "] " + msg.payload;
return msg;</div>
            </details>
            
            <details>
                <summary>âœ… è§£ç­”ä¾‹ãƒ•ãƒ­ãƒ¼</summary>
                <div class="flow-json">[
    {"id": "ex2_tab", "type": "tab", "label": "æ¼”ç¿’2"},
    {"id": "ex2_tcp_in", "type": "tcp in", "z": "ex2_tab", "name": "TCP Server :9101", "server": "server", "host": "", "port": "9101", "datamode": "stream", "datatype": "utf8", "newline": "", "topic": "", "trim": false, "base64": false, "tls": "", "x": 180, "y": 100, "wires": [["ex2_func"]]},
    {"id": "ex2_func", "type": "function", "z": "ex2_tab", "name": "æ™‚åˆ»è¿½åŠ ", "func": "var timestamp = new Date().toISOString();\nmsg.payload = \"[\" + timestamp + \"] \" + msg.payload + \"\\n\";\nreturn msg;", "outputs": 1, "timeout": 0, "noerr": 0, "initialize": "", "finalize": "", "libs": [], "x": 390, "y": 100, "wires": [["ex2_tcp_out"]]},
    {"id": "ex2_tcp_out", "type": "tcp out", "z": "ex2_tab", "name": "Reply", "host": "", "port": "", "beserver": "reply", "base64": false, "end": false, "tls": "", "x": 570, "y": 100, "wires": []}
]</div>
            </details>
        </div>
        
        <div class="exercise">
            <h3>æ¼”ç¿’3: ã‚³ãƒãƒ³ãƒ‰å‡¦ç†ã‚µãƒ¼ãƒãƒ¼ <span class="difficulty difficulty-medium">ä¸­ç´š</span></h3>
            <p><strong>ğŸ“‹ èª²é¡Œ:</strong> ç°¡å˜ãªã‚³ãƒãƒ³ãƒ‰ã‚’å—ã‘ä»˜ã‘ã‚‹TCPã‚µãƒ¼ãƒãƒ¼ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚</p>
            
            <p><strong>ğŸ¯ è¦æ±‚ä»•æ§˜:</strong></p>
            <ul>
                <li>ãƒãƒ¼ãƒˆ: 9102</li>
                <li><code>TIME</code> â†’ ç¾åœ¨æ™‚åˆ»ã‚’è¿”ã™</li>
                <li><code>PING</code> â†’ <code>PONG</code>ã‚’è¿”ã™</li>
                <li><code>HELLO åå‰</code> â†’ <code>Hello, åå‰!</code>ã‚’è¿”ã™</li>
                <li>ãã®ä»– â†’ <code>Unknown command</code>ã‚’è¿”ã™</li>
            </ul>
            
            <details>
                <summary>ğŸ’¡ ãƒ’ãƒ³ãƒˆ</summary>
                <p><strong>Function ãƒãƒ¼ãƒ‰:</strong></p>
                <div class="code-block">var cmd = msg.payload.trim().toUpperCase();
var parts = msg.payload.trim().split(' ');

if (cmd === 'TIME') {
    msg.payload = new Date().toISOString();
} else if (cmd === 'PING') {
    msg.payload = 'PONG';
} else if (parts[0].toUpperCase() === 'HELLO') {
    var name = parts[1] || 'Guest';
    msg.payload = 'Hello, ' + name + '!';
} else {
    msg.payload = 'Unknown command';
}
msg.payload += '\n';
return msg;</div>
            </details>
            
            <details>
                <summary>âœ… è§£ç­”ä¾‹ãƒ•ãƒ­ãƒ¼</summary>
                <div class="flow-json">[
    {"id": "ex3_tab", "type": "tab", "label": "æ¼”ç¿’3"},
    {"id": "ex3_tcp_in", "type": "tcp in", "z": "ex3_tab", "name": "TCP Server :9102", "server": "server", "host": "", "port": "9102", "datamode": "stream", "datatype": "utf8", "newline": "", "topic": "", "trim": false, "base64": false, "tls": "", "x": 180, "y": 100, "wires": [["ex3_func"]]},
    {"id": "ex3_func", "type": "function", "z": "ex3_tab", "name": "ã‚³ãƒãƒ³ãƒ‰å‡¦ç†", "func": "var cmd = msg.payload.trim().toUpperCase();\nvar parts = msg.payload.trim().split(' ');\n\nif (cmd === 'TIME') {\n    msg.payload = new Date().toISOString();\n} else if (cmd === 'PING') {\n    msg.payload = 'PONG';\n} else if (parts[0].toUpperCase() === 'HELLO') {\n    var name = parts[1] || 'Guest';\n    msg.payload = 'Hello, ' + name + '!';\n} else {\n    msg.payload = 'Unknown command';\n}\nmsg.payload += '\\n';\nreturn msg;", "outputs": 1, "timeout": 0, "noerr": 0, "initialize": "", "finalize": "", "libs": [], "x": 400, "y": 100, "wires": [["ex3_tcp_out"]]},
    {"id": "ex3_tcp_out", "type": "tcp out", "z": "ex3_tab", "name": "Reply", "host": "", "port": "", "beserver": "reply", "base64": false, "end": false, "tls": "", "x": 590, "y": 100, "wires": []}
]</div>
            </details>
        </div>
        
        <div class="exercise">
            <h3>æ¼”ç¿’4: 2å°ã®Node-REDé–“é€šä¿¡ <span class="difficulty difficulty-hard">ä¸Šç´š</span></h3>
            <p><strong>ğŸ“‹ èª²é¡Œ:</strong> ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã™ã‚‹ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨ã€å—ä¿¡ã—ã¦å‡¦ç†ã™ã‚‹ã‚µãƒ¼ãƒãƒ¼ã‚’åŒä¸€ãƒ•ãƒ­ãƒ¼å†…ã«ä½œæˆã—ã¦ãã ã•ã„ã€‚</p>
            
            <p><strong>ğŸ¯ è¦æ±‚ä»•æ§˜:</strong></p>
            <ul>
                <li>ã‚µãƒ¼ãƒãƒ¼: ãƒãƒ¼ãƒˆ9103ã§å¾…ã¡å—ã‘ã€JSONãƒ‡ãƒ¼ã‚¿ã‚’å—ä¿¡ã—ã¦å‡¦ç†</li>
                <li>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ: 5ç§’ã”ã¨ã«ãƒ©ãƒ³ãƒ€ãƒ ãªã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡</li>
                <li>é€ä¿¡ãƒ‡ãƒ¼ã‚¿: <code>{"sensor":"temp","value":25.5}</code></li>
            </ul>
            
            <details>
                <summary>ğŸ’¡ ãƒ’ãƒ³ãƒˆ</summary>
                <p><strong>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´:</strong> Injectï¼ˆ5ç§’repeatï¼‰â†’ Functionï¼ˆJSONç”Ÿæˆï¼‰â†’ TCP Request</p>
                <p><strong>ã‚µãƒ¼ãƒãƒ¼å´:</strong> TCP In â†’ Functionï¼ˆJSONå‡¦ç†ï¼‰â†’ TCP Out</p>
                <p>æ”¹è¡Œæ–‡å­—ï¼ˆ\nï¼‰ã‚’åŒºåˆ‡ã‚Šã¨ã—ã¦ä½¿ã†ã¨ã€JSONãƒ‡ãƒ¼ã‚¿ã®å¢ƒç•ŒãŒåˆ†ã‹ã‚Šã‚„ã™ããªã‚Šã¾ã™ã€‚</p>
            </details>
            
            <details>
                <summary>âœ… è§£ç­”ä¾‹ãƒ•ãƒ­ãƒ¼</summary>
                <div class="flow-json">[
    {"id": "ex4_tab", "type": "tab", "label": "æ¼”ç¿’4"},
    {"id": "ex4_comment1", "type": "comment", "z": "ex4_tab", "name": "ã€ã‚µãƒ¼ãƒãƒ¼ã€‘", "info": "", "x": 130, "y": 40, "wires": []},
    {"id": "ex4_tcp_in", "type": "tcp in", "z": "ex4_tab", "name": "TCP Server :9103", "server": "server", "host": "", "port": "9103", "datamode": "stream", "datatype": "utf8", "newline": "\\n", "topic": "", "trim": false, "base64": false, "tls": "", "x": 180, "y": 100, "wires": [["ex4_func_server"]]},
    {"id": "ex4_func_server", "type": "function", "z": "ex4_tab", "name": "JSONãƒ‘ãƒ¼ã‚¹", "func": "try {\n    var data = JSON.parse(msg.payload);\n    node.status({fill: \"green\", shape: \"dot\", text: data.sensor + \": \" + data.value});\n    msg.payload = JSON.stringify({status: \"received\", data: data}) + \"\\n\";\n} catch(e) {\n    msg.payload = JSON.stringify({status: \"error\"}) + \"\\n\";\n}\nreturn msg;", "outputs": 1, "timeout": 0, "noerr": 0, "initialize": "", "finalize": "", "libs": [], "x": 400, "y": 100, "wires": [["ex4_tcp_out", "ex4_debug_server"]]},
    {"id": "ex4_tcp_out", "type": "tcp out", "z": "ex4_tab", "name": "Reply", "host": "", "port": "", "beserver": "reply", "base64": false, "end": false, "tls": "", "x": 590, "y": 100, "wires": []},
    {"id": "ex4_debug_server", "type": "debug", "z": "ex4_tab", "name": "ã‚µãƒ¼ãƒãƒ¼å‡¦ç†", "active": true, "tosidebar": true, "console": false, "tostatus": false, "complete": "payload", "targetType": "msg", "x": 610, "y": 140, "wires": []},
    {"id": "ex4_comment2", "type": "comment", "z": "ex4_tab", "name": "ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã€‘", "info": "", "x": 140, "y": 200, "wires": []},
    {"id": "ex4_inject", "type": "inject", "z": "ex4_tab", "name": "5ç§’ã”ã¨", "props": [{"p": "payload"}], "repeat": "5", "crontab": "", "once": false, "onceDelay": 0.1, "topic": "", "payload": "", "payloadType": "date", "x": 150, "y": 260, "wires": [["ex4_func_client"]]},
    {"id": "ex4_func_client", "type": "function", "z": "ex4_tab", "name": "ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ", "func": "var temp = (20 + Math.random() * 10).toFixed(1);\nmsg.payload = JSON.stringify({\n    sensor: \"temperature\",\n    value: parseFloat(temp),\n    timestamp: new Date().toISOString()\n}) + \"\\n\";\nreturn msg;", "outputs": 1, "timeout": 0, "noerr": 0, "initialize": "", "finalize": "", "libs": [], "x": 380, "y": 260, "wires": [["ex4_tcp_request"]]},
    {"id": "ex4_tcp_request", "type": "tcp request", "z": "ex4_tab", "name": "TCP Request", "server": "localhost", "port": "9103", "out": "char", "ret": "string", "splitc": "\\n", "newline": "", "trim": false, "tls": "", "x": 590, "y": 260, "wires": [["ex4_debug_client"]]},
    {"id": "ex4_debug_client", "type": "debug", "z": "ex4_tab", "name": "ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå—ä¿¡", "active": true, "tosidebar": true, "console": false, "tostatus": true, "complete": "payload", "targetType": "msg", "statusVal": "\"é€å—ä¿¡å®Œäº†\"", "statusType": "str", "x": 790, "y": 260, "wires": []}
]</div>
            </details>
        </div>
        
        <h2 id="section8">âœ… 8. ã¾ã¨ã‚</h2>
        
        <div class="important">
            <p><strong>ğŸ¯ é‡è¦ãƒã‚¤ãƒ³ãƒˆ:</strong></p>
            <ul>
                <li><strong>TCP In</strong>: Listenï¼ˆã‚µãƒ¼ãƒãƒ¼ï¼‰ã¾ãŸã¯ Connectï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼‰ã¨ã—ã¦å‹•ä½œ</li>
                <li><strong>TCP Out</strong>: Reply ã§å—ä¿¡å…ƒã«è¿”ä¿¡ã€ã¾ãŸã¯æŒ‡å®šãƒ›ã‚¹ãƒˆã«é€ä¿¡</li>
                <li><strong>TCP Request</strong>: ãƒªã‚¯ã‚¨ã‚¹ãƒˆâ†’ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’1ãƒãƒ¼ãƒ‰ã§å‡¦ç†</li>
                <li><strong>msg._session</strong>: æ¥ç¶šã‚’è­˜åˆ¥ï¼ˆReply to TCPæ™‚ã«å¿…é ˆï¼‰</li>
                <li><strong>åŒºåˆ‡ã‚Šæ–‡å­—</strong>: æ”¹è¡Œï¼ˆ\nï¼‰ã‚’ä½¿ã†ã¨ãƒ‡ãƒ¼ã‚¿ã®å¢ƒç•ŒãŒæ˜ç¢ºã«ãªã‚‹</li>
            </ul>
        </div>
        
        <div class="warning">
            <p><strong>âš ï¸ æ³¨æ„äº‹é …:</strong></p>
            <ul>
                <li><strong>ãƒãƒ¼ãƒˆç•ªå·</strong>: 1024ä»¥ä¸Šã‚’ä½¿ç”¨ï¼ˆ1023ä»¥ä¸‹ã¯rootæ¨©é™ãŒå¿…è¦ï¼‰</li>
                <li><strong>ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«</strong>: å¿…è¦ãªãƒãƒ¼ãƒˆã‚’é–‹æ”¾</li>
                <li><strong>ãƒ‡ãƒ¼ã‚¿åŒºåˆ‡ã‚Š</strong>: TCPã¯ã‚¹ãƒˆãƒªãƒ¼ãƒ ãªã®ã§ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å´ã§ãƒ‡ãƒ¼ã‚¿å¢ƒç•Œã‚’ç®¡ç†</li>
                <li><strong>æ¥ç¶šç®¡ç†</strong>: åˆ‡æ–­æ™‚ã®å‡¦ç†ã‚’è€ƒæ…®</li>
            </ul>
        </div>
        
        <h2 id="section9">ğŸ”§ 9. ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°</h2>
        
        <table>
            <tr><th>ç—‡çŠ¶</th><th>åŸå› </th><th>è§£æ±ºæ–¹æ³•</th></tr>
            <tr><td>æ¥ç¶šã§ããªã„</td><td>ãƒãƒ¼ãƒˆãŒä½¿ç”¨ä¸­/ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«</td><td>åˆ¥ã®ãƒãƒ¼ãƒˆä½¿ç”¨ã€FWè¨­å®šç¢ºèª</td></tr>
            <tr><td>ãƒ‡ãƒ¼ã‚¿ãŒé€”ä¸­ã§åˆ‡ã‚Œã‚‹</td><td>ã‚¹ãƒˆãƒªãƒ¼ãƒ åˆ†å‰²ã®å•é¡Œ</td><td>åŒºåˆ‡ã‚Šæ–‡å­—ã‚’è¨­å®šã€é©åˆ‡ãª Output è¨­å®š</td></tr>
            <tr><td>è¿”ä¿¡ãŒå±Šã‹ãªã„</td><td>_session ãŒæ¶ˆãˆã¦ã„ã‚‹</td><td>Reply to TCP ã‚’ä½¿ç”¨ã€msg._session ã‚’ä¿æŒ</td></tr>
            <tr><td>æ–‡å­—åŒ–ã‘</td><td>ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¸ä¸€è‡´</td><td>UTF-8 ã§çµ±ä¸€</td></tr>
            <tr><td>æ¥ç¶šãŒã™ãåˆ‡ã‚Œã‚‹</td><td>ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ</td><td>Keep-alive ã®å®Ÿè£…ã‚’æ¤œè¨</td></tr>
        </table>
        
        <h2 id="section10">ğŸ­ 10. å®Ÿå‹™æ´»ç”¨ä¾‹</h2>
        
        <h3>ã‚±ãƒ¼ã‚¹1: ç”£æ¥­æ©Ÿå™¨ã¨ã®é€šä¿¡</h3>
        <p>PLCï¼ˆãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ–ãƒ«ãƒ­ã‚¸ãƒƒã‚¯ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ï¼‰ã‚„ã‚»ãƒ³ã‚µãƒ¼æ©Ÿå™¨ã¨TCPã§ç›´æ¥é€šä¿¡</p>
        
        <h3>ã‚±ãƒ¼ã‚¹2: Raspberry Pi é–“ã®é€šä¿¡</h3>
        <p>è¤‡æ•°ã®Raspberry Piã§ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’åé›†ã—ã€ä¸­å¤®ã®ã‚µãƒ¼ãƒãƒ¼ã«é€ä¿¡</p>
        
        <h3>ã‚±ãƒ¼ã‚¹3: ãƒ¬ã‚¬ã‚·ãƒ¼ã‚·ã‚¹ãƒ†ãƒ é€£æº</h3>
        <p>ç‹¬è‡ªãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹å¤ã„ã‚·ã‚¹ãƒ†ãƒ ã¨ã®é€£æº</p>
        
        <h3>ã‚±ãƒ¼ã‚¹4: ã‚«ã‚¹ã‚¿ãƒ ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã®å®Ÿè£…</h3>
        <p>ç‰¹å®šã®è¦ä»¶ã«åˆã‚ã›ãŸç‹¬è‡ªã®é€šä¿¡ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’å®Ÿè£…</p>
        
        <p style="margin-top: 40px;"><a href="https://nodered.org/docs/user-guide/nodes#tcp" target="_blank">ğŸ“š Node-RED å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ - TCP</a></p>
    </div>
    
    <script>
        document.querySelectorAll('.flow-json').forEach(function(block) {
            var btn = document.createElement('button');
            btn.className = 'copy-btn';
            btn.textContent = 'ã‚³ãƒ”ãƒ¼';
            btn.onclick = function() {
                navigator.clipboard.writeText(block.textContent).then(function() {
                    btn.textContent = 'ã‚³ãƒ”ãƒ¼å®Œäº†!';
                    setTimeout(function() { btn.textContent = 'ã‚³ãƒ”ãƒ¼'; }, 2000);
                });
            };
            block.style.position = 'relative';
            block.appendChild(btn);
        });
    </script>
    <!-- ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ›ãƒ¼ãƒ ãƒœã‚¿ãƒ³ -->
    <a href="index.html" style="position: fixed; bottom: 20px; right: 20px; width: 56px; height: 56px; background: linear-gradient(135deg, #42b883 0%, #35495e 100%); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; text-decoration: none; font-size: 24px; box-shadow: 0 4px 12px rgba(0,0,0,0.3); z-index: 1000; transition: transform 0.3s, box-shadow 0.3s;" onmouseover="this.style.transform='scale(1.1)'; this.style.boxShadow='0 6px 16px rgba(0,0,0,0.4)';" onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.3)';" title="ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã¸">ğŸ </a>
</body>
</html>

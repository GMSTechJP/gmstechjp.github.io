<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Node-RED Write File / Read File ãƒãƒ¼ãƒ‰ã‚¬ã‚¤ãƒ‰</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.8; max-width: 1000px; margin: 0 auto; padding: 20px; background-color: #f5f5f5; color: #333; }
        h1 { color: #b92d5d; border-bottom: 3px solid #b92d5d; padding-bottom: 10px; }
        h2 { color: #d33682; margin-top: 40px; border-left: 5px solid #d33682; padding-left: 15px; }
        h3 { color: #555; margin-top: 25px; }
        .container { background-color: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 20px; }
        .node-example { background-color: #2d3133; padding: 20px; border-radius: 5px; margin: 20px 0; color: white; font-family: 'Courier New', monospace; display: flex; align-items: center; flex-wrap: wrap; gap: 5px; }
        .node { display: inline-block; padding: 8px 15px; border-radius: 4px; margin: 5px; font-weight: bold; font-size: 14px; }
        .node-inject { background-color: #3fadb5; color: white; }
        .node-debug { background-color: #87a48d; color: white; }
        .node-function { background-color: #e8a658; color: white; }
        .node-file { background-color: #d4a0a0; color: #333; }
        .node-file-in { background-color: #d4a0a0; color: #333; }
        .node-template { background-color: #d4b8a0; color: #333; }
        .node-catch { background-color: #e8967a; color: white; }
        .arrow { color: #999; font-size: 20px; margin: 0 10px; }
        .important { background-color: #fce4ec; border-left: 4px solid #b92d5d; padding: 15px; margin: 20px 0; border-radius: 0 5px 5px 0; }
        .tip { background-color: #e8f5e9; border-left: 4px solid #4caf50; padding: 15px; margin: 20px 0; border-radius: 0 5px 5px 0; }
        .warning { background-color: #fff3e0; border-left: 4px solid #ff9800; padding: 15px; margin: 20px 0; border-radius: 0 5px 5px 0; }
        .code-block { background-color: #2d3133; color: #f8f8f2; padding: 15px; border-radius: 5px; margin: 15px 0; overflow-x: auto; font-family: 'Courier New', Consolas, monospace; font-size: 14px; white-space: pre; }
        .flow-json { background-color: #1a1a2e; color: #a6e22e; padding: 15px; border-radius: 5px; font-family: 'Courier New', Consolas, monospace; font-size: 12px; overflow-x: auto; white-space: pre; position: relative; max-height: 400px; overflow-y: auto; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
        th { background-color: #b92d5d; color: white; }
        tr:nth-child(even) { background-color: #f9f9f9; }
        .exercise { background-color: #e3f2fd; padding: 20px; border-radius: 8px; margin: 20px 0; border: 2px solid #2196f3; }
        .exercise h3 { color: #1976d2; margin-top: 0; }
        .difficulty { display: inline-block; padding: 3px 10px; border-radius: 12px; font-size: 12px; font-weight: bold; margin-left: 10px; }
        .difficulty-easy { background-color: #c8e6c9; color: #2e7d32; }
        .difficulty-medium { background-color: #fff9c4; color: #f57f17; }
        .difficulty-hard { background-color: #ffcdd2; color: #c62828; }
        details { background-color: #f5f5f5; padding: 10px 15px; border-radius: 5px; margin: 10px 0; }
        details summary { cursor: pointer; font-weight: bold; color: #1976d2; }
        details[open] summary { margin-bottom: 10px; }
        .toc { background-color: #fafafa; border: 1px solid #ddd; border-radius: 8px; padding: 20px; margin: 20px 0; }
        .toc h3 { margin-top: 0; color: #b92d5d; }
        .toc ul { list-style: none; padding-left: 0; }
        .toc li { padding: 5px 0; }
        .toc a { color: #1976d2; text-decoration: none; }
        .toc a:hover { text-decoration: underline; }
        .copy-btn { position: absolute; top: 5px; right: 5px; background-color: #666; color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer; font-size: 12px; }
        .copy-btn:hover { background-color: #888; }
        .node-compare { display: flex; gap: 20px; flex-wrap: wrap; margin: 20px 0; }
        .node-card { background: #f9f9f9; border: 1px solid #ddd; border-radius: 8px; padding: 15px; flex: 1; min-width: 280px; }
        .node-card h4 { margin-top: 0; color: #b92d5d; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“ Node-RED Write File / Read File ãƒãƒ¼ãƒ‰ã‚¬ã‚¤ãƒ‰</h1>
        
        <div class="toc">
            <h3>ğŸ“š ç›®æ¬¡</h3>
            <ul>
                <li><a href="#section1">1. æ¦‚è¦</a></li>
                <li><a href="#section2">2. Write Fileï¼ˆæ›¸ãè¾¼ã¿ï¼‰ãƒãƒ¼ãƒ‰</a></li>
                <li><a href="#section3">3. Read Fileï¼ˆèª­ã¿è¾¼ã¿ï¼‰ãƒãƒ¼ãƒ‰</a></li>
                <li><a href="#section4">4. å®Ÿç”¨çš„ãªä½¿ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³</a></li>                <li><a href="#section5">5. æ¼”ç¿’å•é¡Œ</a></li>
                <li><a href="#section6">6. ã¾ã¨ã‚</a></li>
                <li><a href="#section7">7. å®Ÿå‹™æ´»ç”¨ä¾‹</a></li>
            </ul>
        </div>
        
        <h2 id="section1">ğŸ“– 1. æ¦‚è¦</h2>
        
        <p>Node-RED ã«ã¯2ç¨®é¡ã®ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œãƒãƒ¼ãƒ‰ãŒã‚ã‚Šã¾ã™ï¼š</p>
        
        <div class="node-compare">
            <div class="node-card">
                <h4>ğŸ“ Write Fileï¼ˆæ›¸ãè¾¼ã¿ï¼‰</h4>
                <div class="node-example" style="justify-content: center;">
                    <span class="node node-file">Write File</span>
                </div>
                <p><strong>å½¹å‰²:</strong> ãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®æ›¸ãè¾¼ã¿ãƒ»è¿½è¨˜ãƒ»å‰Šé™¤</p>
                <p><strong>ç”¨é€”:</strong></p>
                <ul>
                    <li>ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ</li>
                    <li>ãƒ‡ãƒ¼ã‚¿ã®æ°¸ç¶šåŒ–</li>
                    <li>è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ä¿å­˜</li>
                </ul>
            </div>
            
            <div class="node-card">
                <h4>ğŸ“– Read Fileï¼ˆèª­ã¿è¾¼ã¿ï¼‰</h4>
                <div class="node-example" style="justify-content: center;">
                    <span class="node node-file-in">Read File</span>
                </div>
                <p><strong>å½¹å‰²:</strong> ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã®èª­ã¿è¾¼ã¿</p>
                <p><strong>ç”¨é€”:</strong></p>
                <ul>
                    <li>è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿</li>
                    <li>ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ã®å‡¦ç†</li>
                    <li>ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®èª­ã¿è¾¼ã¿</li>
                </ul>
            </div>
        </div>
        
        <p>ğŸ“‚ <strong>ãƒ•ã‚¡ã‚¤ãƒ«ã‚­ãƒ£ãƒ“ãƒãƒƒãƒˆã«ä¾‹ãˆã‚‹ã¨</strong>ï¼šWrite File ãƒãƒ¼ãƒ‰ã¯æ›¸é¡ã‚’ã‚­ãƒ£ãƒ“ãƒãƒƒãƒˆã«å…¥ã‚Œã‚‹ä½œæ¥­ã€Read File ãƒãƒ¼ãƒ‰ã¯ã‚­ãƒ£ãƒ“ãƒãƒƒãƒˆã‹ã‚‰æ›¸é¡ã‚’å–ã‚Šå‡ºã™ä½œæ¥­ã§ã™ã€‚</p>
        
        <h2 id="section2">âš™ï¸ 2. Write Fileï¼ˆæ›¸ãè¾¼ã¿ï¼‰ãƒãƒ¼ãƒ‰</h2>
        
        <h3>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£</h3>
        <table>
            <tr><th>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£</th><th>èª¬æ˜</th><th>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ</th></tr>
            <tr><td><strong>ãƒ•ã‚¡ã‚¤ãƒ«å</strong></td><td>æ›¸ãè¾¼ã¿å…ˆãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹</td><td>ï¼ˆç©ºï¼‰</td></tr>
            <tr><td><strong>å‹•ä½œ</strong></td><td>æ›¸ãè¾¼ã¿å‹•ä½œã®ç¨®é¡</td><td>append to file</td></tr>
            <tr><td><strong>ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å…¥åŠ›ã®ãŸã³ã«æ”¹è¡Œã‚’è¿½åŠ </strong></td><td>æœ«å°¾ã«æ”¹è¡Œã‚’è¿½åŠ </td><td>true</td></tr>
            <tr><td><strong>ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒå­˜åœ¨ã—ãªã„å ´åˆã¯ä½œæˆ</strong></td><td>ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒãªã‘ã‚Œã°ä½œæˆ</td><td>false</td></tr>
            <tr><td><strong>æ–‡å­—ã‚³ãƒ¼ãƒ‰</strong></td><td>æ–‡å­—ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°</td><td>default</td></tr>
        </table>
        
        <h3>Actionï¼ˆå‹•ä½œï¼‰ã‚ªãƒ—ã‚·ãƒ§ãƒ³</h3>
        <table>
            <tr><th>ã‚ªãƒ—ã‚·ãƒ§ãƒ³</th><th>èª¬æ˜</th><th>ç”¨é€”</th></tr>
            <tr><td><strong>append to file</strong></td><td>ãƒ•ã‚¡ã‚¤ãƒ«æœ«å°¾ã«è¿½è¨˜</td><td>ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã€æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿</td></tr>
            <tr><td><strong>overwrite file</strong></td><td>ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¸Šæ›¸ã</td><td>è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã€çŠ¶æ…‹ä¿å­˜</td></tr>
            <tr><td><strong>delete file</strong></td><td>ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤</td><td>ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã®å‰Šé™¤</td></tr>
        </table>
        
        <h3>å‹•çš„ãªãƒ•ã‚¡ã‚¤ãƒ«å</h3>
        <p>Filename ã‚’ç©ºã«ã—ã¦ã€<code>msg.filename</code> ã§ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’æŒ‡å®šã§ãã¾ã™ã€‚</p>
        <div class="code-block">// Function ãƒãƒ¼ãƒ‰ã§å‹•çš„ã«ãƒ•ã‚¡ã‚¤ãƒ«åã‚’è¨­å®š
msg.filename = "/home/pi/logs/sensor_" + new Date().toISOString().slice(0,10) + ".log";
msg.payload = "ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿: " + msg.payload;
return msg;</div>
        
        <h2 id="section3">ğŸ“– 3. Read Fileï¼ˆèª­ã¿è¾¼ã¿ï¼‰ãƒãƒ¼ãƒ‰</h2>
        
        <h3>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£</h3>
        <table>
            <tr><th>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£</th><th>èª¬æ˜</th><th>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ</th></tr>
            <tr><td><strong>ãƒ•ã‚¡ã‚¤ãƒ«å</strong></td><td>èª­ã¿è¾¼ã‚€ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹</td><td>ï¼ˆç©ºï¼‰</td></tr>
            <tr><td><strong>å‡ºåŠ›å½¢å¼</strong></td><td>å‡ºåŠ›å½¢å¼</td><td>a single utf8 string</td></tr>
            <tr><td><strong>æ–‡å­—ã‚³ãƒ¼ãƒ‰</strong></td><td>æ–‡å­—ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°</td><td>utf8</td></tr>
        </table>
        
        <h3>Outputï¼ˆå‡ºåŠ›å½¢å¼ï¼‰ã‚ªãƒ—ã‚·ãƒ§ãƒ³</h3>
        <table>
            <tr><th>ã‚ªãƒ—ã‚·ãƒ§ãƒ³</th><th>èª¬æ˜</th><th>ç”¨é€”</th></tr>
            <tr><td><strong>a single utf8 string</strong></td><td>ãƒ•ã‚¡ã‚¤ãƒ«å…¨ä½“ã‚’æ–‡å­—åˆ—ã§</td><td>è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ</td></tr>
            <tr><td><strong>a single Buffer object</strong></td><td>ãƒ•ã‚¡ã‚¤ãƒ«å…¨ä½“ã‚’Bufferã§</td><td>ãƒã‚¤ãƒŠãƒªãƒ•ã‚¡ã‚¤ãƒ«ã€ç”»åƒ</td></tr>
            <tr><td><strong>a msg per line</strong></td><td>1è¡Œã”ã¨ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡ºåŠ›</td><td>CSVã®è¡Œå‡¦ç†ã€ãƒ­ã‚°è§£æ</td></tr>
            <tr><td><strong>a single stream</strong></td><td>ã‚¹ãƒˆãƒªãƒ¼ãƒ ã¨ã—ã¦å‡ºåŠ›</td><td>å¤§ããªãƒ•ã‚¡ã‚¤ãƒ«ã®å‡¦ç†</td></tr>
        </table>
        
        <div class="tip">
            <p><strong>ğŸ’¡ ãƒã‚¤ãƒ³ãƒˆ:</strong></p>
            <ul>
                <li><code>msg.filename</code> ã§å‹•çš„ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šå¯èƒ½</li>
                <li>å¤§ããªãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€Œa msg per lineã€ã¾ãŸã¯ã€Œstreamã€ã‚’ä½¿ç”¨</li>
                <li>èª­ã¿è¾¼ã¿å®Œäº†æ™‚ã« msg ã‚’å‡ºåŠ›</li>
            </ul>
        </div>
        
        <h2 id="section4">ğŸ”§ 4. å®Ÿç”¨çš„ãªä½¿ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³</h2>
        <div class="important">
            <p><strong>ğŸ“¥ ã‚µãƒ³ãƒ—ãƒ«ãƒ•ãƒ­ãƒ¼ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ–¹æ³•:</strong></p>
            <ol>
                <li>ä¸‹ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ•ãƒ­ãƒ¼JSONã‚’ã‚³ãƒ”ãƒ¼</li>
                <li>Node-REDã‚¨ãƒ‡ã‚£ã‚¿ã§ <strong>ãƒ¡ãƒ‹ãƒ¥ãƒ¼ â†’ èª­ã¿è¾¼ã¿</strong> ã‚’é¸æŠ</li>
                <li>JSONã‚’ãƒšãƒ¼ã‚¹ãƒˆã—ã¦ã€Œèª­ã¿è¾¼ã¿ã€ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
            </ol>
            <p>ã“ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ•ãƒ­ãƒ¼ã«ã¯ã€ä»¥ä¸‹ã§èª¬æ˜ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å®Ÿä¾‹ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚</p>
        </div>

        
        <details>
            <summary>ğŸ“¥ ã‚µãƒ³ãƒ—ãƒ«ãƒ•ãƒ­ãƒ¼JSONï¼ˆã‚¯ãƒªãƒƒã‚¯ã§å±•é–‹ï¼‰</summary>
            <div class="flow-json">[
    {
        "id": "file_sample_tab",
        "type": "tab",
        "label": "File ã‚µãƒ³ãƒ—ãƒ«",
        "disabled": false,
        "info": ""
    },
    {
        "id": "file_comment1",
        "type": "comment",
        "z": "file_sample_tab",
        "name": "â”â”â” ãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®æ›¸ãè¾¼ã¿ï¼ˆè¿½è¨˜ï¼‰ â”â”â”",
        "info": "",
        "x": 200,
        "y": 40,
        "wires": []
    },
    {
        "id": "file_inject1",
        "type": "inject",
        "z": "file_sample_tab",
        "name": "ãƒ­ã‚°è¿½è¨˜",
        "props": [{"p": "payload"}],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "ã‚»ãƒ³ã‚µãƒ¼å€¤: 25.5â„ƒ",
        "payloadType": "str",
        "x": 140,
        "y": 100,
        "wires": [["file_func_timestamp"]]
    },
    {
        "id": "file_func_timestamp",
        "type": "function",
        "z": "file_sample_tab",
        "name": "ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—è¿½åŠ ",
        "func": "var now = new Date().toISOString();\nmsg.payload = now + \" - \" + msg.payload;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 100,
        "wires": [["file_write_append"]]
    },
    {
        "id": "file_write_append",
        "type": "file",
        "z": "file_sample_tab",
        "name": "ãƒ­ã‚°è¿½è¨˜",
        "filename": "/tmp/nodered_sample.log",
        "filenameType": "str",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "utf8",
        "x": 520,
        "y": 100,
        "wires": [["file_debug1"]]
    },
    {
        "id": "file_debug1",
        "type": "debug",
        "z": "file_sample_tab",
        "name": "æ›¸ãè¾¼ã¿å®Œäº†",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "\"æ›¸ãè¾¼ã¿å®Œäº†\"",
        "statusType": "str",
        "x": 690,
        "y": 100,
        "wires": []
    },
    {
        "id": "file_comment2",
        "type": "comment",
        "z": "file_sample_tab",
        "name": "â”â”â” ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ â”â”â”",
        "info": "",
        "x": 180,
        "y": 180,
        "wires": []
    },
    {
        "id": "file_inject2",
        "type": "inject",
        "z": "file_sample_tab",
        "name": "ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 160,
        "y": 240,
        "wires": [["file_read"]]
    },
    {
        "id": "file_read",
        "type": "file in",
        "z": "file_sample_tab",
        "name": "ãƒ­ã‚°èª­ã¿è¾¼ã¿",
        "filename": "/tmp/nodered_sample.log",
        "filenameType": "str",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "utf8",
        "allProps": false,
        "x": 350,
        "y": 240,
        "wires": [["file_debug2"]]
    },
    {
        "id": "file_debug2",
        "type": "debug",
        "z": "file_sample_tab",
        "name": "ãƒ•ã‚¡ã‚¤ãƒ«å†…å®¹",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 530,
        "y": 240,
        "wires": []
    },
    {
        "id": "file_comment3",
        "type": "comment",
        "z": "file_sample_tab",
        "name": "â”â”â” ä¸Šæ›¸ãä¿å­˜ â”â”â”",
        "info": "",
        "x": 160,
        "y": 320,
        "wires": []
    },
    {
        "id": "file_inject3",
        "type": "inject",
        "z": "file_sample_tab",
        "name": "è¨­å®šã‚’ä¿å­˜",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 150,
        "y": 380,
        "wires": [["file_func_config"]]
    },
    {
        "id": "file_func_config",
        "type": "function",
        "z": "file_sample_tab",
        "name": "è¨­å®šã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ",
        "func": "msg.payload = JSON.stringify({\n    \"appName\": \"My IoT App\",\n    \"version\": \"1.0.0\",\n    \"settings\": {\n        \"interval\": 5000,\n        \"threshold\": 30\n    },\n    \"updatedAt\": new Date().toISOString()\n}, null, 2);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 380,
        "wires": [["file_write_overwrite"]]
    },
    {
        "id": "file_write_overwrite",
        "type": "file",
        "z": "file_sample_tab",
        "name": "è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜",
        "filename": "/tmp/nodered_config.json",
        "filenameType": "str",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "utf8",
        "x": 530,
        "y": 380,
        "wires": [["file_debug3"]]
    },
    {
        "id": "file_debug3",
        "type": "debug",
        "z": "file_sample_tab",
        "name": "ä¿å­˜å®Œäº†",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "\"è¨­å®šä¿å­˜å®Œäº†\"",
        "statusType": "str",
        "x": 700,
        "y": 380,
        "wires": []
    },
    {
        "id": "file_comment4",
        "type": "comment",
        "z": "file_sample_tab",
        "name": "â”â”â” å‹•çš„ãƒ•ã‚¡ã‚¤ãƒ«åï¼ˆæ—¥ä»˜åˆ¥ãƒ­ã‚°ï¼‰ â”â”â”",
        "info": "",
        "x": 210,
        "y": 460,
        "wires": []
    },
    {
        "id": "file_inject4",
        "type": "inject",
        "z": "file_sample_tab",
        "name": "ã‚¤ãƒ™ãƒ³ãƒˆç™ºç”Ÿ",
        "props": [{"p": "payload"}],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚Œã¾ã—ãŸ",
        "payloadType": "str",
        "x": 150,
        "y": 520,
        "wires": [["file_func_dynamic"]]
    },
    {
        "id": "file_func_dynamic",
        "type": "function",
        "z": "file_sample_tab",
        "name": "æ—¥ä»˜åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«å",
        "func": "var today = new Date().toISOString().slice(0, 10);\nmsg.filename = \"/tmp/events_\" + today + \".log\";\n\nvar timestamp = new Date().toISOString();\nmsg.payload = timestamp + \" | \" + msg.payload;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 520,
        "wires": [["file_write_dynamic"]]
    },
    {
        "id": "file_write_dynamic",
        "type": "file",
        "z": "file_sample_tab",
        "name": "å‹•çš„ãƒ•ã‚¡ã‚¤ãƒ«",
        "filename": "",
        "filenameType": "msg",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "utf8",
        "x": 520,
        "y": 520,
        "wires": [["file_debug4"]]
    },
    {
        "id": "file_debug4",
        "type": "debug",
        "z": "file_sample_tab",
        "name": "ãƒ•ã‚¡ã‚¤ãƒ«åç¢ºèª",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "filename",
        "targetType": "msg",
        "statusVal": "filename",
        "statusType": "msg",
        "x": 700,
        "y": 520,
        "wires": []
    },
    {
        "id": "file_comment5",
        "type": "comment",
        "z": "file_sample_tab",
        "name": "â”â”â” ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚° â”â”â”",
        "info": "",
        "x": 170,
        "y": 600,
        "wires": []
    },
    {
        "id": "file_inject5",
        "type": "inject",
        "z": "file_sample_tab",
        "name": "å­˜åœ¨ã—ãªã„ãƒ•ã‚¡ã‚¤ãƒ«",
        "props": [{"p": "filename", "v": "/nonexistent/path/file.txt", "vt": "str"}],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 170,
        "y": 660,
        "wires": [["file_read_error"]]
    },
    {
        "id": "file_read_error",
        "type": "file in",
        "z": "file_sample_tab",
        "name": "èª­ã¿è¾¼ã¿è©¦è¡Œ",
        "filename": "",
        "filenameType": "msg",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "utf8",
        "allProps": false,
        "x": 360,
        "y": 660,
        "wires": [["file_debug5"]]
    },
    {
        "id": "file_debug5",
        "type": "debug",
        "z": "file_sample_tab",
        "name": "èª­ã¿è¾¼ã¿çµæœ",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 540,
        "y": 660,
        "wires": []
    },
    {
        "id": "file_catch",
        "type": "catch",
        "z": "file_sample_tab",
        "name": "ãƒ•ã‚¡ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼æ•æ‰",
        "scope": ["file_read_error"],
        "uncaught": false,
        "x": 350,
        "y": 720,
        "wires": [["file_debug_error"]]
    },
    {
        "id": "file_debug_error",
        "type": "debug",
        "z": "file_sample_tab",
        "name": "ã‚¨ãƒ©ãƒ¼å†…å®¹",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "error.message",
        "targetType": "msg",
        "statusVal": "error.message",
        "statusType": "msg",
        "x": 530,
        "y": 720,
        "wires": []
    }
]</div>
        </details>
        
        
        <h3>ä½¿ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³</h3>
        
        <h3>ãƒ‘ã‚¿ãƒ¼ãƒ³1: ãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®æ›¸ãè¾¼ã¿ï¼ˆè¿½è¨˜ï¼‰</h3>
        <p>ã‚µãƒ³ãƒ—ãƒ«ãƒ•ãƒ­ãƒ¼ã®ã€Œãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®æ›¸ãè¾¼ã¿ï¼ˆè¿½è¨˜ï¼‰ã€ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p>
        <div class="node-example">
            <span class="node node-inject">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</span>
            <span class="arrow">â†’</span>
            <span class="node node-file">è¿½è¨˜</span>
            <span class="arrow">â†’</span>
            <span class="node node-debug">å®Œäº†</span>
        </div>
        <p><strong>è¨­å®š:</strong> Action: append to file, Add newline: âœ“</p>
        
        <h3>ãƒ‘ã‚¿ãƒ¼ãƒ³2: ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿</h3>
        <p>ã‚µãƒ³ãƒ—ãƒ«ãƒ•ãƒ­ãƒ¼ã®ã€Œãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã€ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p>
        <div class="node-example">
            <span class="node node-inject">èª­ã¿è¾¼ã¿</span>
            <span class="arrow">â†’</span>
            <span class="node node-file-in">Read File</span>
            <span class="arrow">â†’</span>
            <span class="node node-debug">å†…å®¹è¡¨ç¤º</span>
        </div>
        <p><strong>è¨­å®š:</strong> Output: a single utf8 string</p>
        
        <h3>ãƒ‘ã‚¿ãƒ¼ãƒ³3: ä¸Šæ›¸ãä¿å­˜</h3>
        <p>ã‚µãƒ³ãƒ—ãƒ«ãƒ•ãƒ­ãƒ¼ã®ã€Œä¸Šæ›¸ãä¿å­˜ã€ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p>
        <div class="node-example">
            <span class="node node-inject">æ–°ãƒ‡ãƒ¼ã‚¿</span>
            <span class="arrow">â†’</span>
            <span class="node node-file">ä¸Šæ›¸ã</span>
            <span class="arrow">â†’</span>
            <span class="node node-debug">ä¿å­˜å®Œäº†</span>
        </div>
        <p><strong>è¨­å®š:</strong> Action: overwrite fileï¼ˆæ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç½®ãæ›ãˆï¼‰</p>
        
        <h3>ãƒ‘ã‚¿ãƒ¼ãƒ³4: å‹•çš„ãƒ•ã‚¡ã‚¤ãƒ«åï¼ˆæ—¥ä»˜åˆ¥ãƒ­ã‚°ï¼‰</h3>
        <p>ã‚µãƒ³ãƒ—ãƒ«ãƒ•ãƒ­ãƒ¼ã®ã€Œå‹•çš„ãƒ•ã‚¡ã‚¤ãƒ«åï¼ˆæ—¥ä»˜åˆ¥ãƒ­ã‚°ï¼‰ã€ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p>
        <div class="node-example">
            <span class="node node-inject">ãƒ‡ãƒ¼ã‚¿</span>
            <span class="arrow">â†’</span>
            <span class="node node-function">æ—¥ä»˜ã§ãƒ•ã‚¡ã‚¤ãƒ«åç”Ÿæˆ</span>
            <span class="arrow">â†’</span>
            <span class="node node-file">å‹•çš„ãƒ•ã‚¡ã‚¤ãƒ«</span>
        </div>
        <p><strong>è¨­å®š:</strong> Filename: ç©ºï¼ˆmsg.filename ã§æŒ‡å®šï¼‰</p>
        
        <h3>ãƒ‘ã‚¿ãƒ¼ãƒ³5: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</h3>
        <p>ã‚µãƒ³ãƒ—ãƒ«ãƒ•ãƒ­ãƒ¼ã®ã€Œã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã€ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p>
        <div class="node-example">
            <span class="node node-file-in">èª­ã¿è¾¼ã¿è©¦è¡Œ</span>
            <span class="arrow">â†’</span>
            <span class="node node-debug">æˆåŠŸæ™‚</span>
            <span style="margin: 0 10px;">ï½œ</span>
            <span class="node node-catch">Catch</span>
            <span class="arrow">â†’</span>
            <span class="node node-debug">ã‚¨ãƒ©ãƒ¼æ™‚</span>
        </div>
        <p><strong>ãƒã‚¤ãƒ³ãƒˆ:</strong> Catch ãƒãƒ¼ãƒ‰ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ï¼ˆå­˜åœ¨ã—ãªã„ã€æ¨©é™ãªã—ç­‰ï¼‰ã‚’ã‚­ãƒ£ãƒƒãƒ</p>
        
        <h2 id="section5">ğŸ“ 5. æ¼”ç¿’å•é¡Œ</h2>
        
        <div class="exercise">
            <h3>æ¼”ç¿’1: åŸºæœ¬çš„ãªãƒ­ã‚°å‡ºåŠ› <span class="difficulty difficulty-easy">åˆç´š</span></h3>
            <p><strong>ğŸ“‹ èª²é¡Œ:</strong> Inject ãƒãƒ¼ãƒ‰ã®ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ãŸã³ã«ã€ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ä»˜ãã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã«è¿½è¨˜ã—ã¦ãã ã•ã„ã€‚</p>
            <p><strong>âœ… æˆåŠŸã®æ¡ä»¶:</strong></p>
            <ul>
                <li>Inject ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ãŸã³ã« <code>/tmp/exercise1.log</code> ã«ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ä»˜ãã®è¡ŒãŒè¿½è¨˜ã•ã‚Œã‚‹</li>
                <li><code>cat /tmp/exercise1.log</code> ã‚’å®Ÿè¡Œã™ã‚‹ã¨è¤‡æ•°è¡Œã®ãƒ­ã‚°ãŒç¢ºèªã§ãã‚‹</li>
                <li>ãƒ‡ãƒãƒƒã‚°ãƒ‘ãƒãƒ«ã«ãƒãƒ¼ãƒ‰ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¨ã—ã¦ã€Œè¿½è¨˜å®Œäº†ã€ãŒè¡¨ç¤ºã•ã‚Œã‚‹</li>
            </ul>
            <details>
                <summary>ğŸ’¡ ãƒ’ãƒ³ãƒˆ</summary>
                <p>File ãƒãƒ¼ãƒ‰ã® Action ã‚’ã€Œappend to fileã€ã«è¨­å®šã—ã€ã€ŒAdd newlineã€ã‚’ã‚ªãƒ³ã«ã—ã¾ã™ã€‚</p>
            </details>
            <details>
                <summary>âœ… è§£ç­”ä¾‹ãƒ•ãƒ­ãƒ¼</summary>
                <div class="flow-json">[
    {"id": "ex1_tab", "type": "tab", "label": "æ¼”ç¿’1"},
    {"id": "ex1_inject", "type": "inject", "z": "ex1_tab", "name": "ãƒ­ã‚°è¿½åŠ ", "props": [{"p": "payload"}], "repeat": "", "crontab": "", "once": false, "onceDelay": 0.1, "topic": "", "payload": "ã‚¤ãƒ™ãƒ³ãƒˆç™ºç”Ÿ", "payloadType": "str", "x": 140, "y": 100, "wires": [["ex1_func"]]},
    {"id": "ex1_func", "type": "function", "z": "ex1_tab", "name": "ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—", "func": "msg.payload = new Date().toISOString() + \" - \" + msg.payload;\nreturn msg;", "outputs": 1, "timeout": 0, "noerr": 0, "initialize": "", "finalize": "", "libs": [], "x": 300, "y": 100, "wires": [["ex1_file"]]},
    {"id": "ex1_file", "type": "file", "z": "ex1_tab", "name": "ãƒ­ã‚°è¿½è¨˜", "filename": "/tmp/exercise1.log", "filenameType": "str", "appendNewline": true, "createDir": true, "overwriteFile": "false", "encoding": "utf8", "x": 460, "y": 100, "wires": [["ex1_debug"]]},
    {"id": "ex1_debug", "type": "debug", "z": "ex1_tab", "name": "å®Œäº†", "active": true, "tosidebar": true, "console": false, "tostatus": true, "complete": "payload", "targetType": "msg", "statusVal": "\"è¿½è¨˜å®Œäº†\"", "statusType": "str", "x": 610, "y": 100, "wires": []}
]</div>
            </details>
        </div>
        
        <div class="exercise">
            <h3>æ¼”ç¿’2: ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ <span class="difficulty difficulty-easy">åˆç´š</span></h3>
            <p><strong>ğŸ“‹ èª²é¡Œ:</strong> æ¼”ç¿’1ã§ä½œæˆã—ãŸãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿ã€å†…å®¹ã‚’Debugã«è¡¨ç¤ºã—ã¦ãã ã•ã„ã€‚</p>
            <p><strong>âœ… æˆåŠŸã®æ¡ä»¶:</strong></p>
            <ul>
                <li>Inject ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ <code>/tmp/exercise1.log</code> ã®å…¨å†…å®¹ãŒèª­ã¿è¾¼ã¾ã‚Œã‚‹</li>
                <li>ãƒ‡ãƒãƒƒã‚°ãƒ‘ãƒãƒ«ã«æ–‡å­—åˆ—ã¨ã—ã¦ãƒ­ã‚°ã®å…¨è¡ŒãŒè¡¨ç¤ºã•ã‚Œã‚‹</li>
                <li>ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã—ãªã„å ´åˆã¯ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒãƒ‡ãƒãƒƒã‚°ãƒ‘ãƒãƒ«ã«è¡¨ç¤ºã•ã‚Œã‚‹</li>
            </ul>
            <details>
                <summary>ğŸ’¡ ãƒ’ãƒ³ãƒˆ</summary>
                <p>File In ãƒãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã—ã€Output ã‚’ã€Œa single utf8 stringã€ã«è¨­å®šã—ã¾ã™ã€‚</p>
            </details>
            <details>
                <summary>âœ… è§£ç­”ä¾‹ãƒ•ãƒ­ãƒ¼</summary>
                <div class="flow-json">[
    {"id": "ex2_tab", "type": "tab", "label": "æ¼”ç¿’2"},
    {"id": "ex2_inject", "type": "inject", "z": "ex2_tab", "name": "èª­ã¿è¾¼ã¿", "props": [], "repeat": "", "crontab": "", "once": false, "onceDelay": 0.1, "topic": "", "x": 140, "y": 100, "wires": [["ex2_file_in"]]},
    {"id": "ex2_file_in", "type": "file in", "z": "ex2_tab", "name": "ãƒ­ã‚°èª­ã¿è¾¼ã¿", "filename": "/tmp/exercise1.log", "filenameType": "str", "format": "utf8", "chunk": false, "sendError": false, "encoding": "utf8", "allProps": false, "x": 300, "y": 100, "wires": [["ex2_debug"]]},
    {"id": "ex2_debug", "type": "debug", "z": "ex2_tab", "name": "å†…å®¹è¡¨ç¤º", "active": true, "tosidebar": true, "console": false, "tostatus": false, "complete": "payload", "targetType": "msg", "x": 470, "y": 100, "wires": []}
]</div>
            </details>
        </div>
        
        <div class="exercise">
            <h3>æ¼”ç¿’3: JSONè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ä¿å­˜ã¨èª­ã¿è¾¼ã¿ <span class="difficulty difficulty-medium">ä¸­ç´š</span></h3>
            <p><strong>ğŸ“‹ èª²é¡Œ:</strong> è¨­å®šã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’JSONãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ä¿å­˜ã—ã€åˆ¥ã®ãƒ•ãƒ­ãƒ¼ã§èª­ã¿è¾¼ã‚“ã§ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚</p>
            <p><strong>âœ… æˆåŠŸã®æ¡ä»¶:</strong></p>
            <ul>
                <li>ã€Œè¨­å®šä¿å­˜ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ <code>/tmp/config.json</code> ãŒä½œæˆã•ã‚Œã€ä¸­èº«ãŒæœ‰åŠ¹ãªJSONå½¢å¼ã§ã‚ã‚‹</li>
                <li>ã€Œè¨­å®šèª­è¾¼ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ãƒ‡ãƒãƒƒã‚°ãƒ‘ãƒãƒ«ã«JavaScriptã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦è¨­å®šãŒè¡¨ç¤ºã•ã‚Œã‚‹</li>
                <li>ãƒãƒ¼ãƒ‰ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã« server ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å€¤ï¼ˆä¾‹: "localhost"ï¼‰ãŒè¡¨ç¤ºã•ã‚Œã‚‹</li>
            </ul>
            <details>
                <summary>ğŸ’¡ ãƒ’ãƒ³ãƒˆ</summary>
                <p>ä¿å­˜æ™‚: JSON.stringify() ã§æ–‡å­—åˆ—åŒ–ã€èª­ã¿è¾¼ã¿æ™‚: JSON ãƒãƒ¼ãƒ‰ã§è§£æ</p>
            </details>
            <details>
                <summary>âœ… è§£ç­”ä¾‹ãƒ•ãƒ­ãƒ¼</summary>
                <div class="flow-json">[
    {"id": "ex3_tab", "type": "tab", "label": "æ¼”ç¿’3"},
    {"id": "ex3_inject1", "type": "inject", "z": "ex3_tab", "name": "è¨­å®šä¿å­˜", "props": [], "repeat": "", "crontab": "", "once": false, "onceDelay": 0.1, "topic": "", "x": 140, "y": 80, "wires": [["ex3_func1"]]},
    {"id": "ex3_func1", "type": "function", "z": "ex3_tab", "name": "è¨­å®šä½œæˆ", "func": "msg.payload = JSON.stringify({\n    server: \"localhost\",\n    port: 8080,\n    debug: true\n}, null, 2);\nreturn msg;", "outputs": 1, "timeout": 0, "noerr": 0, "initialize": "", "finalize": "", "libs": [], "x": 290, "y": 80, "wires": [["ex3_file_write"]]},
    {"id": "ex3_file_write", "type": "file", "z": "ex3_tab", "name": "JSONä¿å­˜", "filename": "/tmp/config.json", "filenameType": "str", "appendNewline": false, "createDir": true, "overwriteFile": "true", "encoding": "utf8", "x": 450, "y": 80, "wires": [["ex3_debug1"]]},
    {"id": "ex3_debug1", "type": "debug", "z": "ex3_tab", "name": "ä¿å­˜å®Œäº†", "active": true, "tosidebar": true, "console": false, "tostatus": true, "complete": "payload", "targetType": "msg", "statusVal": "\"ä¿å­˜å®Œäº†\"", "statusType": "str", "x": 620, "y": 80, "wires": []},
    {"id": "ex3_inject2", "type": "inject", "z": "ex3_tab", "name": "è¨­å®šèª­è¾¼", "props": [], "repeat": "", "crontab": "", "once": false, "onceDelay": 0.1, "topic": "", "x": 140, "y": 160, "wires": [["ex3_file_read"]]},
    {"id": "ex3_file_read", "type": "file in", "z": "ex3_tab", "name": "JSONèª­è¾¼", "filename": "/tmp/config.json", "filenameType": "str", "format": "utf8", "chunk": false, "sendError": false, "encoding": "utf8", "allProps": false, "x": 290, "y": 160, "wires": [["ex3_json"]]},
    {"id": "ex3_json", "type": "json", "z": "ex3_tab", "name": "JSONè§£æ", "property": "payload", "action": "", "pretty": false, "x": 450, "y": 160, "wires": [["ex3_debug2"]]},
    {"id": "ex3_debug2", "type": "debug", "z": "ex3_tab", "name": "è¨­å®šã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ", "active": true, "tosidebar": true, "console": false, "tostatus": true, "complete": "payload", "targetType": "msg", "statusVal": "payload.server", "statusType": "msg", "x": 630, "y": 160, "wires": []}
]</div>
            </details>
        </div>
        
        <div class="exercise">
            <h3>æ¼”ç¿’4: æ—¥ä»˜åˆ¥ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚° <span class="difficulty difficulty-hard">ä¸Šç´š</span></h3>
            <p><strong>ğŸ“‹ èª²é¡Œ:</strong> ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’æ—¥ä»˜åˆ¥ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã—ã€7æ—¥ä»¥ä¸Šå‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è‡ªå‹•å‰Šé™¤ã™ã‚‹ä»•çµ„ã¿ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚</p>
            <p><strong>âœ… æˆåŠŸã®æ¡ä»¶:</strong></p>
            <ul>
                <li>ã€Œã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ <code>/tmp/sensor_YYYY-MM-DD.log</code> å½¢å¼ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ãƒ‡ãƒ¼ã‚¿ãŒè¿½è¨˜ã•ã‚Œã‚‹</li>
                <li>ãƒãƒ¼ãƒ‰ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã«ç¾åœ¨ã®ä¿å­˜å…ˆãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ãŒè¡¨ç¤ºã•ã‚Œã‚‹</li>
                <li>ã€Œå¤ã„ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨7æ—¥å‰ã®æ—¥ä»˜ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒå‰Šé™¤ï¼ˆã¾ãŸã¯å‰Šé™¤è©¦è¡Œï¼‰ã•ã‚Œã‚‹</li>
                <li>æ¯å›ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ãŸã³ã«ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ä»˜ãã®ãƒ‡ãƒ¼ã‚¿ãŒåŒã˜æ—¥ä»˜ãƒ•ã‚¡ã‚¤ãƒ«ã«è“„ç©ã•ã‚Œã‚‹</li>
            </ul>
            <details>
                <summary>ğŸ’¡ ãƒ’ãƒ³ãƒˆ</summary>
                <p>msg.filename ã§å‹•çš„ã«ãƒ•ã‚¡ã‚¤ãƒ«åã‚’æŒ‡å®šã€‚å‰Šé™¤ã¯ Action: delete file ã‚’ä½¿ç”¨ã€‚</p>
            </details>
            <details>
                <summary>âœ… è§£ç­”ä¾‹ãƒ•ãƒ­ãƒ¼</summary>
                <div class="flow-json">[
    {"id": "ex4_tab", "type": "tab", "label": "æ¼”ç¿’4"},
    {"id": "ex4_inject", "type": "inject", "z": "ex4_tab", "name": "ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿", "props": [{"p": "payload"}], "repeat": "", "crontab": "", "once": false, "onceDelay": 0.1, "topic": "", "payload": "25.5", "payloadType": "num", "x": 160, "y": 80, "wires": [["ex4_func_write"]]},
    {"id": "ex4_func_write", "type": "function", "z": "ex4_tab", "name": "æ—¥ä»˜åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«å", "func": "var today = new Date().toISOString().slice(0,10);\nmsg.filename = \"/tmp/sensor_\" + today + \".log\";\nmsg.payload = new Date().toISOString() + \",\" + msg.payload;\nreturn msg;", "outputs": 1, "timeout": 0, "noerr": 0, "initialize": "", "finalize": "", "libs": [], "x": 350, "y": 80, "wires": [["ex4_file_write"]]},
    {"id": "ex4_file_write", "type": "file", "z": "ex4_tab", "name": "ãƒ­ã‚°è¿½è¨˜", "filename": "", "filenameType": "msg", "appendNewline": true, "createDir": true, "overwriteFile": "false", "encoding": "utf8", "x": 530, "y": 80, "wires": [["ex4_debug1"]]},
    {"id": "ex4_debug1", "type": "debug", "z": "ex4_tab", "name": "ä¿å­˜å…ˆ", "active": true, "tosidebar": true, "console": false, "tostatus": true, "complete": "filename", "targetType": "msg", "statusVal": "filename", "statusType": "msg", "x": 690, "y": 80, "wires": []},
    {"id": "ex4_inject_del", "type": "inject", "z": "ex4_tab", "name": "å¤ã„ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤", "props": [], "repeat": "", "crontab": "", "once": false, "onceDelay": 0.1, "topic": "", "x": 170, "y": 160, "wires": [["ex4_func_del"]]},
    {"id": "ex4_func_del", "type": "function", "z": "ex4_tab", "name": "7æ—¥å‰ã®ãƒ•ã‚¡ã‚¤ãƒ«å", "func": "var d = new Date();\nd.setDate(d.getDate() - 7);\nvar oldDate = d.toISOString().slice(0,10);\nmsg.filename = \"/tmp/sensor_\" + oldDate + \".log\";\nreturn msg;", "outputs": 1, "timeout": 0, "noerr": 0, "initialize": "", "finalize": "", "libs": [], "x": 370, "y": 160, "wires": [["ex4_file_del"]]},
    {"id": "ex4_file_del", "type": "file", "z": "ex4_tab", "name": "ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤", "filename": "", "filenameType": "msg", "appendNewline": true, "createDir": false, "overwriteFile": "delete", "encoding": "utf8", "x": 550, "y": 160, "wires": [["ex4_debug2"]]},
    {"id": "ex4_debug2", "type": "debug", "z": "ex4_tab", "name": "å‰Šé™¤çµæœ", "active": true, "tosidebar": true, "console": false, "tostatus": true, "complete": "filename", "targetType": "msg", "statusVal": "\"å‰Šé™¤è©¦è¡Œ\"", "statusType": "str", "x": 700, "y": 160, "wires": []}
]</div>
            </details>
        </div>
        
        <h2 id="section6">âœ… 6. ã¾ã¨ã‚</h2>
        
        <div class="important">
            <p><strong>ğŸ¯ é‡è¦ãƒã‚¤ãƒ³ãƒˆ:</strong></p>
            <ul>
                <li><strong>Write File</strong>: æ›¸ãè¾¼ã¿ãƒ»è¿½è¨˜ãƒ»å‰Šé™¤ï¼ˆappend / overwrite / deleteï¼‰</li>
                <li><strong>Read File</strong>: èª­ã¿è¾¼ã¿ï¼ˆæ–‡å­—åˆ— / Buffer / è¡Œã”ã¨ / ã‚¹ãƒˆãƒªãƒ¼ãƒ ï¼‰</li>
                <li><code>msg.filename</code> ã§å‹•çš„ã«ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’æŒ‡å®šå¯èƒ½</li>
                <li>ã€ŒCreate directoryã€ã§è¦ªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’è‡ªå‹•ä½œæˆ</li>
            </ul>
        </div>
        
        <div class="warning">
            <p><strong>âš ï¸ æ³¨æ„äº‹é …:</strong></p>
            <ul>
                <li>ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã®æ¨©é™ã«æ³¨æ„ï¼ˆèª­ã¿æ›¸ãæ¨©é™ãŒå¿…è¦ï¼‰</li>
                <li>å¤§ããªãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€Œa msg per lineã€ã¾ãŸã¯ã€Œstreamã€ã‚’ä½¿ç”¨</li>
                <li>é‡è¦ãªãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œã«ã¯ Catch ãƒãƒ¼ãƒ‰ã§ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</li>
                <li>ç›¸å¯¾ãƒ‘ã‚¹ã¯Node-REDã®ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåŸºæº–</li>
            </ul>
        </div>
        
        <h2 id="section7">ğŸ­ 7. å®Ÿå‹™æ´»ç”¨ä¾‹</h2>
        
        <h3>ã‚±ãƒ¼ã‚¹1: ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã®ãƒ­ã‚°è¨˜éŒ²</h3>
        <p>IoTã‚»ãƒ³ã‚µãƒ¼ã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿ã‚’æ™‚ç³»åˆ—ã§ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã«è¨˜éŒ²ã€‚æ—¥ä»˜åˆ¥ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã€‚</p>
        
        <h3>ã‚±ãƒ¼ã‚¹2: è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ç®¡ç†</h3>
        <p>JSON/YAMLå½¢å¼ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿ã€ãƒ•ãƒ­ãƒ¼èµ·å‹•æ™‚ã«è¨­å®šã‚’é©ç”¨ã€‚</p>
        
        <h3>ã‚±ãƒ¼ã‚¹3: CSVãƒ‡ãƒ¼ã‚¿ã®ãƒãƒƒãƒå‡¦ç†</h3>
        <p>CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’1è¡Œãšã¤èª­ã¿è¾¼ã¿ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¸ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆå‡¦ç†ã€‚</p>
        
        <h3>ã‚±ãƒ¼ã‚¹4: ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ</h3>
        <p>åé›†ã—ãŸãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆã—ã€ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ä¿å­˜ãƒ»ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã€‚</p>
        
        <p style="margin-top: 40px;"><a href="https://nodered.org/docs/" target="_blank">ğŸ“š Node-RED å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a></p>
    </div>
    
    <script>
        document.querySelectorAll('.flow-json').forEach(function(block) {
            var btn = document.createElement('button');
            btn.className = 'copy-btn';
            btn.textContent = 'ã‚³ãƒ”ãƒ¼';
            btn.onclick = function() {
                navigator.clipboard.writeText(block.textContent).then(function() {
                    btn.textContent = 'ã‚³ãƒ”ãƒ¼å®Œäº†!';
                    setTimeout(function() { btn.textContent = 'ã‚³ãƒ”ãƒ¼'; }, 2000);
                });
            };
            block.style.position = 'relative';
            block.appendChild(btn);
        });
    </script>
    <!-- ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ›ãƒ¼ãƒ ãƒœã‚¿ãƒ³ -->
    <a href="index.html" style="position: fixed; bottom: 20px; right: 20px; width: 56px; height: 56px; background: linear-gradient(135deg, #42b883 0%, #35495e 100%); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; text-decoration: none; font-size: 24px; box-shadow: 0 4px 12px rgba(0,0,0,0.3); z-index: 1000; transition: transform 0.3s, box-shadow 0.3s;" onmouseover="this.style.transform='scale(1.1)'; this.style.boxShadow='0 6px 16px rgba(0,0,0,0.4)';" onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.3)';" title="ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã¸">ğŸ </a>
</body>
</html>

<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Node-RED Watch ãƒãƒ¼ãƒ‰ã‚¬ã‚¤ãƒ‰</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.8; max-width: 1000px; margin: 0 auto; padding: 20px; background-color: #f5f5f5; color: #333; }
        h1 { color: #7b1fa2; border-bottom: 3px solid #7b1fa2; padding-bottom: 10px; }
        h2 { color: #9c27b0; margin-top: 30px; border-left: 5px solid #9c27b0; padding-left: 15px; }
        h3 { color: #555; margin-top: 25px; }
        .container { background-color: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 20px; }
        .node-example { background-color: #2d3133; padding: 20px; border-radius: 5px; margin: 20px 0; color: white; font-family: 'Courier New', monospace; }
        .node { display: inline-block; padding: 8px 15px; border-radius: 4px; margin: 5px; font-weight: bold; font-size: 14px; }
        .node-inject { background-color: #3fadb5; color: white; }
        .node-debug { background-color: #87a48d; color: white; }
        .node-function { background-color: #e8a658; color: white; }
        .node-watch { background-color: #d4a0a0; color: #333; }
        .node-file { background-color: #d4a0a0; color: #333; }
        .node-file-in { background-color: #d4a0a0; color: #333; }
        .node-switch { background-color: #e2d96e; color: #333; }
        .node-change { background-color: #e7a070; color: white; }
        .node-json { background-color: #e8c28b; color: #333; }
        .node-delay { background-color: #e8a6bf; color: #333; }
        .arrow { color: #999; font-size: 20px; margin: 0 10px; }
        .important { background-color: #fff3cd; border-left: 4px solid #ffc107; padding: 15px; margin: 15px 0; border-radius: 4px; }
        .tip { background-color: #d1ecf1; border-left: 4px solid #17a2b8; padding: 15px; margin: 15px 0; border-radius: 4px; }
        .warning { background-color: #f8d7da; border-left: 4px solid #dc3545; padding: 15px; margin: 15px 0; border-radius: 4px; }
        .code-block { background-color: #f8f9fa; border: 1px solid #ddd; border-radius: 4px; padding: 15px; margin: 15px 0; overflow-x: auto; font-family: 'Courier New', Consolas, monospace; font-size: 14px; position: relative; white-space: pre-wrap; }
        .flow-json { background-color: #263238; color: #aed581; padding: 15px; padding-top: 40px; border-radius: 5px; overflow-x: auto; font-family: 'Courier New', monospace; font-size: 12px; max-height: 400px; overflow-y: auto; position: relative; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
        th { background-color: #d4a0a0; color: #333; }
        tr:nth-child(even) { background-color: #f9f9f9; }
        .exercise { background-color: #e8f5e9; border: 2px solid #4caf50; border-radius: 8px; padding: 20px; margin: 25px 0; }
        .exercise h3 { color: #2e7d32; margin-top: 0; }
        .difficulty { display: inline-block; padding: 5px 12px; border-radius: 15px; font-size: 12px; font-weight: bold; margin-left: 10px; }
        .difficulty-easy { background-color: #4caf50; color: white; }
        .difficulty-medium { background-color: #ff9800; color: white; }
        .difficulty-hard { background-color: #f44336; color: white; }
        details { margin: 15px 0; }
        summary { cursor: pointer; padding: 10px; background-color: #6c757d; color: white; border-radius: 4px; font-weight: bold; }
        summary:hover { background-color: #5a6268; }
        .copy-button { position: absolute; top: 8px; right: 8px; padding: 6px 12px; background-color: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 12px; }
        .copy-button:hover { background-color: #0056b3; }
        .copy-button.copied { background-color: #28a745; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ‘ï¸ Node-RED Watch ãƒãƒ¼ãƒ‰ã‚¬ã‚¤ãƒ‰</h1>
        
        <p>ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ã€Node-REDã®<strong>Watchãƒãƒ¼ãƒ‰</strong>ã«ã¤ã„ã¦ã€åˆå¿ƒè€…ã®æ–¹ã§ã‚‚ç†è§£ã§ãã‚‹ã‚ˆã†ã«è©³ã—ãèª¬æ˜ã—ã¾ã™ã€‚</p>
        
        <h2>ğŸ“š 1. Watchãƒãƒ¼ãƒ‰ã¨ã¯?</h2>
        
        <h3>ğŸ¤” ã€ŒWatchã€ã£ã¦ä½•?</h3>
        <p>Watchãƒãƒ¼ãƒ‰ã¯ã€<strong>ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®å¤‰æ›´ã‚’ç›£è¦–</strong>ã—ã€å¤‰æ›´ãŒã‚ã£ãŸéš›ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‡ºåŠ›ã™ã‚‹ãƒãƒ¼ãƒ‰ã§ã™ã€‚</p>
        
        <div class="important">
            <p><strong>ğŸ”” è­¦å‚™å“¡ã«ä¾‹ãˆã‚‹ã¨:</strong></p>
            <ul>
                <li>ğŸ‘® <strong>è­¦å‚™å“¡ã‚’é…ç½®</strong> = Watchãƒãƒ¼ãƒ‰ã‚’è¨­å®š</li>
                <li>ğŸ¢ <strong>ç›£è¦–ã‚¨ãƒªã‚¢ã‚’æŒ‡å®š</strong> = ç›£è¦–ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«/ãƒ•ã‚©ãƒ«ãƒ€ã‚’è¨­å®š</li>
                <li>ğŸ“¢ <strong>å¤‰åŒ–ãŒã‚ã‚Œã°å ±å‘Š</strong> = å¤‰æ›´æ¤œçŸ¥æ™‚ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡ºåŠ›</li>
                <li>ğŸ“ <strong>è©³ç´°æƒ…å ±ã‚’è¨˜éŒ²</strong> = ãƒ•ã‚¡ã‚¤ãƒ«åã€ã‚µã‚¤ã‚ºã€ç¨®é¡ã‚’é€šçŸ¥</li>
            </ul>
        </div>
        
        <h3>ğŸ“¦ åŸºæœ¬çš„ãªå‹•ä½œ</h3>
        <div class="node-example">
            <span class="node node-watch">Watch</span>
            <span class="arrow">â†’</span>
            <span class="node node-debug">Debug</span>
        </div>
        
        <p>Watchãƒãƒ¼ãƒ‰ã¯ã€æŒ‡å®šã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’å¸¸æ™‚ç›£è¦–ã—ã€ãƒ•ã‚¡ã‚¤ãƒ«ã®è¿½åŠ ãƒ»å¤‰æ›´ãƒ»å‰Šé™¤ãŒã‚ã‚‹ã¨<strong>è‡ªå‹•çš„ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡</strong>ã—ã¾ã™ã€‚</p>
        
        <div class="tip">
            <p><strong>ğŸ’¡ ä¸»ãªç”¨é€”:</strong></p>
            <ul>
                <li>ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã®æ›´æ–°æ¤œçŸ¥</li>
                <li>FTPã§ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã®å‡¦ç†</li>
                <li>è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®å¤‰æ›´æ¤œçŸ¥ã¨è‡ªå‹•ãƒªãƒ­ãƒ¼ãƒ‰</li>
                <li>ç”»åƒãƒ»å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã®è‡ªå‹•å‡¦ç†</li>
            </ul>
        </div>
        
        <h2>âš™ï¸ 2. Watchãƒãƒ¼ãƒ‰ã®è¨­å®š</h2>
        
        <h3>ğŸ“‹ è¨­å®šé …ç›®</h3>
        <table>
            <tr><th>è¨­å®šé …ç›®</th><th>èª¬æ˜</th><th>ä¾‹</th></tr>
            <tr><td><strong>Files</strong></td><td>ç›£è¦–ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«/ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ãƒ‘ã‚¹ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§è¤‡æ•°å¯ï¼‰</td><td>/home/pi/uploads, /tmp/logs</td></tr>
            <tr><td><strong>Recursive</strong></td><td>ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚‚å†å¸°çš„ã«ç›£è¦–</td><td>true / false</td></tr>
            <tr><td><strong>Name</strong></td><td>ãƒãƒ¼ãƒ‰ã®è¡¨ç¤ºå</td><td>ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ç›£è¦–</td></tr>
        </table>
        
        <h3>ğŸ”§ ãƒ‘ã‚¹æŒ‡å®šã®ãƒ«ãƒ¼ãƒ«</h3>
        <table>
            <tr><th>OS</th><th>ãƒ‘ã‚¹å½¢å¼</th><th>ä¾‹</th></tr>
            <tr><td>Linux / Mac</td><td>ã‚¹ãƒ©ãƒƒã‚·ãƒ¥åŒºåˆ‡ã‚Š</td><td><code>/home/pi/data</code></td></tr>
            <tr><td>Windows</td><td>ãƒ€ãƒ–ãƒ«ãƒãƒƒã‚¯ã‚¹ãƒ©ãƒƒã‚·ãƒ¥</td><td><code>C:\\Users\\data</code></td></tr>
            <tr><td>ã‚¹ãƒšãƒ¼ã‚¹ã‚’å«ã‚€ãƒ‘ã‚¹</td><td>ãƒ€ãƒ–ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆã§å›²ã‚€</td><td><code>"/home/pi/my folder"</code></td></tr>
        </table>
        
        <h3>ğŸ“¤ å‡ºåŠ›ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</h3>
        <p>ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å¤‰æ›´ãŒã‚ã‚‹ã¨ã€ä»¥ä¸‹ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æŒã¤ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå‡ºåŠ›ã•ã‚Œã¾ã™ï¼š</p>
        <table>
            <tr><th>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£</th><th>èª¬æ˜</th><th>ä¾‹</th></tr>
            <tr><td><strong>msg.payload</strong></td><td>å¤‰æ›´ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ•ãƒ«ãƒ‘ã‚¹</td><td><code>/home/pi/uploads/image.jpg</code></td></tr>
            <tr><td><strong>msg.filename</strong></td><td>msg.payload ã¨åŒã˜ï¼ˆãƒ•ãƒ«ãƒ‘ã‚¹ï¼‰</td><td><code>/home/pi/uploads/image.jpg</code></td></tr>
            <tr><td><strong>msg.file</strong></td><td>ãƒ•ã‚¡ã‚¤ãƒ«åã®ã¿ï¼ˆçŸ­ç¸®å½¢ï¼‰</td><td><code>image.jpg</code></td></tr>
            <tr><td><strong>msg.type</strong></td><td>å¤‰æ›´ã•ã‚ŒãŸã‚‚ã®ã®ç¨®é¡</td><td><code>file</code> / <code>directory</code></td></tr>
            <tr><td><strong>msg.size</strong></td><td>ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºï¼ˆãƒã‚¤ãƒˆï¼‰</td><td><code>1024</code></td></tr>
            <tr><td><strong>msg.topic</strong></td><td>ç›£è¦–ãƒªã‚¹ãƒˆï¼ˆæ–‡å­—åˆ—åŒ–ï¼‰</td><td><code>/home/pi/uploads</code></td></tr>
        </table>
        
        <div class="warning">
            <p><strong>âš ï¸ é‡è¦ãªåˆ¶ç´„:</strong></p>
            <ul>
                <li>ç›£è¦–å¯¾è±¡ã®ãƒ•ã‚¡ã‚¤ãƒ«/ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¯<strong>äº‹å‰ã«å­˜åœ¨ã—ã¦ã„ã‚‹å¿…è¦</strong>ãŒã‚ã‚Šã¾ã™</li>
                <li>å‰Šé™¤ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«/ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¯ã€å†ä½œæˆã•ã‚Œã¦ã‚‚ç›£è¦–ãŒå¾©æ´»ã—ãªã„å ´åˆãŒã‚ã‚Šã¾ã™</li>
                <li>NFS/SMBãªã©ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒã‚¦ãƒ³ãƒˆã§ã¯æ­£å¸¸ã«å‹•ä½œã—ãªã„å ´åˆãŒã‚ã‚Šã¾ã™</li>
            </ul>
        </div>
        
        <h2>ğŸ¯ 3. å®Ÿç”¨çš„ãªä½¿ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³</h2>
        
        <div class="important">
            <p><strong>ğŸ“¥ ã‚µãƒ³ãƒ—ãƒ«ãƒ•ãƒ­ãƒ¼ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ–¹æ³•:</strong></p>
            <ol>
                <li>ä¸‹ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ•ãƒ­ãƒ¼JSONã‚’ã‚³ãƒ”ãƒ¼</li>
                <li>Node-REDã‚¨ãƒ‡ã‚£ã‚¿ã§ <strong>ãƒ¡ãƒ‹ãƒ¥ãƒ¼ â†’ èª­ã¿è¾¼ã¿</strong> ã‚’é¸æŠ</li>
                <li>JSONã‚’ãƒšãƒ¼ã‚¹ãƒˆã—ã¦ã€Œèª­ã¿è¾¼ã¿ã€ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
            </ol>
            <p>ã“ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ•ãƒ­ãƒ¼ã«ã¯ã€ä»¥ä¸‹ã§èª¬æ˜ã™ã‚‹å…¨ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å®Ÿä¾‹ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚</p>
        </div>
        
        <details>
            <summary>ğŸ“‹ ã‚µãƒ³ãƒ—ãƒ«ãƒ•ãƒ­ãƒ¼ï¼ˆã‚¯ãƒªãƒƒã‚¯ã§å±•é–‹ï¼‰</summary>
            <p style="margin: 10px 0; color: #666;"><small>â€» ä½¿ç”¨å‰ã« /tmp/uploads, /tmp/config.json, /tmp/data ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã¦ãã ã•ã„</small></p>
            <div class="flow-json">[
    {
        "id": "watch_sample_tab",
        "type": "tab",
        "label": "Watch ã‚µãƒ³ãƒ—ãƒ«",
        "disabled": false,
        "info": ""
    },
    {
        "id": "watch_comment1",
        "type": "comment",
        "z": "watch_sample_tab",
        "name": "â”â”â” ãƒ‘ã‚¿ãƒ¼ãƒ³1: åŸºæœ¬çš„ãªãƒ•ã‚¡ã‚¤ãƒ«ç›£è¦– â”â”â”",
        "info": "",
        "x": 220,
        "y": 40,
        "wires": []
    },
    {
        "id": "watch_basic",
        "type": "watch",
        "z": "watch_sample_tab",
        "name": "uploadsç›£è¦–",
        "files": "/tmp/uploads",
        "recursive": true,
        "x": 140,
        "y": 100,
        "wires": [["watch_debug1"]]
    },
    {
        "id": "watch_debug1",
        "type": "debug",
        "z": "watch_sample_tab",
        "name": "å¤‰æ›´æ¤œçŸ¥",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "file",
        "statusType": "msg",
        "x": 330,
        "y": 100,
        "wires": []
    },
    {
        "id": "watch_comment2",
        "type": "comment",
        "z": "watch_sample_tab",
        "name": "â”â”â” ãƒ‘ã‚¿ãƒ¼ãƒ³2: ãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´ â†’ å†…å®¹èª­ã¿è¾¼ã¿ â”â”â”",
        "info": "",
        "x": 240,
        "y": 180,
        "wires": []
    },
    {
        "id": "watch_read",
        "type": "watch",
        "z": "watch_sample_tab",
        "name": "è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ç›£è¦–",
        "files": "/tmp/config.json",
        "recursive": false,
        "x": 160,
        "y": 240,
        "wires": [["watch_file_read"]]
    },
    {
        "id": "watch_file_read",
        "type": "file in",
        "z": "watch_sample_tab",
        "name": "è¨­å®šèª­ã¿è¾¼ã¿",
        "filename": "",
        "filenameType": "msg",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "utf8",
        "allProps": false,
        "x": 360,
        "y": 240,
        "wires": [["watch_json_parse"]]
    },
    {
        "id": "watch_json_parse",
        "type": "json",
        "z": "watch_sample_tab",
        "name": "JSONè§£æ",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 530,
        "y": 240,
        "wires": [["watch_debug2"]]
    },
    {
        "id": "watch_debug2",
        "type": "debug",
        "z": "watch_sample_tab",
        "name": "è¨­å®šå†…å®¹",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 690,
        "y": 240,
        "wires": []
    },
    {
        "id": "watch_comment3",
        "type": "comment",
        "z": "watch_sample_tab",
        "name": "â”â”â” ãƒ‘ã‚¿ãƒ¼ãƒ³3: ãƒ•ã‚¡ã‚¤ãƒ«ç¨®åˆ¥ã«ã‚ˆã‚‹æŒ¯ã‚Šåˆ†ã‘ â”â”â”",
        "info": "",
        "x": 240,
        "y": 320,
        "wires": []
    },
    {
        "id": "watch_filter",
        "type": "watch",
        "z": "watch_sample_tab",
        "name": "ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ«ãƒ€ç›£è¦–",
        "files": "/tmp/data",
        "recursive": true,
        "x": 170,
        "y": 380,
        "wires": [["watch_switch"]]
    },
    {
        "id": "watch_switch",
        "type": "switch",
        "z": "watch_sample_tab",
        "name": "æ‹¡å¼µå­ã§æŒ¯ã‚Šåˆ†ã‘",
        "property": "file",
        "propertyType": "msg",
        "rules": [
            {"t": "regex", "v": "\\.csv$", "vt": "str", "case": true},
            {"t": "regex", "v": "\\.(jpg|png|gif)$", "vt": "str", "case": true},
            {"t": "regex", "v": "\\.json$", "vt": "str", "case": true},
            {"t": "else"}
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 4,
        "x": 370,
        "y": 380,
        "wires": [["watch_debug_csv"], ["watch_debug_img"], ["watch_debug_json"], ["watch_debug_other"]]
    },
    {
        "id": "watch_debug_csv",
        "type": "debug",
        "z": "watch_sample_tab",
        "name": "CSVå‡¦ç†",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "file",
        "targetType": "msg",
        "statusVal": "\"CSV: \" & file",
        "statusType": "jsonata",
        "x": 560,
        "y": 340,
        "wires": []
    },
    {
        "id": "watch_debug_img",
        "type": "debug",
        "z": "watch_sample_tab",
        "name": "ç”»åƒå‡¦ç†",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "file",
        "targetType": "msg",
        "statusVal": "\"IMG: \" & file",
        "statusType": "jsonata",
        "x": 560,
        "y": 380,
        "wires": []
    },
    {
        "id": "watch_debug_json",
        "type": "debug",
        "z": "watch_sample_tab",
        "name": "JSONå‡¦ç†",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "file",
        "targetType": "msg",
        "statusVal": "\"JSON: \" & file",
        "statusType": "jsonata",
        "x": 560,
        "y": 420,
        "wires": []
    },
    {
        "id": "watch_debug_other",
        "type": "debug",
        "z": "watch_sample_tab",
        "name": "ãã®ä»–",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "file",
        "targetType": "msg",
        "statusVal": "\"OTHER: \" & file",
        "statusType": "jsonata",
        "x": 550,
        "y": 460,
        "wires": []
    },
    {
        "id": "watch_comment4",
        "type": "comment",
        "z": "watch_sample_tab",
        "name": "â”â”â” ãƒ‘ã‚¿ãƒ¼ãƒ³4: ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã§ãƒ•ã‚£ãƒ«ã‚¿ â”â”â”",
        "info": "",
        "x": 230,
        "y": 540,
        "wires": []
    },
    {
        "id": "watch_size",
        "type": "watch",
        "z": "watch_sample_tab",
        "name": "ã‚µã‚¤ã‚ºç›£è¦–",
        "files": "/tmp/uploads",
        "recursive": false,
        "x": 140,
        "y": 600,
        "wires": [["watch_size_check"]]
    },
    {
        "id": "watch_size_check",
        "type": "switch",
        "z": "watch_sample_tab",
        "name": "1MBä»¥ä¸Š?",
        "property": "size",
        "propertyType": "msg",
        "rules": [
            {"t": "gte", "v": "1048576", "vt": "num"},
            {"t": "else"}
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 310,
        "y": 600,
        "wires": [["watch_debug_large"], ["watch_debug_small"]]
    },
    {
        "id": "watch_debug_large",
        "type": "debug",
        "z": "watch_sample_tab",
        "name": "å¤§ãã„ãƒ•ã‚¡ã‚¤ãƒ«",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "\"å¤§: \" & $string(size) & \" bytes\"",
        "statusType": "jsonata",
        "x": 500,
        "y": 580,
        "wires": []
    },
    {
        "id": "watch_debug_small",
        "type": "debug",
        "z": "watch_sample_tab",
        "name": "å°ã•ã„ãƒ•ã‚¡ã‚¤ãƒ«",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "\"å°: \" & $string(size) & \" bytes\"",
        "statusType": "jsonata",
        "x": 500,
        "y": 620,
        "wires": []
    },
    {
        "id": "watch_comment5",
        "type": "comment",
        "z": "watch_sample_tab",
        "name": "â”â”â” ãƒ†ã‚¹ãƒˆç”¨: ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ â”â”â”",
        "info": "Injectãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œæˆã•ã‚Œã¾ã™",
        "x": 200,
        "y": 700,
        "wires": []
    },
    {
        "id": "watch_test_inject",
        "type": "inject",
        "z": "watch_sample_tab",
        "name": "ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ",
        "props": [{"p": "payload"}],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿: ",
        "payloadType": "str",
        "x": 170,
        "y": 760,
        "wires": [["watch_test_func"]]
    },
    {
        "id": "watch_test_func",
        "type": "function",
        "z": "watch_sample_tab",
        "name": "ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—è¿½åŠ ",
        "func": "msg.payload = msg.payload + new Date().toISOString();\nmsg.filename = \"/tmp/uploads/test_\" + Date.now() + \".txt\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 760,
        "wires": [["watch_test_write"]]
    },
    {
        "id": "watch_test_write",
        "type": "file",
        "z": "watch_sample_tab",
        "name": "ãƒ•ã‚¡ã‚¤ãƒ«æ›¸ãè¾¼ã¿",
        "filename": "",
        "filenameType": "msg",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "utf8",
        "x": 570,
        "y": 760,
        "wires": [["watch_test_debug"]]
    },
    {
        "id": "watch_test_debug",
        "type": "debug",
        "z": "watch_sample_tab",
        "name": "ä½œæˆå®Œäº†",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "filename",
        "targetType": "msg",
        "statusVal": "filename",
        "statusType": "msg",
        "x": 740,
        "y": 760,
        "wires": []
    }
]</div>
        </details>
        
        <h3>ãƒ‘ã‚¿ãƒ¼ãƒ³1: åŸºæœ¬çš„ãªãƒ•ã‚¡ã‚¤ãƒ«ç›£è¦–</h3>
        <p><strong>ç”¨é€”:</strong> ç‰¹å®šã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«æ–°ã—ã„ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¿½åŠ ã•ã‚ŒãŸã“ã¨ã‚’æ¤œçŸ¥</p>
        
        <div class="node-example">
            <span class="node node-watch">Watch<br><small>(/tmp/uploads)</small></span>
            <span class="arrow">â†’</span>
            <span class="node node-debug">Debug</span>
        </div>
        
        <div class="tip">
            <p><strong>ğŸ“Œ å‹•ä½œã®æµã‚Œ:</strong></p>
            <ol>
                <li>/tmp/uploads ãƒ•ã‚©ãƒ«ãƒ€ã‚’å¸¸æ™‚ç›£è¦–</li>
                <li>ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¿½åŠ /å¤‰æ›´ã•ã‚Œã‚‹ã¨æ¤œçŸ¥</li>
                <li>ãƒ•ã‚¡ã‚¤ãƒ«æƒ…å ±ï¼ˆãƒ‘ã‚¹ã€åå‰ã€ã‚µã‚¤ã‚ºï¼‰ã‚’Debugã«å‡ºåŠ›</li>
            </ol>
        </div>
        
        <p><strong>å‡ºåŠ›ä¾‹:</strong></p>
        <div class="code-block">msg.payload = "/tmp/uploads/image.jpg"
msg.file = "image.jpg"
msg.type = "file"
msg.size = 1024</div>
        
        <h3>ãƒ‘ã‚¿ãƒ¼ãƒ³2: ãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´ â†’ å†…å®¹èª­ã¿è¾¼ã¿</h3>
        <p><strong>ç”¨é€”:</strong> è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãŒæ›´æ–°ã•ã‚ŒãŸã‚‰å†…å®¹ã‚’è‡ªå‹•çš„ã«èª­ã¿è¾¼ã‚€</p>
        
        <div class="node-example">
            <span class="node node-watch">Watch<br><small>(config.json)</small></span>
            <span class="arrow">â†’</span>
            <span class="node node-file-in">Read File</span>
            <span class="arrow">â†’</span>
            <span class="node node-json">JSON</span>
            <span class="arrow">â†’</span>
            <span class="node node-debug">Debug</span>
        </div>
        
        <div class="tip">
            <p><strong>ğŸ“Œ å‹•ä½œã®æµã‚Œ:</strong></p>
            <ol>
                <li>Watch ãŒ config.json ã®å¤‰æ›´ã‚’æ¤œçŸ¥</li>
                <li>Read File ãŒ msg.filename ã‚’ä½¿ã£ã¦ãƒ•ã‚¡ã‚¤ãƒ«å†…å®¹ã‚’èª­ã¿è¾¼ã¿</li>
                <li>JSON ãƒãƒ¼ãƒ‰ã§ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¤‰æ›</li>
                <li>Debugã§è¨­å®šå†…å®¹ã‚’ç¢ºèª</li>
            </ol>
            <p><em>â€» Watch ãŒå‡ºåŠ›ã™ã‚‹ msg.filename ã‚’ Read File ãƒãƒ¼ãƒ‰ã§ä½¿ç”¨ã™ã‚‹ã®ãŒãƒã‚¤ãƒ³ãƒˆ</em></p>
        </div>
        
        <h3>ãƒ‘ã‚¿ãƒ¼ãƒ³3: ãƒ•ã‚¡ã‚¤ãƒ«ç¨®åˆ¥ã«ã‚ˆã‚‹æŒ¯ã‚Šåˆ†ã‘</h3>
        <p><strong>ç”¨é€”:</strong> æ‹¡å¼µå­ã«ã‚ˆã£ã¦ç•°ãªã‚‹å‡¦ç†ã‚’å®Ÿè¡Œ</p>
        
        <div class="node-example">
            <span class="node node-watch">Watch<br><small>(/tmp/data)</small></span>
            <span class="arrow">â†’</span>
            <span class="node node-switch">Switch<br><small>(æ‹¡å¼µå­)</small></span>
            <span class="arrow">â†’</span>
            <span class="node node-debug">CSV / ç”»åƒ / JSON / ãã®ä»–</span>
        </div>
        
        <div class="tip">
            <p><strong>ğŸ“Œ å‹•ä½œã®æµã‚Œ:</strong></p>
            <ol>
                <li>Watch ãŒ /tmp/data ãƒ•ã‚©ãƒ«ãƒ€ã‚’ç›£è¦–</li>
                <li>Switch ãƒãƒ¼ãƒ‰ã§ msg.file ã‚’æ­£è¦è¡¨ç¾ã§ãƒãƒƒãƒãƒ³ã‚°</li>
                <li>æ‹¡å¼µå­ã«å¿œã˜ã¦4ã¤ã®å‡ºåŠ›ã«æŒ¯ã‚Šåˆ†ã‘</li>
            </ol>
        </div>
        
        <p><strong>Switchãƒãƒ¼ãƒ‰ã®è¨­å®š:</strong></p>
        <div class="code-block">ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£: msg.file
ãƒ«ãƒ¼ãƒ«1: æ­£è¦è¡¨ç¾ \.csv$      â†’ CSVå‡¦ç†ã¸
ãƒ«ãƒ¼ãƒ«2: æ­£è¦è¡¨ç¾ \.(jpg|png|gif)$ â†’ ç”»åƒå‡¦ç†ã¸
ãƒ«ãƒ¼ãƒ«3: æ­£è¦è¡¨ç¾ \.json$     â†’ JSONå‡¦ç†ã¸
ãƒ«ãƒ¼ãƒ«4: ãã®ä»–              â†’ ãã®ä»–å‡¦ç†ã¸</div>
        
        <h3>ãƒ‘ã‚¿ãƒ¼ãƒ³4: ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã§ãƒ•ã‚£ãƒ«ã‚¿</h3>
        <p><strong>ç”¨é€”:</strong> å¤§ããªãƒ•ã‚¡ã‚¤ãƒ«ã¨å°ã•ãªãƒ•ã‚¡ã‚¤ãƒ«ã§å‡¦ç†ã‚’åˆ†ã‘ã‚‹</p>
        
        <div class="node-example">
            <span class="node node-watch">Watch</span>
            <span class="arrow">â†’</span>
            <span class="node node-switch">Switch<br><small>(size >= 1MB)</small></span>
            <span class="arrow">â†’</span>
            <span class="node node-debug">å¤§ / å°</span>
        </div>
        
        <div class="tip">
            <p><strong>ğŸ“Œ å‹•ä½œã®æµã‚Œ:</strong></p>
            <ol>
                <li>Watch ãŒ msg.size ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã‚’å‡ºåŠ›</li>
                <li>Switch ãƒãƒ¼ãƒ‰ã§ 1MB (1048576 bytes) ä»¥ä¸Šã‹ã‚’åˆ¤å®š</li>
                <li>å¤§ãã„ãƒ•ã‚¡ã‚¤ãƒ«ã¨å°ã•ã„ãƒ•ã‚¡ã‚¤ãƒ«ã§åˆ¥ã€…ã®å‡¦ç†ã¸</li>
            </ol>
        </div>
        
        <h2>ğŸ‹ï¸ 4. å®Ÿè·µæ¼”ç¿’</h2>
        
        <div class="exercise">
            <h3>æ¼”ç¿’1: åŸºæœ¬çš„ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç›£è¦–<span class="difficulty difficulty-easy">åˆç´š</span></h3>
            
            <p><strong>ğŸ“ èª²é¡Œ:</strong></p>
            <p><code>/tmp/mywatch</code> ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ç›£è¦–ã—ã€ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¿½åŠ ã•ã‚ŒãŸã‚‰ãƒ•ã‚¡ã‚¤ãƒ«åã¨ã‚µã‚¤ã‚ºã‚’Debugã«è¡¨ç¤ºã—ã¦ãã ã•ã„ã€‚</p>
            
            <p><strong>ğŸ¯ è¦æ±‚ä»•æ§˜:</strong></p>
            <ul>
                <li>Watch ãƒãƒ¼ãƒ‰ã§ <code>/tmp/mywatch</code> ã‚’ç›£è¦–</li>
                <li>Debug ãƒãƒ¼ãƒ‰ã§å¤‰æ›´ã‚’è¡¨ç¤º</li>
            </ul>
            
            <details>
                <summary>ğŸ’¡ ãƒ’ãƒ³ãƒˆ</summary>
                <p><strong>æº–å‚™:</strong></p>
                <ul>
                    <li>äº‹å‰ã« <code>mkdir /tmp/mywatch</code> ã§ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆ</li>
                </ul>
                <p><strong>Watchãƒãƒ¼ãƒ‰ã®è¨­å®š:</strong></p>
                <ul>
                    <li>Files: /tmp/mywatch</li>
                </ul>
                <p><strong>Debugãƒãƒ¼ãƒ‰ã®è¨­å®š:</strong></p>
                <ul>
                    <li>å‡ºåŠ›: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å…¨ä½“</li>
                </ul>
            </details>
            
            <details>
                <summary>âœ… è§£ç­”ä¾‹ãƒ•ãƒ­ãƒ¼</summary>
                <div class="flow-json">[
    {"id": "ex1_watch", "type": "watch", "name": "mywatchç›£è¦–", "files": "/tmp/mywatch", "recursive": false, "x": 160, "y": 100, "wires": [["ex1_debug"]]},
    {"id": "ex1_debug", "type": "debug", "name": "ãƒ•ã‚¡ã‚¤ãƒ«æƒ…å ±", "active": true, "tosidebar": true, "console": false, "tostatus": true, "complete": "true", "targetType": "full", "statusVal": "file & \": \" & $string(size) & \" bytes\"", "statusType": "jsonata", "x": 370, "y": 100, "wires": []}
]</div>
            </details>
        </div>
        
        <div class="exercise">
            <h3>æ¼”ç¿’2: è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®è‡ªå‹•ãƒªãƒ­ãƒ¼ãƒ‰<span class="difficulty difficulty-medium">ä¸­ç´š</span></h3>
            
            <p><strong>ğŸ“ èª²é¡Œ:</strong></p>
            <p>JSONã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç›£è¦–ã—ã€å¤‰æ›´ãŒã‚ã£ãŸã‚‰å†…å®¹ã‚’èª­ã¿è¾¼ã‚“ã§ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã«ä¿å­˜ã—ã¦ãã ã•ã„ã€‚</p>
            
            <p><strong>ğŸ¯ è¦æ±‚ä»•æ§˜:</strong></p>
            <ul>
                <li>Watch ãƒãƒ¼ãƒ‰ã§è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç›£è¦–</li>
                <li>Read File ãƒãƒ¼ãƒ‰ã§å†…å®¹ã‚’èª­ã¿è¾¼ã¿</li>
                <li>JSON ãƒãƒ¼ãƒ‰ã§è§£æ</li>
                <li>Function ãƒãƒ¼ãƒ‰ã§ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã«ä¿å­˜</li>
            </ul>
            
            <details>
                <summary>ğŸ’¡ ãƒ’ãƒ³ãƒˆ</summary>
                <p><strong>Read Fileãƒãƒ¼ãƒ‰ã®è¨­å®š:</strong></p>
                <ul>
                    <li>ãƒ•ã‚¡ã‚¤ãƒ«å: msg.filename ã‚’ä½¿ç”¨ï¼ˆWatch ãŒå‡ºåŠ›ã™ã‚‹ãƒ‘ã‚¹ï¼‰</li>
                </ul>
                <p><strong>Functionãƒãƒ¼ãƒ‰:</strong></p>
                <ul>
                    <li><code>global.set("config", msg.payload);</code></li>
                </ul>
            </details>
            
            <details>
                <summary>âœ… è§£ç­”ä¾‹ãƒ•ãƒ­ãƒ¼</summary>
                <div class="flow-json">[
    {"id": "ex2_watch", "type": "watch", "name": "è¨­å®šç›£è¦–", "files": "/tmp/app_config.json", "recursive": false, "x": 140, "y": 100, "wires": [["ex2_read"]]},
    {"id": "ex2_read", "type": "file in", "name": "èª­ã¿è¾¼ã¿", "filename": "", "filenameType": "msg", "format": "utf8", "chunk": false, "sendError": false, "encoding": "utf8", "allProps": false, "x": 290, "y": 100, "wires": [["ex2_json"]]},
    {"id": "ex2_json", "type": "json", "name": "JSONè§£æ", "property": "payload", "action": "", "pretty": false, "x": 430, "y": 100, "wires": [["ex2_func"]]},
    {"id": "ex2_func", "type": "function", "name": "ã‚°ãƒ­ãƒ¼ãƒãƒ«ä¿å­˜", "func": "global.set(\"config\", msg.payload);\nnode.status({fill:\"green\", shape:\"dot\", text:\"è¨­å®šæ›´æ–°: \" + new Date().toLocaleTimeString()});\nreturn msg;", "outputs": 1, "timeout": 0, "noerr": 0, "initialize": "", "finalize": "", "libs": [], "x": 590, "y": 100, "wires": [["ex2_debug"]]},
    {"id": "ex2_debug", "type": "debug", "name": "æ–°è¨­å®š", "active": true, "tosidebar": true, "console": false, "tostatus": false, "complete": "payload", "targetType": "msg", "x": 750, "y": 100, "wires": []}
]</div>
            </details>
        </div>
        
        <div class="exercise">
            <h3>æ¼”ç¿’3: ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã®è‡ªå‹•æ¤œå‡º<span class="difficulty difficulty-medium">ä¸­ç´š</span></h3>
            
            <p><strong>ğŸ“ èª²é¡Œ:</strong></p>
            <p>ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ«ãƒ€ã‚’ç›£è¦–ã—ã€JPG/PNGç”»åƒã®ã¿ã‚’æ¤œå‡ºã—ã¦ãƒ•ã‚¡ã‚¤ãƒ«æƒ…å ±ã‚’ãƒ­ã‚°ã«è¨˜éŒ²ã—ã¦ãã ã•ã„ã€‚</p>
            
            <p><strong>ğŸ¯ è¦æ±‚ä»•æ§˜:</strong></p>
            <ul>
                <li>Watch ãƒãƒ¼ãƒ‰ã§ãƒ•ã‚©ãƒ«ãƒ€ã‚’ç›£è¦–</li>
                <li>Switch ãƒãƒ¼ãƒ‰ã§ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ.jpg, .pngï¼‰ã®ã¿ã‚’é€šé</li>
                <li>Function ãƒãƒ¼ãƒ‰ã§ãƒ­ã‚°æƒ…å ±ã‚’æ•´å½¢</li>
                <li>Write File ãƒãƒ¼ãƒ‰ã§ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã«è¿½è¨˜</li>
            </ul>
            
            <details>
                <summary>ğŸ’¡ ãƒ’ãƒ³ãƒˆ</summary>
                <p><strong>Switchãƒãƒ¼ãƒ‰ã®è¨­å®š:</strong></p>
                <ul>
                    <li>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£: msg.file</li>
                    <li>æ­£è¦è¡¨ç¾: <code>\.(jpg|jpeg|png)$</code></li>
                </ul>
                <p><strong>Functionãƒãƒ¼ãƒ‰:</strong></p>
                <ul>
                    <li>ãƒ­ã‚°å½¢å¼: ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—,ãƒ•ã‚¡ã‚¤ãƒ«å,ã‚µã‚¤ã‚º</li>
                </ul>
            </details>
            
            <details>
                <summary>âœ… è§£ç­”ä¾‹ãƒ•ãƒ­ãƒ¼</summary>
                <div class="flow-json">[
    {"id": "ex3_watch", "type": "watch", "name": "ç”»åƒãƒ•ã‚©ãƒ«ãƒ€ç›£è¦–", "files": "/tmp/images", "recursive": true, "x": 170, "y": 100, "wires": [["ex3_switch"]]},
    {"id": "ex3_switch", "type": "switch", "name": "ç”»åƒã®ã¿", "property": "file", "propertyType": "msg", "rules": [{"t": "regex", "v": "\\.(jpg|jpeg|png)$", "vt": "str", "case": true}], "checkall": "true", "repair": false, "outputs": 1, "x": 350, "y": 100, "wires": [["ex3_func"]]},
    {"id": "ex3_func", "type": "function", "name": "ãƒ­ã‚°æ•´å½¢", "func": "var log = new Date().toISOString() + \",\" + msg.file + \",\" + msg.size;\nmsg.payload = log;\nreturn msg;", "outputs": 1, "timeout": 0, "noerr": 0, "initialize": "", "finalize": "", "libs": [], "x": 510, "y": 100, "wires": [["ex3_write", "ex3_debug"]]},
    {"id": "ex3_write", "type": "file", "name": "ãƒ­ã‚°è¿½è¨˜", "filename": "/tmp/image_log.csv", "filenameType": "str", "appendNewline": true, "createDir": true, "overwriteFile": "false", "encoding": "utf8", "x": 680, "y": 80, "wires": [[]]},
    {"id": "ex3_debug", "type": "debug", "name": "ç”»åƒæ¤œå‡º", "active": true, "tosidebar": true, "console": false, "tostatus": true, "complete": "payload", "targetType": "msg", "statusVal": "payload", "statusType": "msg", "x": 680, "y": 120, "wires": []}
]</div>
            </details>
        </div>
        
        <div class="exercise">
            <h3>æ¼”ç¿’4: FTPã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å‡¦ç†ã‚·ã‚¹ãƒ†ãƒ <span class="difficulty difficulty-hard">ä¸Šç´š</span></h3>
            
            <p><strong>ğŸ“ èª²é¡Œ:</strong></p>
            <p>FTPãƒ•ã‚©ãƒ«ãƒ€ã‚’ç›£è¦–ã—ã€CSVãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸã‚‰å†…å®¹ã‚’è§£æã—ã¦JSONå½¢å¼ã«å¤‰æ›ã€å‡¦ç†çµæœã‚’ä¿å­˜ã—ã¦ãã ã•ã„ã€‚</p>
            
            <p><strong>ğŸ¯ è¦æ±‚ä»•æ§˜:</strong></p>
            <ul>
                <li>Watch ãƒãƒ¼ãƒ‰ã§FTPãƒ•ã‚©ãƒ«ãƒ€ã‚’ç›£è¦–</li>
                <li>Delay ãƒãƒ¼ãƒ‰ã§æ›¸ãè¾¼ã¿å®Œäº†ã‚’å¾…æ©Ÿï¼ˆ2ç§’ï¼‰</li>
                <li>Read File + CSV ãƒãƒ¼ãƒ‰ã§ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ãƒ»è§£æ</li>
                <li>Function ãƒãƒ¼ãƒ‰ã§JSONå¤‰æ›</li>
                <li>å‡¦ç†çµæœã‚’JSONãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ä¿å­˜</li>
            </ul>
            
            <details>
                <summary>ğŸ’¡ ãƒ’ãƒ³ãƒˆ</summary>
                <p><strong>ãªãœDelayãŒå¿…è¦?</strong></p>
                <ul>
                    <li>FTPã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ä¸­ã«WatchãŒæ¤œçŸ¥ã™ã‚‹ã“ã¨ãŒã‚ã‚‹</li>
                    <li>æ›¸ãè¾¼ã¿å®Œäº†ã‚’å¾…ã£ã¦ã‹ã‚‰èª­ã¿è¾¼ã‚€ã¨å®‰å…¨</li>
                </ul>
                <p><strong>CSVãƒãƒ¼ãƒ‰ã®è¨­å®š:</strong></p>
                <ul>
                    <li>1è¡Œç›®ã‚’ãƒ˜ãƒƒãƒ€ãƒ¼ã¨ã—ã¦ä½¿ç”¨: ON</li>
                </ul>
            </details>
            
            <details>
                <summary>âœ… è§£ç­”ä¾‹ãƒ•ãƒ­ãƒ¼</summary>
                <div class="flow-json">[
    {"id": "ex4_watch", "type": "watch", "name": "FTPãƒ•ã‚©ãƒ«ãƒ€", "files": "/tmp/ftp_incoming", "recursive": false, "x": 140, "y": 100, "wires": [["ex4_filter"]]},
    {"id": "ex4_filter", "type": "switch", "name": "CSVã®ã¿", "property": "file", "propertyType": "msg", "rules": [{"t": "regex", "v": "\\.csv$", "vt": "str", "case": true}], "checkall": "true", "repair": false, "outputs": 1, "x": 290, "y": 100, "wires": [["ex4_delay"]]},
    {"id": "ex4_delay", "type": "delay", "name": "2ç§’å¾…æ©Ÿ", "pauseType": "delay", "timeout": "2", "timeoutUnits": "seconds", "rate": "1", "nbRateUnits": "1", "rateUnits": "second", "randomFirst": "1", "randomLast": "5", "randomUnits": "seconds", "drop": false, "allowrate": false, "outputs": 1, "x": 420, "y": 100, "wires": [["ex4_read"]]},
    {"id": "ex4_read", "type": "file in", "name": "CSVèª­ã¿è¾¼ã¿", "filename": "", "filenameType": "msg", "format": "utf8", "chunk": false, "sendError": false, "encoding": "utf8", "allProps": false, "x": 560, "y": 100, "wires": [["ex4_csv"]]},
    {"id": "ex4_csv", "type": "csv", "name": "CSVè§£æ", "sep": ",", "hdrin": true, "hdrout": "none", "multi": "mult", "ret": "\\n", "temp": "", "skip": "0", "strings": true, "include_empty_strings": false, "include_null_values": false, "x": 700, "y": 100, "wires": [["ex4_func"]]},
    {"id": "ex4_func", "type": "function", "name": "JSONå¤‰æ›", "func": "var baseName = msg.file.replace('.csv', '');\nvar result = {\n    originalFile: msg.filename,\n    processedAt: new Date().toISOString(),\n    recordCount: msg.payload.length,\n    data: msg.payload\n};\nmsg.payload = JSON.stringify(result, null, 2);\nmsg.outputFile = \"/tmp/ftp_processed/\" + baseName + \".json\";\nreturn msg;", "outputs": 1, "timeout": 0, "noerr": 0, "initialize": "", "finalize": "", "libs": [], "x": 150, "y": 180, "wires": [["ex4_write_json"]]},
    {"id": "ex4_write_json", "type": "file", "name": "JSONä¿å­˜", "filename": "", "filenameType": "msg", "appendNewline": false, "createDir": true, "overwriteFile": "true", "encoding": "utf8", "x": 310, "y": 180, "wires": [["ex4_debug"]]},
    {"id": "ex4_debug", "type": "debug", "name": "å‡¦ç†å®Œäº†", "active": true, "tosidebar": true, "console": false, "tostatus": true, "complete": "outputFile", "targetType": "msg", "statusVal": "\"å‡¦ç†å®Œäº†: \" & file", "statusType": "jsonata", "x": 470, "y": 180, "wires": []}
]</div>
            </details>
        </div>
        
        <h2>ğŸ“ 5. ã¾ã¨ã‚</h2>
        
        <div class="important">
            <h3>Watchãƒãƒ¼ãƒ‰ã®é‡è¦ãƒã‚¤ãƒ³ãƒˆ</h3>
            <ul>
                <li>âœ… <strong>ãƒ•ã‚¡ã‚¤ãƒ«/ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç›£è¦–</strong>: å¤‰æ›´ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§æ¤œçŸ¥</li>
                <li>âœ… <strong>msg.filename</strong>: å¤‰æ›´ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ•ãƒ«ãƒ‘ã‚¹ï¼ˆRead Fileã§ä½¿ç”¨å¯èƒ½ï¼‰</li>
                <li>âœ… <strong>msg.file</strong>: ãƒ•ã‚¡ã‚¤ãƒ«åã®ã¿ï¼ˆæ‹¡å¼µå­åˆ¤å®šã«ä¾¿åˆ©ï¼‰</li>
                <li>âœ… <strong>msg.size</strong>: ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºï¼ˆãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã«ä½¿ç”¨ï¼‰</li>
                <li>âœ… <strong>recursive</strong>: ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚‚å«ã‚ã¦ç›£è¦–</li>
            </ul>
        </div>
        
        <div class="warning">
            <h3>âš ï¸ ã‚ˆãã‚ã‚‹é–“é•ã„</h3>
            <ul>
                <li><strong>ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒå­˜åœ¨ã—ãªã„</strong>: äº‹å‰ã«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã¦ãŠã</li>
                <li><strong>ãƒ‘ã‚¹ã®æ›¸ãæ–¹</strong>: Windowsã¯ãƒ€ãƒ–ãƒ«ãƒãƒƒã‚¯ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ï¼ˆ\\ï¼‰ã‚’ä½¿ç”¨</li>
                <li><strong>æ›¸ãè¾¼ã¿ä¸­ã®èª­ã¿è¾¼ã¿</strong>: å¤§ããªãƒ•ã‚¡ã‚¤ãƒ«ã¯Delayã§å¾…æ©Ÿã—ã¦ã‹ã‚‰èª­ã‚€</li>
                <li><strong>ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ‰ãƒ©ã‚¤ãƒ–</strong>: NFS/SMBã§ã¯å‹•ä½œã—ãªã„å ´åˆã‚ã‚Š</li>
            </ul>
        </div>
        
        <h2>ğŸ”§ 6. ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°</h2>
        
        <table>
            <tr><th>å•é¡Œ</th><th>åŸå› </th><th>è§£æ±ºæ–¹æ³•</th></tr>
            <tr>
                <td>ç›£è¦–ãŒé–‹å§‹ã•ã‚Œãªã„</td>
                <td>ãƒ•ã‚¡ã‚¤ãƒ«/ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒå­˜åœ¨ã—ãªã„</td>
                <td>äº‹å‰ã«ãƒ•ã‚¡ã‚¤ãƒ«/ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã™ã‚‹</td>
            </tr>
            <tr>
                <td>å¤‰æ›´ãŒæ¤œçŸ¥ã•ã‚Œãªã„</td>
                <td>NFS/SMBãƒã‚¦ãƒ³ãƒˆä¸Šã®ãƒ•ã‚¡ã‚¤ãƒ«</td>
                <td>ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚’ä½¿ç”¨</td>
            </tr>
            <tr>
                <td>å‰Šé™¤å¾Œã«ç›£è¦–å¾©æ´»ã—ãªã„</td>
                <td>Watchãƒãƒ¼ãƒ‰ã®ä»•æ§˜</td>
                <td>ãƒ•ãƒ­ãƒ¼ã‚’å†ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹</td>
            </tr>
            <tr>
                <td>èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼</td>
                <td>ãƒ•ã‚¡ã‚¤ãƒ«æ›¸ãè¾¼ã¿å®Œäº†å‰ã«èª­ã¿è¾¼ã¿</td>
                <td>Delayãƒãƒ¼ãƒ‰ã§å¾…æ©Ÿã—ã¦ã‹ã‚‰èª­ã¿è¾¼ã¿</td>
            </tr>
            <tr>
                <td>Windowsã§ãƒ‘ã‚¹ãŒèªè­˜ã•ã‚Œãªã„</td>
                <td>ã‚·ãƒ³ã‚°ãƒ«ãƒãƒƒã‚¯ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ä½¿ç”¨</td>
                <td>ãƒ€ãƒ–ãƒ«ãƒãƒƒã‚¯ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ï¼ˆ\\ï¼‰ã‚’ä½¿ç”¨</td>
            </tr>
        </table>
        
        <h2>ğŸ’¡ 7. å®Ÿå‹™ã§ã®æ´»ç”¨ä¾‹</h2>
        
        <h3>ã‚±ãƒ¼ã‚¹1: IoTã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã®è‡ªå‹•å–ã‚Šè¾¼ã¿</h3>
        <div class="code-block">ã‚»ãƒ³ã‚µãƒ¼æ©Ÿå™¨ãŒCSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®šæœŸå‡ºåŠ›
â†“
Watch ã§æ¤œçŸ¥
â†“
ãƒ‡ãƒ¼ã‚¿è§£æãƒ»DBç™»éŒ²</div>
        
        <h3>ã‚±ãƒ¼ã‚¹2: ç›£è¦–ã‚«ãƒ¡ãƒ©ç”»åƒã®å‡¦ç†</h3>
        <div class="code-block">å‹•ä½“æ¤œçŸ¥ã‚«ãƒ¡ãƒ©ãŒç”»åƒã‚’ä¿å­˜
â†“
Watch ã§æ¤œçŸ¥
â†“
ç”»åƒè§£æ â†’ ç•°å¸¸æ™‚ã«ã‚¢ãƒ©ãƒ¼ãƒˆ</div>
        
        <h3>ã‚±ãƒ¼ã‚¹3: ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ç›£è¦–</h3>
        <div class="code-block">ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚°ã‚’ç›£è¦–
â†“
ã‚¨ãƒ©ãƒ¼ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œå‡º
â†“
Slack/ãƒ¡ãƒ¼ãƒ«ã§é€šçŸ¥</div>
        
        <h3>ã‚±ãƒ¼ã‚¹4: è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰</h3>
        <div class="code-block">è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´ã‚’æ¤œçŸ¥
â†“
æ–°è¨­å®šã‚’èª­ã¿è¾¼ã¿
â†“
ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«é©ç”¨ï¼ˆå†èµ·å‹•ä¸è¦ï¼‰</div>
        
        <h2>ğŸ“— 8. è¿½åŠ ãƒªã‚½ãƒ¼ã‚¹</h2>
        
        <ul>
            <li><a href="https://nodered.org/docs/" target="_blank">Node-RED å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a></li>
            <li><a href="https://cookbook.nodered.org/" target="_blank">Node-RED Cookbook</a></li>
        </ul>
        
        <hr>
        
        <p style="text-align: center; color: #999; margin-top: 40px;">
            <small>ã“ã®ã‚¬ã‚¤ãƒ‰ãŒå½¹ã«ç«‹ã¡ã¾ã—ãŸã‚‰ã€å®Ÿéš›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ç·´ç¿’ã—ã¦ã¿ã¦ãã ã•ã„!<br>
            Watchãƒãƒ¼ãƒ‰ã¯ãƒ•ã‚¡ã‚¤ãƒ«ç›£è¦–ã®å¼·åŠ›ãªãƒ„ãƒ¼ãƒ«ã§ã™ã€‚</small>
        </p>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var codeBlocks = document.querySelectorAll('.flow-json');
            codeBlocks.forEach(function(block) {
                var button = document.createElement('button');
                button.className = 'copy-button';
                button.textContent = 'ã‚³ãƒ”ãƒ¼';
                button.addEventListener('click', function() {
                    var code = block.textContent.replace(/ã‚³ãƒ”ãƒ¼(ã—ã¾ã—ãŸ!)?$/, '').trim();
                    navigator.clipboard.writeText(code).then(function() {
                        button.textContent = 'ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ!';
                        button.classList.add('copied');
                        setTimeout(function() {
                            button.textContent = 'ã‚³ãƒ”ãƒ¼';
                            button.classList.remove('copied');
                        }, 2000);
                    });
                });
                block.style.position = 'relative';
                block.appendChild(button);
            });
        });
    </script>
    <a href="index.html" style="position: fixed; bottom: 20px; right: 20px; width: 56px; height: 56px; background: linear-gradient(135deg, #42b883 0%, #35495e 100%); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; text-decoration: none; font-size: 24px; box-shadow: 0 4px 12px rgba(0,0,0,0.3); z-index: 1000; transition: transform 0.3s, box-shadow 0.3s;" onmouseover="this.style.transform='scale(1.1)'; this.style.boxShadow='0 6px 16px rgba(0,0,0,0.4)';" onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.3)';" title="ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã¸">ğŸ </a>
</body>
</html>

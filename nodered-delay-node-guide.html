<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Node-RED Delayãƒãƒ¼ãƒ‰ å®Œå…¨ã‚¬ã‚¤ãƒ‰</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.8;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }
        
        h1 {
            color: #8f0000;
            border-bottom: 3px solid #8f0000;
            padding-bottom: 10px;
        }
        
        h2 {
            color: #c00000;
            margin-top: 30px;
            border-left: 5px solid #c00000;
            padding-left: 15px;
        }
        
        h3 {
            color: #555;
            margin-top: 25px;
        }
        
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .node-example {
            background-color: #2d3133;
            padding: 20px;
            border-radius: 5px;
            margin: 20px 0;
            color: white;
            font-family: 'Courier New', monospace;
        }
        
        .node {
            display: inline-block;
            padding: 8px 15px;
            border-radius: 4px;
            margin: 5px;
            font-weight: bold;
            font-size: 14px;
        }
        
        .node-inject {
            background-color: #3fadb5;
            color: white;
        }
        
        .node-delay {
            background-color: #b5a7d6;
            color: white;
        }
        
        .node-debug {
            background-color: #87a48d;
            color: white;
        }
        
        .node-change {
            background-color: #e7a070;
            color: white;
        }
        
        .node-split {
            background-color: #e8c46b;
            color: #333;
        }
        
        .arrow {
            color: #999;
            font-size: 20px;
            margin: 0 10px;
        }
        
        .important {
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }
        
        .tip {
            background-color: #d1ecf1;
            border-left: 4px solid #17a2b8;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }
        
        .code-block {
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 15px;
            margin: 15px 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            position: relative;
        }
        
        .copy-button {
            position: absolute;
            top: 8px;
            right: 8px;
            padding: 6px 12px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            font-family: 'Segoe UI', sans-serif;
            transition: background-color 0.2s;
            z-index: 10;
        }
        
        .copy-button:hover {
            background-color: #0056b3;
        }
        
        .copy-button.copied {
            background-color: #28a745;
        }
        
        .exercise {
            background-color: #e8f5e9;
            border: 2px solid #4caf50;
            border-radius: 8px;
            padding: 20px;
            margin: 25px 0;
        }
        
        .exercise h3 {
            color: #2e7d32;
            margin-top: 0;
        }
        
        .difficulty {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
            margin-left: 10px;
        }
        
        .difficulty-easy {
            background-color: #4caf50;
            color: white;
        }
        
        .difficulty-medium {
            background-color: #ff9800;
            color: white;
        }
        
        .difficulty-hard {
            background-color: #f44336;
            color: white;
        }
        
        ul, ol {
            padding-left: 25px;
        }
        
        li {
            margin: 8px 0;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        
        th {
            background-color: #8f0000;
            color: white;
        }
        
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        .flow-json {
            background-color: #263238;
            color: #aed581;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 400px;
            overflow-y: auto;
            position: relative;
        }
        
        details {
            margin: 15px 0;
        }
        
        summary {
            cursor: pointer;
            padding: 10px;
            background-color: #6c757d;
            color: white;
            border-radius: 4px;
            font-weight: bold;
        }
        
        summary:hover {
            background-color: #5a6268;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .feature-card {
            background-color: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
        }
        
        .feature-card h4 {
            color: #b5a7d6;
            margin-top: 0;
        }
        
        .mode-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: bold;
            margin-right: 5px;
        }
        
        .badge-delay {
            background-color: #b5a7d6;
            color: white;
        }
        
        .badge-rate {
            background-color: #17a2b8;
            color: white;
        }
        
        .badge-queue {
            background-color: #ffc107;
            color: #333;
        }
        
        .badge-random {
            background-color: #6c757d;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>â±ï¸ Node-RED Delayãƒãƒ¼ãƒ‰ å®Œå…¨ã‚¬ã‚¤ãƒ‰</h1>
        
        <p>ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ã€Node-REDã®<strong>Delayãƒãƒ¼ãƒ‰</strong>ã«ã¤ã„ã¦ã€åˆå¿ƒè€…ã®æ–¹ã§ã‚‚ç†è§£ã§ãã‚‹ã‚ˆã†ã«è©³ã—ãèª¬æ˜ã—ã¾ã™ã€‚</p>
        
        <h2>ğŸ“š 1. Delayãƒãƒ¼ãƒ‰ã¨ã¯?</h2>
        
        <h3>ğŸ¤” ã€Œé…å»¶ã€ã£ã¦ä½•?</h3>
        <p>é…å»¶ã¨ã¯ã€ã€Œã‚ã–ã¨å¾…ã¤ã€ã¨ã„ã†ã“ã¨ã§ã™ã€‚ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒæµã‚Œã¦ãã‚‹ã‚¹ãƒ”ãƒ¼ãƒ‰ã‚’ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã™ã‚‹ã®ãŒDelayãƒãƒ¼ãƒ‰ã®å½¹å‰²ã§ã™ã€‚</p>
        
        <div class="important">
            <strong>ğŸ’¡ æ—¥å¸¸ã®ä¾‹ã§è€ƒãˆã¦ã¿ã¾ã—ã‚‡ã†:</strong>
            <ul>
                <li>ä¿¡å·æ©Ÿ â†’ ä¸€å®šæ™‚é–“å¾…ã£ã¦ã‹ã‚‰è»Šã‚’é€²ã‚ã‚‹(å›ºå®šé…å»¶)</li>
                <li>ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã®æ³¨æ–‡ â†’ æ–™ç†ãŒã§ãã‚‹ã¾ã§å¾…ã¤(å¯å¤‰é…å»¶)</li>
                <li>è¡Œåˆ—ã®æ•´ç† â†’ ä¸€åº¦ã«å…¥å ´ã§ãã‚‹äººæ•°ã‚’åˆ¶é™(ãƒ¬ãƒ¼ãƒˆåˆ¶é™)</li>
                <li>ã‚¨ãƒ¬ãƒ™ãƒ¼ã‚¿ãƒ¼ â†’ æº€å“¡ã«ãªã‚‹ã¾ã§å°‘ã—å¾…ã¤(ã‚­ãƒ¥ãƒ¼ã‚¤ãƒ³ã‚°)</li>
            </ul>
            <p>Delayãƒãƒ¼ãƒ‰ã¯ã€ã“ã‚Œã‚‰ã®ã€Œå¾…ã¤ã€ã€Œåˆ¶é™ã™ã‚‹ã€ã‚’ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§å®Ÿç¾ã—ã¾ã™!</p>
        </div>
        
        <h3>ğŸ¯ Delayãƒãƒ¼ãƒ‰ã®å½¹å‰²</h3>
        <p><strong>Delayãƒãƒ¼ãƒ‰</strong>ã¯ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æµã‚Œã‚’æ™‚é–“çš„ã«åˆ¶å¾¡ã™ã‚‹ãƒãƒ¼ãƒ‰ã§ã™ã€‚ä¸»ã«3ã¤ã®ç”¨é€”ãŒã‚ã‚Šã¾ã™:</p>
        
        <div class="tip">
            <strong>ğŸš¦ äº¤é€šæ•´ç†ã®ä¾‹:</strong><br>
            <br>
            <strong>1. é…å»¶ãƒ¢ãƒ¼ãƒ‰</strong> = ä¿¡å·æ©Ÿ<br>
            ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒæ¥ãŸã‚‰ã€æŒ‡å®šæ™‚é–“ã ã‘å¾…ã£ã¦ã‹ã‚‰æ¬¡ã«é€ã‚‹<br>
            <br>
            <strong>2. ãƒ¬ãƒ¼ãƒˆåˆ¶é™ãƒ¢ãƒ¼ãƒ‰</strong> = æµé‡è¨ˆ<br>
            ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå¤§é‡ã«æ¥ã¦ã‚‚ã€ä¸€å®šã®ãƒšãƒ¼ã‚¹ã«èª¿æ•´ã—ã¦é€ã‚‹<br>
            <br>
            <strong>3. ã‚­ãƒ¥ãƒ¼ãƒ¢ãƒ¼ãƒ‰</strong> = ãƒãƒƒãƒ•ã‚¡<br>
            ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ä¸€æ™‚çš„ã«æºœã‚ã¦ã€é©åˆ‡ãªã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§é€ã‚‹
        </div>
        
        <h2>ğŸ” 2. ã‚µãƒ³ãƒ—ãƒ«ãƒ•ãƒ­ãƒ¼ã®è©³ã—ã„è§£èª¬</h2>
        
        <p>ã‚µãƒ³ãƒ—ãƒ«ãƒ•ãƒ­ãƒ¼ã«ã¯ã€Delayãƒãƒ¼ãƒ‰ã®<strong>5ã¤ã®ä¸»è¦ãªä½¿ã„æ–¹</strong>ãŒå«ã¾ã‚Œã¦ã„ã¾ã™:</p>
        
        <h3>ãƒ‘ã‚¿ãƒ¼ãƒ³1: å›ºå®šæ™‚é–“ã®é…å»¶</h3>
        <div class="node-example">
            <span class="node node-inject">inject<br>"Hello"</span>
            <span class="arrow">â†’</span>
            <span class="node node-debug">å³åº§ã«è¡¨ç¤º</span>
            <br><br>
            <span style="margin-left: 100px;">â†“</span>
            <br>
            <span style="margin-left: 70px;"><span class="node node-delay">delay<br>3ç§’</span></span>
            <span class="arrow">â†’</span>
            <span class="node node-change">change<br>"Goodbye"</span>
            <span class="arrow">â†’</span>
            <span class="node node-debug">3ç§’å¾Œã«è¡¨ç¤º</span>
        </div>
        <p>Injectã‚’æŠ¼ã™ã¨ã€ã™ãã«"Hello"ãŒè¡¨ç¤ºã•ã‚Œã€3ç§’å¾Œã«"Goodbye"ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
        
        <h3>ãƒ‘ã‚¿ãƒ¼ãƒ³2: msg.delayã§å‹•çš„ã«é…å»¶æ™‚é–“ã‚’æŒ‡å®š</h3>
        <div class="node-example">
            <span class="node node-inject">inject<br>delay=1000ms</span>
            <span class="arrow">â†’</span>
            <span class="node node-delay">å‹•çš„é…å»¶</span>
            <span class="arrow">â†’</span>
            <span class="node node-debug">1ç§’å¾Œ</span>
            <br><br>
            <span class="node node-inject">inject<br>delay=10000ms</span>
            <span class="arrow">â†’</span>
            <span class="node node-delay">å‹•çš„é…å»¶</span>
            <span class="arrow">â†’</span>
            <span class="node node-debug">10ç§’å¾Œ</span>
        </div>
        <p>ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã”ã¨ã«ç•°ãªã‚‹é…å»¶æ™‚é–“ã‚’æŒ‡å®šã§ãã¾ã™ã€‚msg.delayã«ãƒŸãƒªç§’å˜ä½ã§æŒ‡å®šã—ã¾ã™ã€‚</p>
        
        <h3>ãƒ‘ã‚¿ãƒ¼ãƒ³3: reset/flushã§ã‚­ãƒ¥ãƒ¼ã‚’åˆ¶å¾¡</h3>
        <div class="node-example">
            <span class="node node-inject">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡</span>
            <span class="arrow">â†’</span>
            <span class="node node-delay">10ç§’é…å»¶</span>
            <span class="arrow">â†’</span>
            <span class="node node-debug">debug</span>
            <br><br>
            <span class="node node-inject">reset</span>
            <span class="arrow">â†’</span>
            <span style="color: #aaa;">å¾…æ©Ÿä¸­ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‰Šé™¤</span>
            <br><br>
            <span class="node node-inject">flush</span>
            <span class="arrow">â†’</span>
            <span style="color: #aaa;">å¾…æ©Ÿä¸­ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å³åº§ã«é€ä¿¡</span>
        </div>
        <p>resetã§å¾…æ©Ÿä¸­ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã€flushã§å³åº§ã«é€ä¿¡ã§ãã¾ã™ã€‚</p>
        
        <h3>ãƒ‘ã‚¿ãƒ¼ãƒ³4: ãƒ¬ãƒ¼ãƒˆåˆ¶é™(1ç§’ã«1ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸)</h3>
        <div class="node-example">
            <span class="node node-inject">é…åˆ—[0-9]</span>
            <span class="arrow">â†’</span>
            <span class="node node-split">split</span>
            <span class="arrow">â†’</span>
            <span class="node node-delay">1ç§’ã«1å€‹</span>
            <span class="arrow">â†’</span>
            <span class="node node-debug">1ç§’é–“éš”</span>
        </div>
        <p>10å€‹ã®è¦ç´ ãŒä¸€åº¦ã«æ¥ã¦ã‚‚ã€1ç§’ã«1å€‹ãšã¤å‡¦ç†ã•ã‚Œã¾ã™ã€‚</p>
        
        <h3>ãƒ‘ã‚¿ãƒ¼ãƒ³5: ãƒˆãƒ”ãƒƒã‚¯ã”ã¨ã®ãƒ¬ãƒ¼ãƒˆåˆ¶é™</h3>
        <div class="node-example">
            <span class="node node-inject">apple: 1,2,3<br>orange: 1,2,3<br>banana: 1,2,3</span>
            <span class="arrow">â†’</span>
            <span class="node node-delay">2ç§’ã«1å€‹<br>(ãƒˆãƒ”ãƒƒã‚¯åˆ¥)</span>
            <span class="arrow">â†’</span>
            <span class="node node-debug">æœ€å¾Œã®å€¤ã®ã¿</span>
        </div>
        <p>ãƒˆãƒ”ãƒƒã‚¯ã”ã¨ã«æœ€æ–°ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã ã‘ã‚’é€ä¿¡ã—ã¾ã™ã€‚</p>
        
        <h2>âš™ï¸ 3. Delayãƒãƒ¼ãƒ‰ã®è¨­å®šé …ç›®</h2>
        
        <h3>4ã¤ã®ä¸»è¦ãªå‹•ä½œãƒ¢ãƒ¼ãƒ‰</h3>
        
        <div class="feature-grid">
            <div class="feature-card">
                <h4><span class="mode-badge badge-delay">Delay</span> å›ºå®šé…å»¶</h4>
                <p>æŒ‡å®šã—ãŸæ™‚é–“ã ã‘ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é…ã‚‰ã›ã‚‹</p>
                <ul>
                    <li>ç§’/åˆ†/æ™‚é–“å˜ä½ã§æŒ‡å®š</li>
                    <li>ã™ã¹ã¦ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é…å»¶</li>
                    <li>é †ç•ªã¯ä¿æŒã•ã‚Œã‚‹</li>
                </ul>
            </div>
            
            <div class="feature-card">
                <h4><span class="mode-badge badge-delay">Delay (override)</span> å¯å¤‰é…å»¶</h4>
                <p>msg.delayã§å‹•çš„ã«é…å»¶æ™‚é–“ã‚’æŒ‡å®š</p>
                <ul>
                    <li>ãƒŸãƒªç§’å˜ä½ã§æŒ‡å®š</li>
                    <li>ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã”ã¨ã«ç•°ãªã‚‹é…å»¶</li>
                    <li>æŸ”è»Ÿãªåˆ¶å¾¡ãŒå¯èƒ½</li>
                </ul>
            </div>
            
            <div class="feature-card">
                <h4><span class="mode-badge badge-rate">Rate Limit</span> ãƒ¬ãƒ¼ãƒˆåˆ¶é™</h4>
                <p>æŒ‡å®šã—ãŸãƒšãƒ¼ã‚¹ã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æµã™</p>
                <ul>
                    <li>1ç§’ã«ä½•å€‹ãªã©æŒ‡å®š</li>
                    <li>è¶…éåˆ†ã¯å¾…æ©Ÿã¾ãŸã¯ç ´æ£„</li>
                    <li>APIåˆ¶é™å¯¾ç­–ã«æœ‰åŠ¹</li>
                </ul>
            </div>
            
            <div class="feature-card">
                <h4><span class="mode-badge badge-queue">Rate Limit (topic)</span> ãƒˆãƒ”ãƒƒã‚¯åˆ¥åˆ¶é™</h4>
                <p>ãƒˆãƒ”ãƒƒã‚¯ã”ã¨ã«ç‹¬ç«‹ã—ã¦ãƒ¬ãƒ¼ãƒˆåˆ¶é™</p>
                <ul>
                    <li>æœ€æ–°ã®å€¤ã®ã¿ä¿æŒ</li>
                    <li>å¤ã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ç ´æ£„</li>
                    <li>ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã«æœ€é©</li>
                </ul>
            </div>
        </div>
        
        <h3>ğŸ“‹ è©³ç´°è¨­å®šé …ç›®</h3>
        
        <table>
            <tr>
                <th>è¨­å®šé …ç›®</th>
                <th>èª¬æ˜</th>
                <th>ä¾‹</th>
            </tr>
            <tr>
                <td>Action</td>
                <td>å‹•ä½œãƒ¢ãƒ¼ãƒ‰</td>
                <td>Delay / Rate Limit</td>
            </tr>
            <tr>
                <td>For</td>
                <td>é…å»¶æ™‚é–“</td>
                <td>3 seconds / 500 milliseconds</td>
            </tr>
            <tr>
                <td>Rate</td>
                <td>ãƒ¬ãƒ¼ãƒˆ(å€‹æ•°/æ™‚é–“)</td>
                <td>1 message per 1 second</td>
            </tr>
            <tr>
                <td>Drop intermediate messages</td>
                <td>å¾…æ©Ÿä¸­ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç ´æ£„</td>
                <td>ON: æœ€æ–°ã®ã¿ / OFF: ã™ã¹ã¦ä¿æŒ</td>
            </tr>
            <tr>
                <td>Allow override by msg.delay</td>
                <td>msg.delayã§ä¸Šæ›¸ãå¯èƒ½ã«</td>
                <td>å‹•çš„é…å»¶ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆON</td>
            </tr>
            <tr>
                <td>Random delay</td>
                <td>ãƒ©ãƒ³ãƒ€ãƒ ãªé…å»¶æ™‚é–“</td>
                <td>1-5ç§’ã®ç¯„å›²ã§ãƒ©ãƒ³ãƒ€ãƒ </td>
            </tr>
        </table>
        
        <h3>ğŸ”§ resetã¨flushã®ä½¿ã„æ–¹</h3>
        
        <div class="important">
            <p><strong>reset</strong>ã¨<strong>flush</strong>ã¯ã€Delayãƒãƒ¼ãƒ‰ã«å¯¾ã™ã‚‹ç‰¹æ®Šãªåˆ¶å¾¡ã‚³ãƒãƒ³ãƒ‰ã§ã™ã€‚</p>
            
            <p><strong>reset:</strong></p>
            <ul>
                <li>å¾…æ©Ÿä¸­ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã™ã¹ã¦å‰Šé™¤</li>
                <li>msg.resetã‚’trueã«è¨­å®š</li>
                <li>ä½¿ç”¨ä¾‹: ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ“ä½œã€ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã®ã‚¯ãƒªã‚¢</li>
            </ul>
            
            <p><strong>flush:</strong></p>
            <ul>
                <li>å¾…æ©Ÿä¸­ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å³åº§ã«é€ä¿¡</li>
                <li>msg.flushã‚’trueã«è¨­å®š</li>
                <li>ä½¿ç”¨ä¾‹: ç·Šæ€¥é€ä¿¡ã€ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå‡¦ç†</li>
            </ul>
            
            <p><strong>è¨­å®šæ–¹æ³•:</strong></p>
            <div class="code-block">
// Injectãƒãƒ¼ãƒ‰ã§ä»¥ä¸‹ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è¿½åŠ 
msg.reset = true;  // ã¾ãŸã¯
msg.flush = true;
            </div>
        </div>
        
        <h2>ğŸ’¡ 4. Delayãƒãƒ¼ãƒ‰ã®å®Ÿç”¨çš„ãªä½¿ã„æ–¹</h2>
        
        <h3>å®Ÿéš›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã®æ´»ç”¨ä¾‹</h3>
        
        <h4>ä¾‹1: APIå‘¼ã³å‡ºã—ã®ãƒ¬ãƒ¼ãƒˆåˆ¶é™</h4>
        <div class="node-example">
            <span class="node node-inject">å¤§é‡ãƒ‡ãƒ¼ã‚¿</span>
            <span class="arrow">â†’</span>
            <span class="node node-split">åˆ†å‰²</span>
            <span class="arrow">â†’</span>
            <span class="node node-delay">1ç§’ã«1å€‹</span>
            <span class="arrow">â†’</span>
            <span class="node node-debug">APIé€ä¿¡</span>
        </div>
        <p>APIã®åˆ¶é™(ä¾‹: 1ç§’ã«1ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¾ã§)ã‚’å®ˆã‚ŠãªãŒã‚‰å‡¦ç†ã—ã¾ã™ã€‚</p>
        
        <h4>ä¾‹2: ãƒãƒ£ã‚¿ãƒªãƒ³ã‚°é˜²æ­¢</h4>
        <div class="node-example">
            <span class="node node-inject">ãƒœã‚¿ãƒ³é€£æ‰“</span>
            <span class="arrow">â†’</span>
            <span class="node node-delay">1ç§’ã«1å€‹<br>æœ€æ–°ã®ã¿</span>
            <span class="arrow">â†’</span>
            <span class="node node-debug">å‡¦ç†</span>
        </div>
        <p>çŸ­æ™‚é–“ã«ä½•åº¦ã‚‚æŠ¼ã•ã‚Œã¦ã‚‚ã€æœ€å¾Œã®1å›ã ã‘å‡¦ç†ã—ã¾ã™ã€‚</p>
        
        <h4>ä¾‹3: ã‚¿ã‚¤ãƒãƒ¼æ©Ÿèƒ½</h4>
        <div class="node-example">
            <span class="node node-inject">é–‹å§‹</span>
            <span class="arrow">â†’</span>
            <span class="node node-delay">5ç§’</span>
            <span class="arrow">â†’</span>
            <span class="node node-debug">æ™‚é–“åˆ‡ã‚Œé€šçŸ¥</span>
            <br><br>
            <span class="node node-inject">ã‚­ãƒ£ãƒ³ã‚»ãƒ«<br>(reset)</span>
            <span class="arrow">â†’</span>
            <span style="color: #aaa;">ã‚¿ã‚¤ãƒãƒ¼è§£é™¤</span>
        </div>
        <p>ä¸€å®šæ™‚é–“å¾Œã«å‹•ä½œã—ã€é€”ä¸­ã§ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã‚‚ã§ãã¾ã™ã€‚</p>
        
        <h2>ğŸ“ 5. ç·´ç¿’å•é¡Œ</h2>
        
        <div class="exercise">
            <h3>ç·´ç¿’å•é¡Œ 1: ã‚·ãƒ³ãƒ—ãƒ«ãªé…å»¶ <span class="difficulty difficulty-easy">åˆç´š</span></h3>
            
            <h4>ğŸ¯ ç›®æ¨™</h4>
            <p>ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’2ç§’é…å»¶ã•ã›ã¦ã‹ã‚‰è¡¨ç¤ºã™ã‚‹</p>
            
            <h4>ğŸ“‹ è¦ä»¶</h4>
            <ol>
                <li>Injectãƒãƒ¼ãƒ‰ã§ã€Œå‡¦ç†é–‹å§‹ã€ã¨ã„ã†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡</li>
                <li>Delayãƒãƒ¼ãƒ‰ã§2ç§’é…å»¶</li>
                <li>Changeãƒãƒ¼ãƒ‰ã§ã€Œå‡¦ç†å®Œäº†ã€ã«å¤‰æ›´</li>
                <li>Debugãƒãƒ¼ãƒ‰ã§è¡¨ç¤º</li>
            </ol>
            
            <h4>ğŸ’­ ãƒ’ãƒ³ãƒˆ</h4>
            
            <p><strong>ğŸ¯ Delayãƒãƒ¼ãƒ‰ã®è¨­å®š(è‡ªåˆ†ã§è¨­å®šã—ã¦ã¿ã‚ˆã†):</strong></p>
            <ul>
                <li>Actionã¯ä½•ã‚’é¸ã¶?</li>
                <li>é…å»¶æ™‚é–“ã¯?</li>
                <li>å˜ä½ã¯?</li>
            </ul>
            
            <p><strong>ğŸ”¢ Injectãƒãƒ¼ãƒ‰ã®è¨­å®š(ãã®ã¾ã¾è¨­å®šã—ã¦ãã ã•ã„):</strong></p>
            <ul>
                <li>Payload: stringå‹</li>
                <li>å€¤: <code>å‡¦ç†é–‹å§‹</code></li>
            </ul>
            
            <p><strong>ğŸ”§ Changeãƒãƒ¼ãƒ‰ã®è©³ç´°è¨­å®š:</strong></p>
            <div class="important">
                <p>Changeãƒãƒ¼ãƒ‰ã§1ã¤ã®ãƒ«ãƒ¼ãƒ«ã‚’è¿½åŠ :</p>
                <ul>
                    <li>å‹•ä½œ: Set(è¨­å®š)</li>
                    <li>å¯¾è±¡: <code>msg.payload</code></li>
                    <li>å€¤: <code>å‡¦ç†å®Œäº†</code> (stringå‹)</li>
                </ul>
            </div>
            
            <details>
                <summary>ğŸ“¦ è§£ç­”ãƒ•ãƒ­ãƒ¼ (ã‚¯ãƒªãƒƒã‚¯ã—ã¦è¡¨ç¤º)</summary>
                <div class="flow-json">
[
    {
        "id": "ex1_inject",
        "type": "inject",
        "z": "exercise1",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "å‡¦ç†é–‹å§‹",
        "payloadType": "str",
        "x": 120,
        "y": 100,
        "wires": [
            ["ex1_delay"]
        ]
    },
    {
        "id": "ex1_delay",
        "type": "delay",
        "z": "exercise1",
        "name": "2ç§’é…å»¶",
        "pauseType": "delay",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 280,
        "y": 100,
        "wires": [
            ["ex1_change"]
        ]
    },
    {
        "id": "ex1_change",
        "type": "change",
        "z": "exercise1",
        "name": "å®Œäº†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "å‡¦ç†å®Œäº†",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 440,
        "y": 100,
        "wires": [
            ["ex1_debug"]
        ]
    },
    {
        "id": "ex1_debug",
        "type": "debug",
        "z": "exercise1",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 610,
        "y": 100,
        "wires": []
    }
]
                </div>
                <p><strong>âœ… å‹•ä½œç¢ºèª:</strong></p>
                <ul>
                    <li>Injectã‚’ã‚¯ãƒªãƒƒã‚¯</li>
                    <li>2ç§’å¾…ã¤</li>
                    <li>ã€Œå‡¦ç†å®Œäº†ã€ã¨è¡¨ç¤ºã•ã‚Œã‚‹</li>
                </ul>
            </details>
        </div>
        
        <div class="exercise">
            <h3>ç·´ç¿’å•é¡Œ 2: ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ã‚¿ã‚¤ãƒãƒ¼ <span class="difficulty difficulty-medium">ä¸­ç´š</span></h3>
            
            <h4>ğŸ¯ ç›®æ¨™</h4>
            <p>5ç§’ã®ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ã‚¿ã‚¤ãƒãƒ¼ã‚’ä½œæˆã—ã€é€”ä¸­ã§ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹</p>
            
            <h4>ğŸ“‹ è¦ä»¶</h4>
            <ol>
                <li>ã€Œé–‹å§‹ã€ãƒœã‚¿ãƒ³: ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ã‚’é–‹å§‹(5ç§’å¾Œã«é€šçŸ¥)</li>
                <li>ã€Œã‚­ãƒ£ãƒ³ã‚»ãƒ«ã€ãƒœã‚¿ãƒ³: ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ã‚’ä¸­æ­¢</li>
                <li>æ™‚é–“åˆ‡ã‚Œã«ãªã£ãŸã‚‰ã€Œã‚¿ã‚¤ãƒ ã‚¢ãƒƒãƒ—!ã€ã¨è¡¨ç¤º</li>
            </ol>
            
            <h4>ğŸ’­ ãƒ’ãƒ³ãƒˆ</h4>
            
            <p><strong>ğŸ¯ Delayãƒãƒ¼ãƒ‰ã®è¨­å®š(è‡ªåˆ†ã§è€ƒãˆã¦ã¿ã‚ˆã†):</strong></p>
            <ul>
                <li>ä½•ç§’é…å»¶ã•ã›ã‚‹?</li>
                <li>ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã‚’å®Ÿç¾ã™ã‚‹ã«ã¯?</li>
            </ul>
            
            <p><strong>ğŸ”¢ Injectãƒãƒ¼ãƒ‰1(é–‹å§‹)ã®è¨­å®š:</strong></p>
            <ul>
                <li>åå‰: <code>é–‹å§‹</code></li>
                <li>Payload: stringå‹ã§ <code>ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³é–‹å§‹</code></li>
            </ul>
            
            <p><strong>ğŸ”¢ Injectãƒãƒ¼ãƒ‰2(ã‚­ãƒ£ãƒ³ã‚»ãƒ«)ã®è¨­å®š:</strong></p>
            <div class="important">
                <p>ã‚­ãƒ£ãƒ³ã‚»ãƒ«ç”¨ã®Injectãƒãƒ¼ãƒ‰ã®è¨­å®š:</p>
                <ul>
                    <li>åå‰: <code>ã‚­ãƒ£ãƒ³ã‚»ãƒ«</code></li>
                    <li>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£1: <code>msg.reset</code> = <code>true</code> (booleanå‹)</li>
                </ul>
                <p>â€» Payloadã¯ä¸è¦ã§ã™ã€‚msg.resetã ã‘è¨­å®šã—ã¦ãã ã•ã„ã€‚</p>
            </div>
            
            <p><strong>ğŸ”§ Changeãƒãƒ¼ãƒ‰ã®è¨­å®š:</strong></p>
            <div class="important">
                <ul>
                    <li>å‹•ä½œ: Set(è¨­å®š)</li>
                    <li>å¯¾è±¡: <code>msg.payload</code></li>
                    <li>å€¤: <code>ã‚¿ã‚¤ãƒ ã‚¢ãƒƒãƒ—!</code> (stringå‹)</li>
                </ul>
            </div>
            
            <p><strong>ğŸ”€ ãƒ•ãƒ­ãƒ¼ã®æ¥ç¶š:</strong></p>
            <ul>
                <li>ã€Œé–‹å§‹ã€Inject â†’ Delay â†’ Change â†’ Debug</li>
                <li>ã€Œã‚­ãƒ£ãƒ³ã‚»ãƒ«ã€Inject â†’ Delay (åŒã˜Delayãƒãƒ¼ãƒ‰)</li>
            </ul>
            
            <details>
                <summary>ğŸ“¦ è§£ç­”ãƒ•ãƒ­ãƒ¼ (ã‚¯ãƒªãƒƒã‚¯ã—ã¦è¡¨ç¤º)</summary>
                <div class="flow-json">
[
    {
        "id": "ex2_inject_start",
        "type": "inject",
        "z": "exercise2",
        "name": "é–‹å§‹",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³é–‹å§‹",
        "payloadType": "str",
        "x": 110,
        "y": 100,
        "wires": [
            ["ex2_delay"]
        ]
    },
    {
        "id": "ex2_inject_cancel",
        "type": "inject",
        "z": "exercise2",
        "name": "ã‚­ãƒ£ãƒ³ã‚»ãƒ«",
        "props": [
            {
                "p": "reset",
                "v": "true",
                "vt": "bool"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 120,
        "y": 160,
        "wires": [
            ["ex2_delay"]
        ]
    },
    {
        "id": "ex2_delay",
        "type": "delay",
        "z": "exercise2",
        "name": "5ç§’ã‚¿ã‚¤ãƒãƒ¼",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 310,
        "y": 100,
        "wires": [
            ["ex2_change"]
        ]
    },
    {
        "id": "ex2_change",
        "type": "change",
        "z": "exercise2",
        "name": "ã‚¿ã‚¤ãƒ ã‚¢ãƒƒãƒ—",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "ã‚¿ã‚¤ãƒ ã‚¢ãƒƒãƒ—!",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 490,
        "y": 100,
        "wires": [
            ["ex2_debug"]
        ]
    },
    {
        "id": "ex2_debug",
        "type": "debug",
        "z": "exercise2",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 650,
        "y": 100,
        "wires": []
    }
]
                </div>
                <p><strong>âœ… å‹•ä½œç¢ºèª:</strong></p>
                <ul>
                    <li>ã€Œé–‹å§‹ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ â†’ 5ç§’å¾Œã«ã€Œã‚¿ã‚¤ãƒ ã‚¢ãƒƒãƒ—!ã€ãŒè¡¨ç¤º</li>
                    <li>ã€Œé–‹å§‹ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ â†’ 3ç§’å¾Œã«ã€Œã‚­ãƒ£ãƒ³ã‚»ãƒ«ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ â†’ ä½•ã‚‚è¡¨ç¤ºã•ã‚Œãªã„</li>
                </ul>
            </details>
        </div>
        
        <div class="exercise">
            <h3>ç·´ç¿’å•é¡Œ 3: APIå‘¼ã³å‡ºã—ã®ãƒ¬ãƒ¼ãƒˆåˆ¶é™ <span class="difficulty difficulty-medium">ä¸­ç´š</span></h3>
            
            <h4>ğŸ¯ ç›®æ¨™</h4>
            <p>10å€‹ã®IDã‚’æŒã¤é…åˆ—ã‹ã‚‰ã€1ç§’ã«1å›ã®ãƒšãƒ¼ã‚¹ã§APIå‘¼ã³å‡ºã—ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆã™ã‚‹</p>
            
            <h4>ğŸ“‹ è¦ä»¶</h4>
            <ol>
                <li>Injectãƒãƒ¼ãƒ‰ã§10å€‹ã®IDã‚’å«ã‚€é…åˆ—ã‚’é€ä¿¡</li>
                <li>Splitãƒãƒ¼ãƒ‰ã§é…åˆ—ã‚’å€‹åˆ¥ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«åˆ†å‰²</li>
                <li>Delayãƒãƒ¼ãƒ‰ã§1ç§’ã«1å€‹ã®ãƒšãƒ¼ã‚¹ã«åˆ¶é™</li>
                <li>Functionãƒãƒ¼ãƒ‰ã§ã€ŒAPIå‘¼ã³å‡ºã—: ID=Xã€ã¨è¡¨ç¤º</li>
                <li>Debugãƒãƒ¼ãƒ‰ã§çµæœã‚’è¡¨ç¤º</li>
            </ol>
            
            <h4>ğŸ’­ ãƒ’ãƒ³ãƒˆ</h4>
            
            <p><strong>ğŸ¯ Delayãƒãƒ¼ãƒ‰ã®è¨­å®š(è‡ªåˆ†ã§è€ƒãˆã¦ã¿ã‚ˆã†):</strong></p>
            <ul>
                <li>Actionã¯ä½•ã‚’é¸ã¶?</li>
                <li>ãƒ¬ãƒ¼ãƒˆã¯ã©ã†è¨­å®šã™ã‚‹?</li>
            </ul>
            
            <p><strong>ğŸ”¢ Injectãƒãƒ¼ãƒ‰ã®è¨­å®š(ãã®ã¾ã¾è¨­å®šã—ã¦ãã ã•ã„):</strong></p>
            <div class="important">
                <ul>
                    <li>Payload: JSONå‹ã‚’é¸æŠ</li>
                    <li>ä»¥ä¸‹ã®JSONã‚’å…¥åŠ›:</li>
                </ul>
                <div class="code-block">
[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
                </div>
            </div>
            
            <p><strong>ğŸ”€ Splitãƒãƒ¼ãƒ‰ã®è¨­å®š:</strong></p>
            <ul>
                <li>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã®ã¾ã¾ã§OK</li>
                <li>é…åˆ—ã‚’è‡ªå‹•çš„ã«åˆ†å‰²ã—ã¦ãã‚Œã¾ã™</li>
            </ul>
            
            <p><strong>ğŸ“ Functionãƒãƒ¼ãƒ‰ã®å®Œå…¨ãªã‚³ãƒ¼ãƒ‰(ãã®ã¾ã¾ã‚³ãƒ”ãƒ¼ã—ã¦OK):</strong></p>
            <div class="code-block">
// APIå‘¼ã³å‡ºã—ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ
msg.payload = "APIå‘¼ã³å‡ºã—: ID=" + msg.payload;
return msg;
            </div>
            
            <details>
                <summary>ğŸ“¦ è§£ç­”ãƒ•ãƒ­ãƒ¼ (ã‚¯ãƒªãƒƒã‚¯ã—ã¦è¡¨ç¤º)</summary>
                <div class="flow-json">
[
    {
        "id": "ex3_inject",
        "type": "inject",
        "z": "exercise3",
        "name": "IDé…åˆ—",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[1,2,3,4,5,6,7,8,9,10]",
        "payloadType": "json",
        "x": 120,
        "y": 100,
        "wires": [
            ["ex3_split"]
        ]
    },
    {
        "id": "ex3_split",
        "type": "split",
        "z": "exercise3",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 270,
        "y": 100,
        "wires": [
            ["ex3_delay"]
        ]
    },
    {
        "id": "ex3_delay",
        "type": "delay",
        "z": "exercise3",
        "name": "1ç§’ã«1å€‹",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 400,
        "y": 100,
        "wires": [
            ["ex3_function"]
        ]
    },
    {
        "id": "ex3_function",
        "type": "function",
        "z": "exercise3",
        "name": "APIå‘¼ã³å‡ºã—",
        "func": "// APIå‘¼ã³å‡ºã—ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ\nmsg.payload = \"APIå‘¼ã³å‡ºã—: ID=\" + msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 560,
        "y": 100,
        "wires": [
            ["ex3_debug"]
        ]
    },
    {
        "id": "ex3_debug",
        "type": "debug",
        "z": "exercise3",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 710,
        "y": 100,
        "wires": []
    }
]
                </div>
                <p><strong>âœ… å‹•ä½œç¢ºèª:</strong></p>
                <ul>
                    <li>Injectã‚’ã‚¯ãƒªãƒƒã‚¯</li>
                    <li>1ç§’ã”ã¨ã«ã€ŒAPIå‘¼ã³å‡ºã—: ID=1ã€ã€ŒAPIå‘¼ã³å‡ºã—: ID=2ã€...ã¨è¡¨ç¤º</li>
                    <li>10å€‹ã™ã¹ã¦è¡¨ç¤ºã•ã‚Œã‚‹ã¾ã§10ç§’ã‹ã‹ã‚‹</li>
                </ul>
            </details>
        </div>
        
        <div class="exercise">
            <h3>ç·´ç¿’å•é¡Œ 4: ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã®ãƒãƒƒãƒ•ã‚¡ãƒªãƒ³ã‚° <span class="difficulty difficulty-hard">ä¸Šç´š</span></h3>
            
            <h4>ğŸ¯ ç›®æ¨™</h4>
            <p>é«˜é »åº¦ã§æ›´æ–°ã•ã‚Œã‚‹ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’ã€ãƒˆãƒ”ãƒƒã‚¯ã”ã¨ã«2ç§’ã«1å›ã ã‘é€ä¿¡ã™ã‚‹</p>
            
            <h4>ğŸ“‹ ã‚·ãƒŠãƒªã‚ª</h4>
            <p>3ã¤ã®ã‚»ãƒ³ã‚µãƒ¼(temperature, humidity, pressure)ãŒãã‚Œãã‚Œ0.5ç§’ã”ã¨ã«ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã—ã¾ã™ã€‚ã—ã‹ã—ã€ã‚¯ãƒ©ã‚¦ãƒ‰ã¸ã®é€ä¿¡ã¯2ç§’ã«1å›ã«åˆ¶é™ã—ãŸã„ã€‚å„ã‚»ãƒ³ã‚µãƒ¼ã®æœ€æ–°å€¤ã ã‘ã‚’é€ä¿¡ã—ã¾ã™ã€‚</p>
            
            <h4>ğŸ“‹ è¦ä»¶</h4>
            <ol>
                <li>Injectãƒãƒ¼ãƒ‰ã§3ã¤ã®ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’é«˜é »åº¦ã§é€ä¿¡(0.5ç§’ã”ã¨)</li>
                <li>Changeãƒãƒ¼ãƒ‰ã§topicã‚’è¨­å®š(temperature/humidity/pressure)</li>
                <li>Delayãƒãƒ¼ãƒ‰ã§ãƒˆãƒ”ãƒƒã‚¯ã”ã¨ã«2ç§’ã«1å€‹ã®ãƒšãƒ¼ã‚¹ã«åˆ¶é™</li>
                <li>ä¸­é–“ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ç ´æ£„ã—ã€æœ€æ–°ã®ã¿ä¿æŒ</li>
                <li>Functionãƒãƒ¼ãƒ‰ã§æ•´å½¢ã—ã¦è¡¨ç¤º</li>
            </ol>
            
            <h4>ğŸ’­ ãƒ’ãƒ³ãƒˆ</h4>
            
            <p><strong>ğŸ¯ Delayãƒãƒ¼ãƒ‰ã®è¨­å®š(è‡ªåˆ†ã§è€ƒãˆã¦ã¿ã‚ˆã†):</strong></p>
            <ul>
                <li>ã©ã®Actionã‚’ä½¿ã†?</li>
                <li>ã€ŒAll messagesã€ã¨ã€ŒFor each topicã€ã®ã©ã¡ã‚‰ã‚’é¸ã¶?</li>
                <li>ã€ŒDrop intermediate messagesã€ã¯ã©ã†ã™ã‚‹?</li>
            </ul>
            
            <p><strong>ğŸ”¢ Injectãƒãƒ¼ãƒ‰(æ¸©åº¦)ã®è¨­å®š:</strong></p>
            <div class="important">
                <ul>
                    <li>åå‰: <code>æ¸©åº¦ã‚»ãƒ³ã‚µãƒ¼</code></li>
                    <li>Repeat: interval - 0.5 seconds</li>
                    <li>Payload: JSONataå¼</li>
                    <li>å€¤: <code>$round($random() * 10 + 20, 1)</code></li>
                    <li>â€» ã“ã‚Œã¯20-30â„ƒã®ç¯„å›²ã§ãƒ©ãƒ³ãƒ€ãƒ ãªæ¸©åº¦ã‚’ç”Ÿæˆã—ã¾ã™</li>
                </ul>
            </div>
            
            <p><strong>ğŸ”§ Changeãƒãƒ¼ãƒ‰(æ¸©åº¦)ã®è¨­å®š:</strong></p>
            <div class="important">
                <ul>
                    <li>å‹•ä½œ: Set(è¨­å®š)</li>
                    <li>å¯¾è±¡: <code>msg.topic</code></li>
                    <li>å€¤: <code>temperature</code> (stringå‹)</li>
                </ul>
            </div>
            
            <p><strong>ğŸ“ åŒæ§˜ã«æ¹¿åº¦ã¨æ°—åœ§ã‚‚ä½œæˆ:</strong></p>
            <ul>
                <li>æ¹¿åº¦: 40-80% â†’ <code>$round($random() * 40 + 40, 1)</code></li>
                <li>æ°—åœ§: 990-1030hPa â†’ <code>$round($random() * 40 + 990, 1)</code></li>
            </ul>
            
            <p><strong>ğŸ“ Functionãƒãƒ¼ãƒ‰ã®å®Œå…¨ãªã‚³ãƒ¼ãƒ‰(ãã®ã¾ã¾ã‚³ãƒ”ãƒ¼ã—ã¦OK):</strong></p>
            <div class="code-block">
// ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’æ•´å½¢
let sensorName = {
    "temperature": "æ¸©åº¦",
    "humidity": "æ¹¿åº¦",
    "pressure": "æ°—åœ§"
};

let unit = {
    "temperature": "â„ƒ",
    "humidity": "%",
    "pressure": "hPa"
};

msg.payload = sensorName[msg.topic] + ": " + msg.payload + unit[msg.topic];
return msg;
            </div>
            
            <details>
                <summary>ğŸ“¦ è§£ç­”ãƒ•ãƒ­ãƒ¼ (ã‚¯ãƒªãƒƒã‚¯ã—ã¦è¡¨ç¤º)</summary>
                <div class="flow-json">
[
    {
        "id": "ex4_inject_temp",
        "type": "inject",
        "z": "exercise4",
        "name": "æ¸©åº¦ã‚»ãƒ³ã‚µãƒ¼",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "0.5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "$round($random() * 10 + 20, 1)",
        "payloadType": "jsonata",
        "x": 140,
        "y": 100,
        "wires": [
            ["ex4_change_temp"]
        ]
    },
    {
        "id": "ex4_change_temp",
        "type": "change",
        "z": "exercise4",
        "name": "topic=temperature",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "temperature",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 350,
        "y": 100,
        "wires": [
            ["ex4_delay"]
        ]
    },
    {
        "id": "ex4_inject_humid",
        "type": "inject",
        "z": "exercise4",
        "name": "æ¹¿åº¦ã‚»ãƒ³ã‚µãƒ¼",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "0.5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "$round($random() * 40 + 40, 1)",
        "payloadType": "jsonata",
        "x": 140,
        "y": 160,
        "wires": [
            ["ex4_change_humid"]
        ]
    },
    {
        "id": "ex4_change_humid",
        "type": "change",
        "z": "exercise4",
        "name": "topic=humidity",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "humidity",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 160,
        "wires": [
            ["ex4_delay"]
        ]
    },
    {
        "id": "ex4_inject_press",
        "type": "inject",
        "z": "exercise4",
        "name": "æ°—åœ§ã‚»ãƒ³ã‚µãƒ¼",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "0.5",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "$round($random() * 40 + 990, 1)",
        "payloadType": "jsonata",
        "x": 140,
        "y": 220,
        "wires": [
            ["ex4_change_press"]
        ]
    },
    {
        "id": "ex4_change_press",
        "type": "change",
        "z": "exercise4",
        "name": "topic=pressure",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "pressure",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 220,
        "wires": [
            ["ex4_delay"]
        ]
    },
    {
        "id": "ex4_delay",
        "type": "delay",
        "z": "exercise4",
        "name": "2ç§’ã«1å€‹(ãƒˆãƒ”ãƒƒã‚¯åˆ¥)",
        "pauseType": "timed",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "2",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "outputs": 1,
        "x": 580,
        "y": 160,
        "wires": [
            ["ex4_function"]
        ]
    },
    {
        "id": "ex4_function",
        "type": "function",
        "z": "exercise4",
        "name": "ãƒ‡ãƒ¼ã‚¿æ•´å½¢",
        "func": "// ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’æ•´å½¢\nlet sensorName = {\n    \"temperature\": \"æ¸©åº¦\",\n    \"humidity\": \"æ¹¿åº¦\",\n    \"pressure\": \"æ°—åœ§\"\n};\n\nlet unit = {\n    \"temperature\": \"â„ƒ\",\n    \"humidity\": \"%\",\n    \"pressure\": \"hPa\"\n};\n\nmsg.payload = sensorName[msg.topic] + \": \" + msg.payload + unit[msg.topic];\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 790,
        "y": 160,
        "wires": [
            ["ex4_debug"]
        ]
    },
    {
        "id": "ex4_debug",
        "type": "debug",
        "z": "exercise4",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 950,
        "y": 160,
        "wires": []
    }
]
                </div>
                <p><strong>âœ… å‹•ä½œç¢ºèª:</strong></p>
                <ul>
                    <li>ãƒ•ãƒ­ãƒ¼ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã¨ã€è‡ªå‹•çš„ã«0.5ç§’ã”ã¨ã«ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ãŒç™ºç”Ÿ</li>
                    <li>Debugã«ã¯2ç§’ã”ã¨ã«è¡¨ç¤ºã•ã‚Œã‚‹</li>
                    <li>å„ã‚»ãƒ³ã‚µãƒ¼ã®æœ€æ–°å€¤ã®ã¿ãŒé€ä¿¡ã•ã‚Œã‚‹</li>
                    <li>ä¾‹: ã€Œæ¸©åº¦: 25.3â„ƒã€ã€Œæ¹¿åº¦: 62.1%ã€ã€Œæ°—åœ§: 1012.5hPaã€</li>
                </ul>
            </details>
        </div>
        
        <h2>ğŸ“ 6. ã¾ã¨ã‚</h2>
        
        <div class="important">
            <h3>Delayãƒãƒ¼ãƒ‰ã®é‡è¦ãƒã‚¤ãƒ³ãƒˆ</h3>
            <ul>
                <li>âœ… <strong>æ™‚é–“åˆ¶å¾¡</strong>: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æµã‚Œã‚’æ™‚é–“çš„ã«åˆ¶å¾¡</li>
                <li>âœ… <strong>4ã¤ã®ãƒ¢ãƒ¼ãƒ‰</strong>: å›ºå®šé…å»¶ã€å¯å¤‰é…å»¶ã€ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã€ãƒˆãƒ”ãƒƒã‚¯åˆ¥åˆ¶é™</li>
                <li>âœ… <strong>reset/flush</strong>: å¾…æ©Ÿä¸­ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’åˆ¶å¾¡ã§ãã‚‹</li>
                <li>âœ… <strong>APIåˆ¶é™å¯¾ç­–</strong>: ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã§å¤–éƒ¨APIã®å‘¼ã³å‡ºã—åˆ¶é™ã‚’å®ˆã‚‹</li>
                <li>âœ… <strong>ãƒãƒ£ã‚¿ãƒªãƒ³ã‚°é˜²æ­¢</strong>: çŸ­æ™‚é–“ã®é€£ç¶šå…¥åŠ›ã‚’æ•´ç†</li>
            </ul>
        </div>
        
        <div class="tip">
            <h3>ğŸ“š æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—</h3>
            <p>Delayãƒãƒ¼ãƒ‰ã‚’ãƒã‚¹ã‚¿ãƒ¼ã—ãŸã‚‰ã€ä»¥ä¸‹ã®ãƒãƒ¼ãƒ‰ã‚‚å­¦ã‚“ã§ã¿ã¾ã—ã‚‡ã†:</p>
            <ul>
                <li><strong>Triggerãƒãƒ¼ãƒ‰</strong>: ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆä»˜ãã®é«˜åº¦ãªåˆ¶å¾¡</li>
                <li><strong>Batchãƒãƒ¼ãƒ‰</strong>: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚°ãƒ«ãƒ¼ãƒ—åŒ–</li>
                <li><strong>Sortãƒãƒ¼ãƒ‰</strong>: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ä¸¦ã³æ›¿ãˆ</li>
                <li><strong>Joinãƒãƒ¼ãƒ‰</strong>: è¤‡æ•°ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’çµåˆ</li>
            </ul>
        </div>
        
        <h2>ğŸ”§ 7. ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°</h2>
        
        <h3>ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ–¹æ³•</h3>
        
        <table>
            <tr>
                <th>å•é¡Œ</th>
                <th>åŸå› </th>
                <th>è§£æ±ºæ–¹æ³•</th>
            </tr>
            <tr>
                <td>ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå‡ºã¦ã“ãªã„</td>
                <td>å¾…æ©Ÿä¸­ã¾ãŸã¯ã‚­ãƒ¥ãƒ¼ã«æºœã¾ã£ã¦ã„ã‚‹</td>
                <td>flushãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ã‚‹ã‹ã€ã—ã°ã‚‰ãå¾…ã¤</td>
            </tr>
            <tr>
                <td>ãƒ¬ãƒ¼ãƒˆåˆ¶é™ãŒåŠ¹ã‹ãªã„</td>
                <td>Actionã®è¨­å®šãƒŸã‚¹</td>
                <td>ã€ŒRate Limitã€ã‚’é¸æŠã—ã¦ã„ã‚‹ã‹ç¢ºèª</td>
            </tr>
            <tr>
                <td>resetãŒåŠ¹ã‹ãªã„</td>
                <td>msg.resetãŒtrueã«ãªã£ã¦ã„ãªã„</td>
                <td>Injectãƒãƒ¼ãƒ‰ã§booleanå‹ã®trueã‚’è¨­å®š</td>
            </tr>
            <tr>
                <td>ãƒˆãƒ”ãƒƒã‚¯åˆ¥åˆ¶é™ãŒæ©Ÿèƒ½ã—ãªã„</td>
                <td>ã€ŒFor each topicã€ãŒé¸ã°ã‚Œã¦ã„ãªã„</td>
                <td>è¨­å®šã‚’ç¢ºèªã—ã€msg.topicãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª</td>
            </tr>
        </table>
        
        <h2>ğŸ”— 8. è¿½åŠ ãƒªã‚½ãƒ¼ã‚¹</h2>
        
        <ul>
            <li><a href="https://nodered.org/docs/user-guide/nodes#delay" target="_blank">Node-REDå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: Delayãƒãƒ¼ãƒ‰</a></li>
            <li><a href="https://cookbook.nodered.org/basic/rate-limit-messages" target="_blank">Node-RED Cookbook: ãƒ¬ãƒ¼ãƒˆåˆ¶é™</a></li>
            <li><a href="https://flows.nodered.org/" target="_blank">Node-RED Flow Library: ã‚µãƒ³ãƒ—ãƒ«ãƒ•ãƒ­ãƒ¼é›†</a></li>
        </ul>
        
        <hr>
        
        <p style="text-align: center; color: #999; margin-top: 40px;">
            <small>ã“ã®ã‚¬ã‚¤ãƒ‰ãŒå½¹ã«ç«‹ã¡ã¾ã—ãŸã‚‰ã€å®Ÿéš›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ç·´ç¿’ã—ã¦ã¿ã¦ãã ã•ã„!<br>
            Delayãƒãƒ¼ãƒ‰ã¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æµã‚Œã‚’åˆ¶å¾¡ã™ã‚‹é‡è¦ãªãƒãƒ¼ãƒ‰ã§ã™ã€‚</small>
        </p>
    </div>
    
    <script>
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ã‚’è¿½åŠ 
        document.addEventListener('DOMContentLoaded', function() {
            // ã™ã¹ã¦ã®.code-blockã¨.flow-jsonã«ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ã‚’è¿½åŠ 
            const codeBlocks = document.querySelectorAll('.code-block, .flow-json');
            
            codeBlocks.forEach(function(block) {
                // ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ã‚’ä½œæˆ
                const button = document.createElement('button');
                button.className = 'copy-button';
                button.textContent = 'ã‚³ãƒ”ãƒ¼';
                
                // ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¿½åŠ 
                button.addEventListener('click', function() {
                    // ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’å–å¾—
                    const code = block.textContent.replace('ã‚³ãƒ”ãƒ¼', '').trim();
                    
                    // ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼
                    navigator.clipboard.writeText(code).then(function() {
                        // æˆåŠŸæ™‚ã®è¦–è¦šçš„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
                        button.textContent = 'ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ!';
                        button.classList.add('copied');
                        
                        // 2ç§’å¾Œã«å…ƒã«æˆ»ã™
                        setTimeout(function() {
                            button.textContent = 'ã‚³ãƒ”ãƒ¼';
                            button.classList.remove('copied');
                        }, 2000);
                    }).catch(function(err) {
                        console.error('ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ:', err);
                        button.textContent = 'ã‚¨ãƒ©ãƒ¼';
                        setTimeout(function() {
                            button.textContent = 'ã‚³ãƒ”ãƒ¼';
                        }, 2000);
                    });
                });
                
                // ãƒœã‚¿ãƒ³ã‚’ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã«è¿½åŠ 
                block.style.position = 'relative';
                block.appendChild(button);
            });
        });
    </script>
</body>
</html>
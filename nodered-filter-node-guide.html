<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Node-RED Filterãƒãƒ¼ãƒ‰(RBE) å®Œå…¨ã‚¬ã‚¤ãƒ‰</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.8;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }
        
        h1 {
            color: #8f0000;
            border-bottom: 3px solid #8f0000;
            padding-bottom: 10px;
        }
        
        h2 {
            color: #c00000;
            margin-top: 30px;
            border-left: 5px solid #c00000;
            padding-left: 15px;
        }
        
        h3 {
            color: #555;
            margin-top: 25px;
        }
        
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .node-example {
            background-color: #2d3133;
            padding: 20px;
            border-radius: 5px;
            margin: 20px 0;
            color: white;
            font-family: 'Courier New', monospace;
        }
        
        .node {
            display: inline-block;
            padding: 8px 15px;
            border-radius: 4px;
            margin: 5px;
            font-weight: bold;
            font-size: 14px;
        }
        
        .node-inject {
            background-color: #3fadb5;
            color: white;
        }
        
        .node-filter {
            background-color: #daa520;
            color: white;
        }
        
        .node-rbe {
            background-color: #daa520;
            color: white;
        }
        
        .node-debug {
            background-color: #87a48d;
            color: white;
        }
        
        .node-split {
            background-color: #e7a070;
            color: white;
        }
        
        .arrow {
            color: #999;
            font-size: 20px;
            margin: 0 10px;
        }
        
        .important {
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }
        
        .tip {
            background-color: #d1ecf1;
            border-left: 4px solid #17a2b8;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }
        
        .code-block {
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 15px;
            margin: 15px 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            position: relative;
        }
        
        .copy-button {
            position: absolute;
            top: 8px;
            right: 8px;
            padding: 6px 12px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            font-family: 'Segoe UI', sans-serif;
            transition: background-color 0.2s;
            z-index: 10;
        }
        
        .copy-button:hover {
            background-color: #0056b3;
        }
        
        .copy-button.copied {
            background-color: #28a745;
        }
        
        .exercise {
            background-color: #e8f5e9;
            border: 2px solid #4caf50;
            border-radius: 8px;
            padding: 20px;
            margin: 25px 0;
        }
        
        .exercise h3 {
            color: #2e7d32;
            margin-top: 0;
        }
        
        .difficulty {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
            margin-left: 10px;
        }
        
        .difficulty-easy {
            background-color: #4caf50;
            color: white;
        }
        
        .difficulty-medium {
            background-color: #ff9800;
            color: white;
        }
        
        .difficulty-hard {
            background-color: #f44336;
            color: white;
        }
        
        ul, ol {
            padding-left: 25px;
        }
        
        li {
            margin: 8px 0;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        
        th {
            background-color: #8f0000;
            color: white;
        }
        
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        .flow-json {
            background-color: #263238;
            color: #aed581;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 400px;
            overflow-y: auto;
            position: relative;
        }
        
        details {
            margin: 15px 0;
        }
        
        summary {
            cursor: pointer;
            padding: 10px;
            background-color: #6c757d;
            color: white;
            border-radius: 4px;
            font-weight: bold;
        }
        
        summary:hover {
            background-color: #5a6268;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .feature-card {
            background-color: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
        }
        
        .feature-card h4 {
            color: #daa520;
            margin-top: 0;
        }
        
        .mode-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: bold;
            margin-right: 5px;
            background-color: #daa520;
            color: white;
        }
        
        .data-flow {
            background-color: #f0f8ff;
            border: 2px solid #4682b4;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .data-flow h4 {
            color: #4682b4;
            margin-top: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” Node-RED Filterãƒãƒ¼ãƒ‰(RBE) å®Œå…¨ã‚¬ã‚¤ãƒ‰</h1>
        
        <p>ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ã€Node-REDã®<strong>Filterãƒãƒ¼ãƒ‰(RBE: Report By Exception)</strong>ã«ã¤ã„ã¦ã€åˆå¿ƒè€…ã®æ–¹ã§ã‚‚ç†è§£ã§ãã‚‹ã‚ˆã†ã«è©³ã—ãèª¬æ˜ã—ã¾ã™ã€‚</p>
        
        <h2>ğŸ“š 1. Filterãƒãƒ¼ãƒ‰(RBE)ã¨ã¯?</h2>
        
        <h3>ğŸ¤” ã€ŒRBEã€ã£ã¦ä½•?</h3>
        <p>
            RBE(Report By Exception)ãƒãƒ¼ãƒ‰ã¯ã€<strong>å€¤ãŒå¤‰åŒ–ã—ãŸæ™‚ã ã‘ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€šéã•ã›ã‚‹</strong>ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãƒãƒ¼ãƒ‰ã§ã™ã€‚
            æ—¥å¸¸ç”Ÿæ´»ã§ä¾‹ãˆã‚‹ã¨ã€<strong>å¤‰åŒ–æ¤œçŸ¥ã‚»ãƒ³ã‚µãƒ¼</strong>ã®ã‚ˆã†ãªã‚‚ã®ã§ã™ã€‚
        </p>
        
        <div class="tip">
            <h3>ğŸ’¡ æ—¥å¸¸ç”Ÿæ´»ã§ã®ä¾‹ãˆ</h3>
            <p><strong>è‡ªå‹•ãƒ‰ã‚¢ã®ã‚»ãƒ³ã‚µãƒ¼</strong></p>
            <ul>
                <li>äººãŒã„ãªã„ â†’ ä½•ã‚‚ã—ãªã„</li>
                <li>äººãŒè¿‘ã¥ã„ãŸ â†’ ãƒ‰ã‚¢ã‚’é–‹ã‘ã‚‹(å¤‰åŒ–ã‚’æ¤œçŸ¥!)</li>
                <li>äººãŒç«‹ã¡æ­¢ã¾ã£ã¦ã„ã‚‹ â†’ ä½•ã‚‚ã—ãªã„(å¤‰åŒ–ãªã—)</li>
                <li>äººãŒé›¢ã‚ŒãŸ â†’ ãƒ‰ã‚¢ã‚’é–‰ã‚ã‚‹(å¤‰åŒ–ã‚’æ¤œçŸ¥!)</li>
            </ul>
            <p>Filterãƒãƒ¼ãƒ‰ã‚‚åŒã˜ã‚ˆã†ã«ã€å€¤ãŒå¤‰åŒ–ã—ãŸæ™‚ã ã‘æ¬¡ã®ãƒãƒ¼ãƒ‰ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ã‚Šã¾ã™!</p>
        </div>
        
        <h3>ğŸ¯ Filterãƒãƒ¼ãƒ‰ãŒã§ãã‚‹ã“ã¨</h3>
        <ul>
            <li>é‡è¤‡ãƒ‡ãƒ¼ã‚¿ã®é™¤å»(åŒã˜å€¤ãŒç¶šãå ´åˆã¯ãƒ–ãƒ­ãƒƒã‚¯)</li>
            <li>ã‚»ãƒ³ã‚µãƒ¼ãƒã‚¤ã‚ºã®é™¤å»</li>
            <li>é€šä¿¡é‡ã®å‰Šæ¸›(å¤‰åŒ–ãŒã‚ã‚‹æ™‚ã ã‘é€ä¿¡)</li>
            <li>ç‰¹å®šã®é–¾å€¤ã‚’è¶…ãˆãŸå¤‰åŒ–ã®ã¿æ¤œçŸ¥</li>
            <li>ç‰¹å®šã®å€¤ã®ã¿ã‚’é€šéã•ã›ã‚‹</li>
        </ul>
        
        <h3>ğŸ“Š åŸºæœ¬çš„ãªå‹•ä½œä¾‹</h3>
        
        <div class="node-example">
            <span class="node node-inject">inject</span>
            <span class="arrow">â†’</span>
            <span class="node node-filter">filter(RBE)</span>
            <span class="arrow">â†’</span>
            <span class="node node-debug">debug</span>
        </div>
        
        <p><strong>å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã®æµã‚Œ:</strong></p>
        <div class="data-flow">
            <h4>å…¥åŠ›: 1 â†’ 2 â†’ 2 â†’ 3</h4>
            <p><strong>RBEãƒ¢ãƒ¼ãƒ‰(å¤‰åŒ–ã®ã¿é€šé):</strong></p>
            <ul>
                <li>1 â†’ âœ… é€šé(åˆå›)</li>
                <li>2 â†’ âœ… é€šé(1ã‹ã‚‰2ã«å¤‰åŒ–)</li>
                <li>2 â†’ âŒ ãƒ–ãƒ­ãƒƒã‚¯(å‰å›ã¨åŒã˜)</li>
                <li>3 â†’ âœ… é€šé(2ã‹ã‚‰3ã«å¤‰åŒ–)</li>
            </ul>
            <p><strong>å‡ºåŠ›: 1 â†’ 2 â†’ 3</strong></p>
        </div>
        
        <h2>âš™ï¸ 2. å‹•ä½œãƒ¢ãƒ¼ãƒ‰ã®è©³ç´°</h2>
        
        <p>Filterãƒãƒ¼ãƒ‰(RBE)ã«ã¯ä¸»ã«4ã¤ã®å‹•ä½œãƒ¢ãƒ¼ãƒ‰ãŒã‚ã‚Šã¾ã™:</p>
        
        <div class="feature-grid">
            <div class="feature-card">
                <h4><span class="mode-badge">rbe</span> åŸºæœ¬ãƒ¢ãƒ¼ãƒ‰</h4>
                <p><strong>å‹•ä½œ:</strong> å€¤ãŒå¤‰åŒ–ã—ãŸæ™‚ã®ã¿é€šé</p>
                <p><strong>ç”¨é€”:</strong> é‡è¤‡ãƒ‡ãƒ¼ã‚¿ã®é™¤å»</p>
                <p><strong>ä¾‹:</strong> [1,2,2,3] â†’ [1,2,3]</p>
            </div>
            
            <div class="feature-card">
                <h4><span class="mode-badge">rbei</span> åˆæœŸå€¤ç„¡è¦–ãƒ¢ãƒ¼ãƒ‰</h4>
                <p><strong>å‹•ä½œ:</strong> åˆæœŸå€¤ã¯è¨˜æ†¶ã™ã‚‹ãŒå‡ºåŠ›ã›ãšã€å¤‰åŒ–æ™‚ã®ã¿é€šé</p>
                <p><strong>ç”¨é€”:</strong> èµ·å‹•æ™‚ã®åˆæœŸå€¤ã‚’é™¤å¤–</p>
                <p><strong>ä¾‹:</strong> [1,2,2] â†’ [2]</p>
            </div>
            
            <div class="feature-card">
                <h4><span class="mode-badge">deadband</span> ãƒ‡ãƒƒãƒ‰ãƒãƒ³ãƒ‰ãƒ¢ãƒ¼ãƒ‰</h4>
                <p><strong>å‹•ä½œ:</strong> æŒ‡å®šã—ãŸé–¾å€¤ä»¥ä¸Šã®å¤‰åŒ–ã®ã¿é€šé</p>
                <p><strong>ç”¨é€”:</strong> ãƒã‚¤ã‚ºé™¤å»ã€å¤§ããªå¤‰åŒ–ã®ã¿æ¤œçŸ¥</p>
                <p><strong>ä¾‹:</strong> [1,2,2,1] â†’ [2,1] (50%é–¾å€¤)</p>
            </div>
            
            <div class="feature-card">
                <h4><span class="mode-badge">narrowband</span> ãƒŠãƒ­ãƒ¼ãƒãƒ³ãƒ‰ãƒ¢ãƒ¼ãƒ‰</h4>
                <p><strong>å‹•ä½œ:</strong> ç‰¹å®šã®å€¤ã®ã¿é€šé</p>
                <p><strong>ç”¨é€”:</strong> ç‰¹å®šã®çŠ¶æ…‹æ¤œçŸ¥</p>
                <p><strong>ä¾‹:</strong> [1,2,2,3] â†’ [2,2] (å€¤2ã®ã¿)</p>
            </div>
        </div>
        
        <h3>ğŸ“ ã‚µãƒ³ãƒ—ãƒ«ãƒ•ãƒ­ãƒ¼è§£æ</h3>
        
        <p>å®Ÿéš›ã®Node-REDã§å‹•ä½œã™ã‚‹4ã¤ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ•ãƒ­ãƒ¼ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†:</p>
        
        <h4>ã‚µãƒ³ãƒ—ãƒ«1: å¤‰åŒ–ã®ã¿å ±å‘Š(Report all changes)</h4>
        
        <div class="node-example">
            <span class="node node-inject">inject [1,2,2]</span>
            <span class="arrow">â†’</span>
            <span class="node node-split">split</span>
            <span class="arrow">â†’</span>
            <span class="node node-rbe">RBE(rbe)</span>
            <span class="arrow">â†’</span>
            <span class="node node-debug">debug</span>
        </div>
        
        <p><strong>Injectãƒãƒ¼ãƒ‰ã®è¨­å®š:</strong></p>
        <div class="code-block">
msg.payload = [1, 2, 2]
        </div>
        
        <p><strong>Filterãƒãƒ¼ãƒ‰(RBE)ã®è¨­å®š:</strong></p>
        <div class="code-block">
Mode: rbe (block unless value changes)
Property: msg.payload
        </div>
        
        <p><strong>å‹•ä½œã®æµã‚Œ:</strong></p>
        <div class="data-flow">
            <h4>å‡¦ç†ã‚¹ãƒ†ãƒƒãƒ—</h4>
            <ol>
                <li>é…åˆ—[1,2,2]ãŒSplitãƒãƒ¼ãƒ‰ã§1ã¤ãšã¤ã«åˆ†å‰²</li>
                <li>1 â†’ âœ… é€šé(åˆå›ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸)</li>
                <li>2 â†’ âœ… é€šé(1ã‹ã‚‰2ã«å¤‰åŒ–)</li>
                <li>2 â†’ âŒ ãƒ–ãƒ­ãƒƒã‚¯(å‰å›ã¨åŒã˜å€¤)</li>
            </ol>
            <p><strong>ãƒ‡ãƒãƒƒã‚°å‡ºåŠ›: 1, 2</strong></p>
        </div>
        
        <h4>ã‚µãƒ³ãƒ—ãƒ«2: åˆæœŸå€¤ã‚’ç„¡è¦–(Report changes, ignore initial value)</h4>
        
        <div class="node-example">
            <span class="node node-inject">inject [1,2,2]</span>
            <span class="arrow">â†’</span>
            <span class="node node-split">split</span>
            <span class="arrow">â†’</span>
            <span class="node node-rbe">RBE(rbei)</span>
            <span class="arrow">â†’</span>
            <span class="node node-debug">debug</span>
        </div>
        
        <p><strong>Filterãƒãƒ¼ãƒ‰(RBE)ã®è¨­å®š:</strong></p>
        <div class="code-block">
Mode: rbei (block unless value changes, ignore initial value)
Property: msg.payload
        </div>
        
        <p><strong>å‹•ä½œã®æµã‚Œ:</strong></p>
        <div class="data-flow">
            <h4>å‡¦ç†ã‚¹ãƒ†ãƒƒãƒ—</h4>
            <ol>
                <li>1 â†’ âŒ è¨˜æ†¶ã™ã‚‹ãŒå‡ºåŠ›ã—ãªã„(åˆæœŸå€¤)</li>
                <li>2 â†’ âœ… é€šé(1ã‹ã‚‰2ã«å¤‰åŒ–)</li>
                <li>2 â†’ âŒ ãƒ–ãƒ­ãƒƒã‚¯(å‰å›ã¨åŒã˜å€¤)</li>
            </ol>
            <p><strong>ãƒ‡ãƒãƒƒã‚°å‡ºåŠ›: 2</strong></p>
        </div>
        
        <div class="tip">
            <h4>ğŸ’¡ rbei ãƒ¢ãƒ¼ãƒ‰ã®ç”¨é€”</h4>
            <p>ã‚»ãƒ³ã‚µãƒ¼èµ·å‹•æ™‚ã®åˆæœŸå€¤ã‚’é™¤å¤–ã—ãŸã„å ´åˆã«æœ‰ç”¨ã§ã™ã€‚ä¾‹:</p>
            <ul>
                <li>ã‚·ã‚¹ãƒ†ãƒ èµ·å‹•æ™‚ã®ä¸å®‰å®šãªå€¤ã‚’ç„¡è¦–</li>
                <li>ã‚­ãƒ£ãƒªãƒ–ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ä¸­ã®ãƒ‡ãƒ¼ã‚¿ã‚’é™¤å¤–</li>
                <li>åˆå›ã®åŸºæº–å€¤è¨­å®š</li>
            </ul>
        </div>
        
        <h4>ã‚µãƒ³ãƒ—ãƒ«3: ãƒ‡ãƒƒãƒ‰ãƒãƒ³ãƒ‰(å¤§ããªå¤‰åŒ–ã®ã¿å ±å‘Š)</h4>
        
        <div class="node-example">
            <span class="node node-inject">inject [1,2,2,1]</span>
            <span class="arrow">â†’</span>
            <span class="node node-split">split</span>
            <span class="arrow">â†’</span>
            <span class="node node-rbe">RBE(deadband 50%)</span>
            <span class="arrow">â†’</span>
            <span class="node node-debug">debug</span>
        </div>
        
        <p><strong>Filterãƒãƒ¼ãƒ‰(RBE)ã®è¨­å®š:</strong></p>
        <div class="code-block">
Mode: deadbandEq (block unless value change >= threshold)
Threshold: 50%
Comparison: compared to last valid output value
Property: msg.payload
        </div>
        
        <p><strong>å‹•ä½œã®æµã‚Œ:</strong></p>
        <div class="data-flow">
            <h4>è©³ç´°ãªå‡¦ç†ã‚¹ãƒ†ãƒƒãƒ—</h4>
            <ol>
                <li>1 â†’ âœ… é€šé(åˆæœŸå€¤ã€ã‚»ãƒ³ãƒãƒãƒ«å€¤=1)</li>
                <li>2 â†’ âœ… é€šé(1â†’2ã¯100%å¢—åŠ ã€50%è¶…ãˆãªã®ã§é€šéã€ã‚»ãƒ³ãƒãƒãƒ«å€¤=2)</li>
                <li>2 â†’ âŒ ãƒ–ãƒ­ãƒƒã‚¯(å¤‰åŒ–0%ã€50%æœªæº€)</li>
                <li>1 â†’ âœ… é€šé(2â†’1ã¯50%æ¸›å°‘ã€50%ä»¥ä¸Šãªã®ã§é€šé)</li>
            </ol>
            <p><strong>ãƒ‡ãƒãƒƒã‚°å‡ºåŠ›: 1, 2, 1</strong></p>
        </div>
        
        <div class="important">
            <h4>âš ï¸ ãƒ‡ãƒƒãƒ‰ãƒãƒ³ãƒ‰ã®è¨ˆç®—æ–¹æ³•</h4>
            <p>å¤‰åŒ–ç‡ã®è¨ˆç®—å¼:</p>
            <div class="code-block">
å¤‰åŒ–ç‡(%) = |æ–°ã—ã„å€¤ - åŸºæº–å€¤| / åŸºæº–å€¤ Ã— 100

ä¾‹: 2ã‹ã‚‰1ã¸ã®å¤‰åŒ–
å¤‰åŒ–ç‡ = |1 - 2| / 2 Ã— 100 = 50%
            </div>
        </div>
        
        <h4>ã‚µãƒ³ãƒ—ãƒ«4: ç‰¹å®šã®å€¤ã®ã¿å ±å‘Š(Narrowband)</h4>
        
        <div class="node-example">
            <span class="node node-inject">inject [1,2,2]</span>
            <span class="arrow">â†’</span>
            <span class="node node-split">split</span>
            <span class="arrow">â†’</span>
            <span class="node node-rbe">RBE(narrowband=2)</span>
            <span class="arrow">â†’</span>
            <span class="node node-debug">debug</span>
        </div>
        
        <p><strong>Filterãƒãƒ¼ãƒ‰(RBE)ã®è¨­å®š:</strong></p>
        <div class="code-block">
Mode: narrowbandEq (block unless value change < threshold)
Start value: 2
Threshold: 1
Property: msg.payload
        </div>
        
        <p><strong>å‹•ä½œã®æµã‚Œ:</strong></p>
        <div class="data-flow">
            <h4>å‡¦ç†ã‚¹ãƒ†ãƒƒãƒ—</h4>
            <ol>
                <li>1 â†’ âŒ ãƒ–ãƒ­ãƒƒã‚¯(|1-2|=1ã€é–¾å€¤1ä»¥ä¸Šãªã®ã§ãƒ–ãƒ­ãƒƒã‚¯)</li>
                <li>2 â†’ âœ… é€šé(|2-2|=0ã€é–¾å€¤1æœªæº€ãªã®ã§é€šé)</li>
                <li>2 â†’ âœ… é€šé(|2-2|=0ã€é–¾å€¤1æœªæº€ãªã®ã§é€šé)</li>
            </ol>
            <p><strong>ãƒ‡ãƒãƒƒã‚°å‡ºåŠ›: 2, 2</strong></p>
        </div>
        
        <div class="tip">
            <h4>ğŸ’¡ Narrowbandãƒ¢ãƒ¼ãƒ‰ã®ä»•çµ„ã¿</h4>
            <p>é–‹å§‹å€¤(Start value)ã‹ã‚‰é–¾å€¤(Threshold)æœªæº€ã®å¤‰åŒ–ã®ã¿ã‚’é€šéã•ã›ã¾ã™:</p>
            <ul>
                <li>Start value = 2ã€Threshold = 1 ã®å ´åˆ</li>
                <li>é€šéã™ã‚‹å€¤ã®ç¯„å›²: 1 < å€¤ < 3 (ã¤ã¾ã‚Šå€¤=2ã®ã¿)</li>
                <li>ç‰¹å®šã®çŠ¶æ…‹ã‚„ã‚¢ãƒ©ãƒ¼ãƒˆãƒ¬ãƒ™ãƒ«ã®æ¤œçŸ¥ã«æœ€é©</li>
            </ul>
        </div>
        
        <h4>ğŸ”§ ã‚¤ãƒ³ãƒãƒ¼ãƒˆå¯èƒ½ãªã‚µãƒ³ãƒ—ãƒ«ãƒ•ãƒ­ãƒ¼</h4>
        <details>
            <summary>ğŸ“¦ å®Œå…¨ãªã‚µãƒ³ãƒ—ãƒ«ãƒ•ãƒ­ãƒ¼ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ (å‡ºå…¸: FlowFuse-HP https://flowfuse.com/node-red/core-nodes/filter/)</summary>
            <p>ä»¥ä¸‹ã®JSONã‚’Node-REDã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ã€4ã¤ã®ã‚µãƒ³ãƒ—ãƒ«ã‚’è©¦ã—ã¦ã¿ã¾ã—ã‚‡ã†:</p>
            <div class="flow-json">
[
    {
        "id": "9573fa4b057fe7b2",
        "type": "comment",
        "z": "55a31d046b0519df",
        "name": "1 Report all changes",
        "info": "ãƒ•ã‚£ãƒ«ã‚¿ãƒãƒ¼ãƒ‰ã«3ã¤ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸(1ã€2ã€2)ãŒé€ä¿¡ã•ã‚ŒãŸå ´åˆã€æœ€åˆã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸(1ã¨2)ã¯ãã‚Œãã‚Œé †ã«é€šéã—ã¾ã™ã€‚æœ€å¾Œã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸(2)ã¯ã€å‰å›ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ä»¥é™ã«å¤‰æ›´ãŒç¢ºèªã•ã‚Œãªã‹ã£ãŸãŸã‚ã€ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã•ã‚Œã¾ã™ã€‚",
        "x": 210,
        "y": 140,
        "wires": []
    },
    {
        "id": "5adf6b757e2a7bb2",
        "type": "rbe",
        "z": "55a31d046b0519df",
        "name": "Only report changes",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 500,
        "y": 200,
        "wires": [["6682a9e8826ad09b"]]
    },
    {
        "id": "f60dc26f8d634312",
        "type": "inject",
        "z": "55a31d046b0519df",
        "name": "",
        "props": [{"p": "payload"}],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[1,2,2]",
        "payloadType": "json",
        "x": 210,
        "y": 200,
        "wires": [["5b2b61bb112b23e7"]]
    },
    {
        "id": "6682a9e8826ad09b",
        "type": "debug",
        "z": "55a31d046b0519df",
        "name": "Print changes",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 700,
        "y": 200,
        "wires": []
    },
    {
        "id": "5b2b61bb112b23e7",
        "type": "split",
        "z": "55a31d046b0519df",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 330,
        "y": 200,
        "wires": [["5adf6b757e2a7bb2"]]
    },
    {
        "id": "79e041e499ad21e9",
        "type": "comment",
        "z": "55a31d046b0519df",
        "name": "2 Report changes, ignore the initial value",
        "info": "åˆæœŸå€¤ãŒã‚»ãƒ³ãƒ†ã‚£ãƒãƒ«å€¤ã¨ã—ã¦ä½¿ç”¨ã•ã‚Œã€ãã®å¾Œã®å¤‰æ›´ãŒè»¢é€ã•ã‚Œã‚‹ã€‚",
        "x": 280,
        "y": 320,
        "wires": []
    },
    {
        "id": "d5c20441fc01294b",
        "type": "rbe",
        "z": "55a31d046b0519df",
        "name": "Ignore first message, only report changes",
        "func": "rbei",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 560,
        "y": 380,
        "wires": [["c5845cc63c81f81d"]]
    },
    {
        "id": "eef24d9b8c3f98c7",
        "type": "inject",
        "z": "55a31d046b0519df",
        "name": "",
        "props": [{"p": "payload"}],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[1,2,2]",
        "payloadType": "json",
        "x": 210,
        "y": 380,
        "wires": [["9e8e79801228c3bb"]]
    },
    {
        "id": "c5845cc63c81f81d",
        "type": "debug",
        "z": "55a31d046b0519df",
        "name": "Print changes",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 820,
        "y": 380,
        "wires": []
    },
    {
        "id": "9e8e79801228c3bb",
        "type": "split",
        "z": "55a31d046b0519df",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 330,
        "y": 380,
        "wires": [["d5c20441fc01294b"]]
    },
    {
        "id": "c6ddaefee2877538",
        "type": "comment",
        "z": "55a31d046b0519df",
        "name": "3 Report changes larger than a certain percentage Deadband",
        "info": "50%ä»¥ä¸Šã®å¤‰åŒ–ã®ã¿ã‚’å ±å‘Šã™ã‚‹ãƒ‡ãƒƒãƒ‰ãƒãƒ³ãƒ‰ãƒ¢ãƒ¼ãƒ‰",
        "x": 350,
        "y": 500,
        "wires": []
    },
    {
        "id": "af9390a840a0b28a",
        "type": "rbe",
        "z": "55a31d046b0519df",
        "name": "Report changes over ",
        "func": "deadbandEq",
        "gap": "50%",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 500,
        "y": 560,
        "wires": [["f76f04bfb73ad8db"]]
    },
    {
        "id": "2a28d48e44fd6450",
        "type": "inject",
        "z": "55a31d046b0519df",
        "name": "",
        "props": [{"p": "payload"}],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[1,2,2,1]",
        "payloadType": "json",
        "x": 210,
        "y": 560,
        "wires": [["9155ade283e76ab6"]]
    },
    {
        "id": "f76f04bfb73ad8db",
        "type": "debug",
        "z": "55a31d046b0519df",
        "name": "Print changes",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 700,
        "y": 560,
        "wires": []
    },
    {
        "id": "9155ade283e76ab6",
        "type": "split",
        "z": "55a31d046b0519df",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 330,
        "y": 560,
        "wires": [["af9390a840a0b28a"]]
    },
    {
        "id": "9867760eef458ee6",
        "type": "comment",
        "z": "55a31d046b0519df",
        "name": "4 Report only on one specific value",
        "info": "ç‰¹å®šã®å€¤(2)ã®ã¿ã‚’å ±å‘Šã™ã‚‹ãƒŠãƒ­ãƒ¼ãƒãƒ³ãƒ‰ãƒ¢ãƒ¼ãƒ‰",
        "x": 260,
        "y": 680,
        "wires": []
    },
    {
        "id": "6b70bed3e7360f58",
        "type": "rbe",
        "z": "55a31d046b0519df",
        "name": "Only send 2's",
        "func": "narrowbandEq",
        "gap": "1",
        "start": "2",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 480,
        "y": 740,
        "wires": [["5f02aa2b43499ca8"]]
    },
    {
        "id": "a5b05fcbe6fdf53e",
        "type": "inject",
        "z": "55a31d046b0519df",
        "name": "",
        "props": [{"p": "payload"}],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[1,2,2]",
        "payloadType": "json",
        "x": 210,
        "y": 740,
        "wires": [["e58f98ecb220d7f3"]]
    },
    {
        "id": "5f02aa2b43499ca8",
        "type": "debug",
        "z": "55a31d046b0519df",
        "name": "Print the same values",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 680,
        "y": 740,
        "wires": []
    },
    {
        "id": "e58f98ecb220d7f3",
        "type": "split",
        "z": "55a31d046b0519df",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 330,
        "y": 740,
        "wires": [["6b70bed3e7360f58"]]
    }
]
            </div>
        </details>
        
        <h2>ğŸ‹ï¸ 3. å®Ÿè·µæ¼”ç¿’</h2>
        
        <div class="exercise">
            <h3>æ¼”ç¿’1: ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã®é‡è¤‡é™¤å»<span class="difficulty difficulty-easy">åˆç´š</span></h3>
            
            <p><strong>ğŸ“ èª²é¡Œ:</strong></p>
            <p>æ¸©åº¦ã‚»ãƒ³ã‚µãƒ¼ã‹ã‚‰é€ã‚‰ã‚Œã¦ãã‚‹ãƒ‡ãƒ¼ã‚¿ã«é‡è¤‡ãŒã‚ã‚‹å ´åˆã€å¤‰åŒ–ãŒã‚ã£ãŸå€¤ã®ã¿ã‚’è¨˜éŒ²ã™ã‚‹ãƒ•ãƒ­ãƒ¼ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚</p>
            
            <p><strong>ğŸ¯ è¦æ±‚ä»•æ§˜:</strong></p>
            <ul>
                <li>Injectãƒãƒ¼ãƒ‰ã§æ¸©åº¦ãƒ‡ãƒ¼ã‚¿ã®é…åˆ—ã‚’é€ä¿¡(ä¾‹: [20, 20, 21, 21, 22])</li>
                <li>Splitãƒãƒ¼ãƒ‰ã§é…åˆ—ã‚’å€‹åˆ¥ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«åˆ†å‰²</li>
                <li>Filterãƒãƒ¼ãƒ‰(RBE)ã‚’ä½¿ç”¨ã—ã¦å¤‰åŒ–ãŒã‚ã£ãŸå€¤ã®ã¿é€šé</li>
                <li>Debugãƒãƒ¼ãƒ‰ã§çµæœã‚’è¡¨ç¤º</li>
            </ul>
            
            <p><strong>ğŸ“Š æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œ:</strong></p>
            <ul>
                <li>å…¥åŠ›: [20, 20, 21, 21, 22]</li>
                <li>å‡ºåŠ›: 20, 21, 22</li>
                <li>é‡è¤‡ã—ãŸå€¤ãŒãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã•ã‚Œã‚‹</li>
            </ul>
            
            <details>
                <summary>ğŸ’¡ ãƒ’ãƒ³ãƒˆ</summary>
                <p><strong>Filterãƒãƒ¼ãƒ‰(RBE)ã®è¨­å®š:</strong></p>
                <ul>
                    <li>Mode: <strong>rbe</strong> (block unless value changes)</li>
                    <li>Property: msg.payload</li>
                    <li>Apply mode separately for each msg.topic: ãƒã‚§ãƒƒã‚¯æ¨å¥¨</li>
                </ul>
                <p><strong>Splitãƒãƒ¼ãƒ‰ã®å½¹å‰²:</strong></p>
                <ul>
                    <li>é…åˆ—ã‚’1ã¤ãšã¤ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«åˆ†å‰²</li>
                    <li>ã“ã‚Œã«ã‚ˆã‚ŠRBEãƒãƒ¼ãƒ‰ãŒå„å€¤ã‚’æ¯”è¼ƒã§ãã‚‹</li>
                </ul>
            </details>
            
            <details>
                <summary>âœ… è§£ç­”ä¾‹ãƒ•ãƒ­ãƒ¼</summary>
                <div class="flow-json">
[
    {
        "id": "ex1_inject",
        "type": "inject",
        "name": "æ¸©åº¦ãƒ‡ãƒ¼ã‚¿",
        "props": [{"p": "payload"}],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[20,20,21,21,22]",
        "payloadType": "json",
        "x": 120,
        "y": 100,
        "wires": [["ex1_split"]]
    },
    {
        "id": "ex1_split",
        "type": "split",
        "name": "é…åˆ—åˆ†å‰²",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 270,
        "y": 100,
        "wires": [["ex1_rbe"]]
    },
    {
        "id": "ex1_rbe",
        "type": "rbe",
        "name": "é‡è¤‡é™¤å»",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 410,
        "y": 100,
        "wires": [["ex1_debug"]]
    },
    {
        "id": "ex1_debug",
        "type": "debug",
        "name": "å¤‰åŒ–ã®ã¿",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 550,
        "y": 100,
        "wires": []
    }
]
                </div>
                <p><strong>âœ… å‹•ä½œç¢ºèª:</strong></p>
                <ul>
                    <li>æ¸©åº¦ãƒ‡ãƒ¼ã‚¿ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
                    <li>ãƒ‡ãƒãƒƒã‚°ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã« 20, 21, 22 ãŒè¡¨ç¤ºã•ã‚Œã‚‹</li>
                    <li>é€£ç¶šã™ã‚‹åŒã˜å€¤(20,20ã‚„21,21)ãŒãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã•ã‚Œã‚‹</li>
                </ul>
            </details>
        </div>
        
        <div class="exercise">
            <h3>æ¼”ç¿’2: ã‚»ãƒ³ã‚µãƒ¼èµ·å‹•æ™‚ã®åˆæœŸå€¤é™¤å¤–<span class="difficulty difficulty-easy">åˆç´š</span></h3>
            
            <p><strong>ğŸ“ èª²é¡Œ:</strong></p>
            <p>ã‚»ãƒ³ã‚µãƒ¼ã‹ã‚‰é€ã‚‰ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã®ã†ã¡ã€èµ·å‹•æ™‚ã®åˆæœŸå€¤ã‚’é™¤å¤–ã—ã€ãã®å¾Œã®å¤‰åŒ–ã®ã¿ã‚’è¨˜éŒ²ã™ã‚‹ãƒ•ãƒ­ãƒ¼ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚</p>
            
            <p><strong>ğŸ¯ è¦æ±‚ä»•æ§˜:</strong></p>
            <ul>
                <li>Injectãƒãƒ¼ãƒ‰ã§ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡</li>
                <li>Splitãƒãƒ¼ãƒ‰ã§åˆ†å‰²</li>
                <li>Filterãƒãƒ¼ãƒ‰(RBE)ã‚’ä½¿ç”¨ã—ã¦åˆæœŸå€¤ã‚’é™¤å¤–</li>
                <li>Debugãƒãƒ¼ãƒ‰ã§çµæœã‚’è¡¨ç¤º</li>
            </ul>
            
            <p><strong>ğŸ“Š æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œ:</strong></p>
            <ul>
                <li>å…¥åŠ›: [10, 15, 15, 20]</li>
                <li>å‡ºåŠ›: 15, 20 (åˆæœŸå€¤10ã¯å‡ºåŠ›ã•ã‚Œãªã„)</li>
            </ul>
            
            <details>
                <summary>ğŸ’¡ ãƒ’ãƒ³ãƒˆ</summary>
                <p><strong>Filterãƒãƒ¼ãƒ‰(RBE)ã®è¨­å®š:</strong></p>
                <ul>
                    <li>Mode: <strong>rbei</strong> (block unless value changes, ignore initial)</li>
                    <li>Property: msg.payload</li>
                </ul>
                <p><strong>rbei ãƒ¢ãƒ¼ãƒ‰ã®ç‰¹å¾´:</strong></p>
                <ul>
                    <li>æœ€åˆã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯è¨˜æ†¶ã™ã‚‹ãŒå‡ºåŠ›ã—ãªã„</li>
                    <li>2ã¤ç›®ä»¥é™ã§å€¤ãŒå¤‰åŒ–ã—ãŸã¨ãã®ã¿å‡ºåŠ›</li>
                </ul>
            </details>
            
            <details>
                <summary>âœ… è§£ç­”ä¾‹ãƒ•ãƒ­ãƒ¼</summary>
                <div class="flow-json">
[
    {
        "id": "ex2_inject",
        "type": "inject",
        "name": "ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿",
        "props": [{"p": "payload"}],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[10,15,15,20]",
        "payloadType": "json",
        "x": 140,
        "y": 100,
        "wires": [["ex2_split"]]
    },
    {
        "id": "ex2_split",
        "type": "split",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 290,
        "y": 100,
        "wires": [["ex2_rbe"]]
    },
    {
        "id": "ex2_rbe",
        "type": "rbe",
        "name": "åˆæœŸå€¤ç„¡è¦–",
        "func": "rbei",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 420,
        "y": 100,
        "wires": [["ex2_debug"]]
    },
    {
        "id": "ex2_debug",
        "type": "debug",
        "name": "å¤‰åŒ–ã®ã¿(åˆæœŸå€¤ãªã—)",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 600,
        "y": 100,
        "wires": []
    }
]
                </div>
                <p><strong>âœ… å‹•ä½œç¢ºèª:</strong></p>
                <ul>
                    <li>ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
                    <li>ãƒ‡ãƒãƒƒã‚°ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã« 15, 20 ã®ã¿ãŒè¡¨ç¤ºã•ã‚Œã‚‹</li>
                    <li>åˆæœŸå€¤10ã¯è¨˜æ†¶ã•ã‚Œã‚‹ãŒå‡ºåŠ›ã•ã‚Œãªã„</li>
                </ul>
            </details>
        </div>
        
        <div class="exercise">
            <h3>æ¼”ç¿’3: ãƒ‡ãƒƒãƒ‰ãƒãƒ³ãƒ‰ãƒ•ã‚£ãƒ«ã‚¿ã§ãƒã‚¤ã‚ºé™¤å»<span class="difficulty difficulty-medium">ä¸­ç´š</span></h3>
            
            <p><strong>ğŸ“ èª²é¡Œ:</strong></p>
            <p>æ¸©åº¦ã‚»ãƒ³ã‚µãƒ¼ã®ã‚ãšã‹ãªæºã‚‰ã(ãƒã‚¤ã‚º)ã‚’é™¤å»ã—ã€10%ä»¥ä¸Šã®å¤‰åŒ–ãŒã‚ã£ãŸæ™‚ã®ã¿è¨˜éŒ²ã™ã‚‹ãƒ•ãƒ­ãƒ¼ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚</p>
            
            <p><strong>ğŸ¯ è¦æ±‚ä»•æ§˜:</strong></p>
            <ul>
                <li>Injectãƒãƒ¼ãƒ‰ã§æ¸©åº¦ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡</li>
                <li>Splitãƒãƒ¼ãƒ‰ã§åˆ†å‰²</li>
                <li>Filterãƒãƒ¼ãƒ‰(RBE)ã‚’ãƒ‡ãƒƒãƒ‰ãƒãƒ³ãƒ‰ãƒ¢ãƒ¼ãƒ‰ã§ä½¿ç”¨(é–¾å€¤10%)</li>
                <li>Debugãƒãƒ¼ãƒ‰ã§çµæœã‚’è¡¨ç¤º</li>
            </ul>
            
            <p><strong>ğŸ“Š æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œ:</strong></p>
            <ul>
                <li>å…¥åŠ›: [100, 105, 108, 120]</li>
                <li>å‡ºåŠ›: 100, 120</li>
                <li>10%æœªæº€ã®å¤‰åŒ–(105, 108)ã¯ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°</li>
            </ul>
            
            <details>
                <summary>ğŸ’¡ ãƒ’ãƒ³ãƒˆ</summary>
                <p><strong>Filterãƒãƒ¼ãƒ‰(RBE)ã®è¨­å®š:</strong></p>
                <ul>
                    <li>Mode: <strong>deadbandEq</strong></li>
                    <li>Threshold: <strong>10%</strong></li>
                    <li>Comparison: compared to last valid output value</li>
                    <li>Property: msg.payload</li>
                </ul>
                <p><strong>å¤‰åŒ–ç‡ã®è¨ˆç®—:</strong></p>
                <div class="code-block">
100 â†’ 105: 5%å¤‰åŒ– â†’ ãƒ–ãƒ­ãƒƒã‚¯
100 â†’ 108: 8%å¤‰åŒ– â†’ ãƒ–ãƒ­ãƒƒã‚¯  
100 â†’ 120: 20%å¤‰åŒ– â†’ é€šé(åŸºæº–å€¤æ›´æ–°)
                </div>
            </details>
            
            <details>
                <summary>âœ… è§£ç­”ä¾‹ãƒ•ãƒ­ãƒ¼</summary>
                <div class="flow-json">
[
    {
        "id": "ex3_inject",
        "type": "inject",
        "name": "æ¸©åº¦ãƒ‡ãƒ¼ã‚¿(ãƒã‚¤ã‚ºã‚ã‚Š)",
        "props": [{"p": "payload"}],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[100,105,108,120]",
        "payloadType": "json",
        "x": 170,
        "y": 100,
        "wires": [["ex3_split"]]
    },
    {
        "id": "ex3_split",
        "type": "split",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 350,
        "y": 100,
        "wires": [["ex3_rbe"]]
    },
    {
        "id": "ex3_rbe",
        "type": "rbe",
        "name": "10%ãƒ‡ãƒƒãƒ‰ãƒãƒ³ãƒ‰",
        "func": "deadbandEq",
        "gap": "10%",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 500,
        "y": 100,
        "wires": [["ex3_debug"]]
    },
    {
        "id": "ex3_debug",
        "type": "debug",
        "name": "å¤§ããªå¤‰åŒ–ã®ã¿",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 670,
        "y": 100,
        "wires": []
    }
]
                </div>
                <p><strong>âœ… å‹•ä½œç¢ºèª:</strong></p>
                <ul>
                    <li>æ¸©åº¦ãƒ‡ãƒ¼ã‚¿(ãƒã‚¤ã‚ºã‚ã‚Š)ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
                    <li>ãƒ‡ãƒãƒƒã‚°ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã« 100, 120 ã®ã¿ãŒè¡¨ç¤ºã•ã‚Œã‚‹</li>
                    <li>105(5%å¤‰åŒ–)ã¨108(8%å¤‰åŒ–)ã¯ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã•ã‚Œã‚‹</li>
                </ul>
                <p><strong>ğŸ“ å®Ÿç”¨ä¾‹:</strong></p>
                <ul>
                    <li>ã‚»ãƒ³ã‚µãƒ¼ãƒã‚¤ã‚ºã®é™¤å»</li>
                    <li>ä¸è¦ãªé€šä¿¡é‡ã®å‰Šæ¸›</li>
                    <li>ã‚¢ãƒ©ãƒ¼ãƒˆé–¾å€¤ã®ç®¡ç†</li>
                </ul>
            </details>
        </div>
        
        <div class="exercise">
            <h3>æ¼”ç¿’4: ç‰¹å®šã‚¢ãƒ©ãƒ¼ãƒˆãƒ¬ãƒ™ãƒ«ã®æ¤œçŸ¥<span class="difficulty difficulty-hard">ä¸Šç´š</span></h3>
            
            <p><strong>ğŸ“ èª²é¡Œ:</strong></p>
            <p>æ©Ÿæ¢°ã®æŒ¯å‹•ã‚»ãƒ³ã‚µãƒ¼ã‹ã‚‰ã€å±é™ºãƒ¬ãƒ™ãƒ«(å€¤=3)ã®æŒ¯å‹•ã®ã¿ã‚’æ¤œçŸ¥ã—ã¦è­¦å‘Šã‚’ç™ºã™ã‚‹ãƒ•ãƒ­ãƒ¼ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚</p>
            
            <p><strong>ğŸ¯ è¦æ±‚ä»•æ§˜:</strong></p>
            <ul>
                <li>Injectãƒãƒ¼ãƒ‰ã§æŒ¯å‹•ãƒ¬ãƒ™ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡(1:æ­£å¸¸ã€2:æ³¨æ„ã€3:å±é™º)</li>
                <li>Splitãƒãƒ¼ãƒ‰ã§åˆ†å‰²</li>
                <li>Filterãƒãƒ¼ãƒ‰(RBE)ã‚’ãƒŠãƒ­ãƒ¼ãƒãƒ³ãƒ‰ãƒ¢ãƒ¼ãƒ‰ã§ä½¿ç”¨</li>
                <li>å±é™ºãƒ¬ãƒ™ãƒ«(3)ã®ã¿ã‚’é€šéã•ã›ã‚‹</li>
                <li>Debugãƒãƒ¼ãƒ‰ã§è­¦å‘Šã‚’è¡¨ç¤º</li>
            </ul>
            
            <p><strong>ğŸ“Š æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œ:</strong></p>
            <ul>
                <li>å…¥åŠ›: [1, 1, 2, 3, 3, 2, 1]</li>
                <li>å‡ºåŠ›: 3, 3 (å±é™ºãƒ¬ãƒ™ãƒ«ã®ã¿)</li>
                <li>æ­£å¸¸(1)ã¨æ³¨æ„(2)ãƒ¬ãƒ™ãƒ«ã¯ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°</li>
            </ul>
            
            <details>
                <summary>ğŸ’¡ ãƒ’ãƒ³ãƒˆ</summary>
                <p><strong>Filterãƒãƒ¼ãƒ‰(RBE)ã®è¨­å®š:</strong></p>
                <ul>
                    <li>Mode: <strong>narrowbandEq</strong></li>
                    <li>Start value: <strong>3</strong> (æ¤œçŸ¥ã—ãŸã„å€¤)</li>
                    <li>Threshold: <strong>1</strong></li>
                    <li>Property: msg.payload</li>
                </ul>
                <p><strong>ãƒŠãƒ­ãƒ¼ãƒãƒ³ãƒ‰ã®ä»•çµ„ã¿:</strong></p>
                <div class="code-block">
é€šéæ¡ä»¶: |å€¤ - Start value| < Threshold
Start=3, Threshold=1 ã®å ´åˆ:
- å€¤=1: |1-3|=2 >= 1 â†’ ãƒ–ãƒ­ãƒƒã‚¯
- å€¤=2: |2-3|=1 >= 1 â†’ ãƒ–ãƒ­ãƒƒã‚¯
- å€¤=3: |3-3|=0 < 1 â†’ é€šéâœ…
- å€¤=4: |4-3|=1 >= 1 â†’ ãƒ–ãƒ­ãƒƒã‚¯
                </div>
            </details>
            
            <details>
                <summary>âœ… è§£ç­”ä¾‹ãƒ•ãƒ­ãƒ¼</summary>
                <div class="flow-json">
[
    {
        "id": "ex4_inject",
        "type": "inject",
        "name": "æŒ¯å‹•ãƒ¬ãƒ™ãƒ«",
        "props": [{"p": "payload"}],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[1,1,2,3,3,2,1]",
        "payloadType": "json",
        "x": 130,
        "y": 100,
        "wires": [["ex4_split"]]
    },
    {
        "id": "ex4_split",
        "type": "split",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 270,
        "y": 100,
        "wires": [["ex4_rbe"]]
    },
    {
        "id": "ex4_rbe",
        "type": "rbe",
        "name": "å±é™ºãƒ¬ãƒ™ãƒ«ã®ã¿æ¤œçŸ¥",
        "func": "narrowbandEq",
        "gap": "1",
        "start": "3",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 430,
        "y": 100,
        "wires": [["ex4_change"]]
    },
    {
        "id": "ex4_change",
        "type": "change",
        "name": "è­¦å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "âš ï¸ å±é™º! æŒ¯å‹•ãƒ¬ãƒ™ãƒ«3ã‚’æ¤œçŸ¥ã—ã¾ã—ãŸ",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 620,
        "y": 100,
        "wires": [["ex4_debug"]]
    },
    {
        "id": "ex4_debug",
        "type": "debug",
        "name": "å±é™ºã‚¢ãƒ©ãƒ¼ãƒˆ",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 790,
        "y": 100,
        "wires": []
    }
]
                </div>
                <p><strong>âœ… å‹•ä½œç¢ºèª:</strong></p>
                <ul>
                    <li>æŒ¯å‹•ãƒ¬ãƒ™ãƒ«ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
                    <li>å±é™ºãƒ¬ãƒ™ãƒ«(3)ãŒæ¤œçŸ¥ã•ã‚ŒãŸæ™‚ã ã‘è­¦å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹</li>
                    <li>å…¥åŠ›: [1,1,2,3,3,2,1]</li>
                    <li>å‡ºåŠ›: è­¦å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒ2å›è¡¨ç¤º(3ãŒ2å›æ¤œçŸ¥)</li>
                </ul>
                <p><strong>ğŸ“ å®Ÿå‹™ã§ã®å¿œç”¨:</strong></p>
                <ul>
                    <li>ç‰¹å®šã®ç•°å¸¸çŠ¶æ…‹æ¤œçŸ¥(æ¸©åº¦ã€åœ§åŠ›ã€æŒ¯å‹•ãªã©)</li>
                    <li>ã‚¢ãƒ©ãƒ¼ãƒˆãƒ¬ãƒ™ãƒ«åˆ¥ã®å‡¦ç†åˆ†å²</li>
                    <li>å“è³ªç®¡ç†ã§ã®ä¸è‰¯å“æ¤œçŸ¥</li>
                    <li>ãƒ—ãƒ­ã‚»ã‚¹åˆ¶å¾¡ã§ã®ç‰¹å®šçŠ¶æ…‹ç›£è¦–</li>
                </ul>
            </details>
        </div>
        
        <h2>ğŸ“ 4. ã¾ã¨ã‚</h2>
        
        <div class="important">
            <h3>Filterãƒãƒ¼ãƒ‰(RBE)ã®é‡è¦ãƒã‚¤ãƒ³ãƒˆ</h3>
            <ul>
                <li>âœ… <strong>rbe</strong>: å€¤ã®å¤‰åŒ–ã®ã¿é€šé - é‡è¤‡ãƒ‡ãƒ¼ã‚¿é™¤å»</li>
                <li>âœ… <strong>rbei</strong>: åˆæœŸå€¤ã‚’ç„¡è¦– - èµ·å‹•æ™‚ãƒ‡ãƒ¼ã‚¿ã®é™¤å¤–</li>
                <li>âœ… <strong>deadband</strong>: å¤§ããªå¤‰åŒ–ã®ã¿é€šé - ãƒã‚¤ã‚ºé™¤å»</li>
                <li>âœ… <strong>narrowband</strong>: ç‰¹å®šã®å€¤ã®ã¿é€šé - çŠ¶æ…‹æ¤œçŸ¥</li>
                <li>âœ… <strong>IoTæœ€é©åŒ–</strong>: é€šä¿¡é‡å‰Šæ¸›ã€ãƒãƒƒãƒ†ãƒªãƒ¼ç¯€ç´„ã«æœ€é©</li>
            </ul>
        </div>
        
        <div class="tip">
            <h3>ğŸ“š æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—</h3>
            <p>Filterãƒãƒ¼ãƒ‰(RBE)ã‚’ãƒã‚¹ã‚¿ãƒ¼ã—ãŸã‚‰ã€ä»¥ä¸‹ã®ãƒãƒ¼ãƒ‰ã‚‚å­¦ã‚“ã§ã¿ã¾ã—ã‚‡ã†:</p>
            <ul>
                <li><strong>Switchãƒãƒ¼ãƒ‰</strong>: æ¡ä»¶åˆ†å²ã«ã‚ˆã‚‹ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°</li>
                <li><strong>Delayãƒãƒ¼ãƒ‰</strong>: ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã¨ã‚¿ã‚¤ãƒŸãƒ³ã‚°åˆ¶å¾¡</li>
                <li><strong>Triggerãƒãƒ¼ãƒ‰</strong>: ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæ¤œçŸ¥</li>
                <li><strong>Batchãƒãƒ¼ãƒ‰</strong>: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã‚°ãƒ«ãƒ¼ãƒ—åŒ–</li>
            </ul>
        </div>
        
        <h2>ğŸ”§ 5. ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°</h2>
        
        <h3>ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ–¹æ³•</h3>
        
        <table>
            <tr>
                <th>å•é¡Œ</th>
                <th>åŸå› </th>
                <th>è§£æ±ºæ–¹æ³•</th>
            </tr>
            <tr>
                <td>ã™ã¹ã¦ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã‚‹</td>
                <td>ãƒ‡ãƒƒãƒ‰ãƒãƒ³ãƒ‰ã®é–¾å€¤ãŒå°ã•ã™ãã‚‹</td>
                <td>é–¾å€¤ã‚’å¤§ããã™ã‚‹ã‹ã€rbeãƒ¢ãƒ¼ãƒ‰ã‚’ä½¿ç”¨</td>
            </tr>
            <tr>
                <td>åˆå›ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå‡ºåŠ›ã•ã‚Œãªã„</td>
                <td>rbeiãƒ¢ãƒ¼ãƒ‰ã«ãªã£ã¦ã„ã‚‹</td>
                <td>rbeãƒ¢ãƒ¼ãƒ‰ã«å¤‰æ›´</td>
            </tr>
            <tr>
                <td>é…åˆ—ãŒ1ã¤ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ã—ã¦æ‰±ã‚ã‚Œã‚‹</td>
                <td>Splitãƒãƒ¼ãƒ‰ãŒãªã„</td>
                <td>RBEã®å‰ã«Splitãƒãƒ¼ãƒ‰ã‚’æŒ¿å…¥</td>
            </tr>
            <tr>
                <td>ç•°ãªã‚‹topicã®ãƒ‡ãƒ¼ã‚¿ãŒæ··åœ¨ã™ã‚‹</td>
                <td>topicåˆ¥ç®¡ç†ãŒç„¡åŠ¹</td>
                <td>"Apply mode separately" ã‚’æœ‰åŠ¹åŒ–</td>
            </tr>
            <tr>
                <td>Narrowbandã§æœŸå¾…å€¤ä»¥å¤–ã‚‚é€šé</td>
                <td>é–¾å€¤ãŒå¤§ãã™ãã‚‹</td>
                <td>é–¾å€¤ã‚’å°ã•ãã—ã¦ç¯„å›²ã‚’ç‹­ã‚ã‚‹</td>
            </tr>
        </table>
        
        <h2>ğŸ’¡ 6. å®Ÿå‹™ã§ã®æ´»ç”¨ä¾‹</h2>
        
        <h3>ã‚±ãƒ¼ã‚¹1: IoTã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã®æœ€é©åŒ–</h3>
        <div class="code-block">
æ¸©åº¦ã‚»ãƒ³ã‚µãƒ¼(1ç§’ã”ã¨)
â†“
RBE(rbe) - å¤‰åŒ–ã®ã¿é€šé
â†“
ã‚¯ãƒ©ã‚¦ãƒ‰ã«é€ä¿¡(é€šä¿¡é‡90%å‰Šæ¸›)
        </div>
        
        <h3>ã‚±ãƒ¼ã‚¹2: ç•°å¸¸æ¤œçŸ¥ã‚·ã‚¹ãƒ†ãƒ </h3>
        <div class="code-block">
åœ§åŠ›ã‚»ãƒ³ã‚µãƒ¼
â†“
RBE(deadband 10%) - ãƒã‚¤ã‚ºé™¤å»
â†“
Switch(é–¾å€¤åˆ¤å®š)
â†“
ã‚¢ãƒ©ãƒ¼ãƒˆé€ä¿¡
        </div>
        
        <h3>ã‚±ãƒ¼ã‚¹3: æ©Ÿå™¨çŠ¶æ…‹ç›£è¦–</h3>
        <div class="code-block">
çŠ¶æ…‹ã‚»ãƒ³ã‚µãƒ¼(0:åœæ­¢ã€1:ç¨¼åƒã€2:ã‚¨ãƒ©ãƒ¼)
â†“
RBE(narrowband=2) - ã‚¨ãƒ©ãƒ¼çŠ¶æ…‹ã®ã¿
â†“
Slacké€šçŸ¥
        </div>
        
        <h3>ã‚±ãƒ¼ã‚¹4: ãƒãƒƒãƒ†ãƒªãƒ¼é§†å‹•ãƒ‡ãƒã‚¤ã‚¹</h3>
        <div class="code-block">
ç’°å¢ƒã‚»ãƒ³ã‚µãƒ¼
â†“
RBE(deadband 5%) - å¤§ããªå¤‰åŒ–ã®ã¿
â†“
LoRaWANé€ä¿¡(ãƒãƒƒãƒ†ãƒªãƒ¼å¯¿å‘½å»¶é•·)
        </div>
        
        <h2>ğŸ”— 7. è¿½åŠ ãƒªã‚½ãƒ¼ã‚¹</h2>
        
        <ul>
            <li><a href="https://nodered.org/docs/user-guide/nodes#rbe" target="_blank">Node-REDå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: RBEãƒãƒ¼ãƒ‰</a></li>
            <li><a href="https://flowfuse.com/node-red/core-nodes/filter/" target="_blank">FlowFuse: Filterãƒãƒ¼ãƒ‰ã‚¬ã‚¤ãƒ‰</a></li>
            <li><a href="https://cookbook.nodered.org/" target="_blank">Node-RED Cookbook</a></li>
        </ul>
        
        <hr>
        
        <p style="text-align: center; color: #999; margin-top: 40px;">
            <small>ã“ã®ã‚¬ã‚¤ãƒ‰ãŒå½¹ã«ç«‹ã¡ã¾ã—ãŸã‚‰ã€å®Ÿéš›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ç·´ç¿’ã—ã¦ã¿ã¦ãã ã•ã„!<br>
            Filterãƒãƒ¼ãƒ‰(RBE)ã¯IoTã‚·ã‚¹ãƒ†ãƒ ã®åŠ¹ç‡åŒ–ã«æ¬ ã‹ã›ãªã„ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚</small>
        </p>
    </div>
    
    <script>
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ã‚’è¿½åŠ 
        document.addEventListener('DOMContentLoaded', function() {
            // .flow-jsonã‚¯ãƒ©ã‚¹ã®ã¿ã«ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ã‚’è¿½åŠ (æ¼”ç¿’å•é¡Œã®JSONãƒ•ãƒ­ãƒ¼ã®ã¿)
            const codeBlocks = document.querySelectorAll('.flow-json');
            
            codeBlocks.forEach(function(block) {
                // ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ã‚’ä½œæˆ
                const button = document.createElement('button');
                button.className = 'copy-button';
                button.textContent = 'ã‚³ãƒ”ãƒ¼';
                
                // ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¿½åŠ 
                button.addEventListener('click', function() {
                    // ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’å–å¾—
                    const code = block.textContent.replace('ã‚³ãƒ”ãƒ¼', '').trim();
                    
                    // ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼
                    navigator.clipboard.writeText(code).then(function() {
                        // æˆåŠŸæ™‚ã®è¦–è¦šçš„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
                        button.textContent = 'ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ!';
                        button.classList.add('copied');
                        
                        // 2ç§’å¾Œã«å…ƒã«æˆ»ã™
                        setTimeout(function() {
                            button.textContent = 'ã‚³ãƒ”ãƒ¼';
                            button.classList.remove('copied');
                        }, 2000);
                    }).catch(function(err) {
                        console.error('ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ:', err);
                        button.textContent = 'ã‚¨ãƒ©ãƒ¼';
                        setTimeout(function() {
                            button.textContent = 'ã‚³ãƒ”ãƒ¼';
                        }, 2000);
                    });
                });
                
                // ãƒœã‚¿ãƒ³ã‚’ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã«è¿½åŠ 
                block.style.position = 'relative';
                block.appendChild(button);
            });
        });
    </script>
</body>
</html>

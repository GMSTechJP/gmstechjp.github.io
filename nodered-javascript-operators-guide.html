<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScriptæ¼”ç®—å­ åŸºç¤ã‚¬ã‚¤ãƒ‰ - Node-RED ã§ä½¿ã†æ¼”ç®—å­</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.8;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }
        
        h1 {
            color: #8f0000;
            border-bottom: 3px solid #8f0000;
            padding-bottom: 10px;
        }
        
        h2 {
            color: #c00000;
            margin-top: 30px;
            border-left: 5px solid #c00000;
            padding-left: 15px;
        }
        
        h3 {
            color: #555;
            margin-top: 25px;
        }
        
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .node-example {
            background-color: #2d3133;
            padding: 20px;
            border-radius: 5px;
            margin: 20px 0;
            color: white;
            font-family: 'Courier New', monospace;
        }
        
        .node {
            display: inline-block;
            padding: 8px 15px;
            border-radius: 4px;
            margin: 5px;
            font-weight: bold;
            font-size: 14px;
        }
        
        .node-inject {
            background-color: #3fadb5;
            color: white;
        }
        
        .node-function {
            background-color: #e8a658;
            color: white;
        }
        
        .node-change {
            background-color: #e7a070;
            color: white;
        }
        
        .node-switch {
            background-color: #e2d96e;
            color: #333;
        }
        
        .node-debug {
            background-color: #87a48d;
            color: white;
        }
        
        .node-template {
            background-color: #d4b8a0;
            color: #333;
        }
        
        .arrow {
            color: #999;
            font-size: 20px;
            margin: 0 10px;
        }
        
        .important {
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }
        
        .tip {
            background-color: #d1ecf1;
            border-left: 4px solid #17a2b8;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }
        
        .warning {
            background-color: #f8d7da;
            border-left: 4px solid #dc3545;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }
        
        .code-block {
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 15px;
            margin: 15px 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            position: relative;
            white-space: pre-wrap;
        }
        
        .js-code {
            background-color: #1e1e1e;
            color: #d4d4d4;
            border: none;
            padding: 15px;
            padding-top: 40px;
            border-radius: 5px;
            position: relative;
            white-space: pre;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
        }
        
        .copy-button {
            position: absolute;
            top: 8px;
            right: 8px;
            padding: 6px 12px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            font-family: 'Segoe UI', sans-serif;
            transition: background-color 0.2s;
            z-index: 10;
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .copy-button:hover {
            background-color: #0056b3;
        }
        
        .copy-button.copied {
            background-color: #28a745;
        }
        
        .copy-button svg {
            width: 14px;
            height: 14px;
            fill: currentColor;
        }
        
        .exercise {
            background-color: #e8f5e9;
            border: 2px solid #4caf50;
            border-radius: 8px;
            padding: 20px;
            margin: 25px 0;
        }
        
        .exercise h3 {
            color: #2e7d32;
            margin-top: 0;
        }
        
        .difficulty {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
            margin-left: 10px;
        }
        
        .difficulty-easy {
            background-color: #4caf50;
            color: white;
        }
        
        .difficulty-medium {
            background-color: #ff9800;
            color: white;
        }
        
        .difficulty-hard {
            background-color: #f44336;
            color: white;
        }
        
        ul, ol {
            padding-left: 25px;
        }
        
        li {
            margin: 8px 0;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        
        th {
            background-color: #e8a658;
            color: white;
        }
        
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        .flow-json {
            background-color: #263238;
            color: #aed581;
            padding: 15px;
            padding-top: 40px;
            border-radius: 5px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 400px;
            overflow-y: auto;
            position: relative;
        }
        
        details {
            margin: 15px 0;
        }
        
        summary {
            cursor: pointer;
            padding: 10px;
            background-color: #6c757d;
            color: white;
            border-radius: 4px;
            font-weight: bold;
        }
        
        summary:hover {
            background-color: #5a6268;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .feature-card {
            background-color: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
        }
        
        .feature-card h4 {
            color: #d48c2e;
            margin-top: 0;
        }
        
        .operator-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: bold;
            font-family: 'Courier New', monospace;
            margin-right: 5px;
        }
        
        .badge-arithmetic {
            background-color: #28a745;
            color: white;
        }
        
        .badge-comparison {
            background-color: #17a2b8;
            color: white;
        }
        
        .badge-logical {
            background-color: #6f42c1;
            color: white;
        }
        
        .badge-assignment {
            background-color: #fd7e14;
            color: white;
        }
        
        .result-box {
            display: inline-block;
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
            padding: 2px 8px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            color: #155724;
        }
        
        .result-false {
            background-color: #f8d7da;
            border-color: #f5c6cb;
            color: #721c24;
        }
        
        .operator-table {
            font-size: 14px;
        }
        
        .operator-table td:first-child {
            font-family: 'Courier New', monospace;
            font-weight: bold;
            text-align: center;
            background-color: #f8f9fa;
        }
        
        .operator-table td:nth-child(3) {
            font-family: 'Courier New', monospace;
        }
        
        .category-header {
            background-color: #343a40;
            color: white;
            padding: 10px 15px;
            border-radius: 5px 5px 0 0;
            margin-bottom: 0;
            font-weight: bold;
        }
        
        .category-content {
            border: 2px solid #343a40;
            border-top: none;
            border-radius: 0 0 5px 5px;
            padding: 15px;
            margin-top: 0;
            margin-bottom: 20px;
        }
        
        .comparison-visual {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .comparison-item {
            background-color: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 15px 25px;
            text-align: center;
        }
        
        .comparison-item .expr {
            font-family: 'Courier New', monospace;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .comparison-item .result-true {
            color: #28a745;
            font-weight: bold;
        }
        
        .comparison-item .result-false {
            color: #dc3545;
            font-weight: bold;
            background-color: transparent;
            border: none;
            padding: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”¢ JavaScriptæ¼”ç®—å­ åŸºç¤ã‚¬ã‚¤ãƒ‰</h1>
        <p><strong>Node-RED / Node.js / JavaScript ã§ä½¿ã†æ¼”ç®—å­</strong></p>
        
        <p>ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ã€Node-REDã®Functionãƒãƒ¼ãƒ‰ã‚„Switchãƒãƒ¼ãƒ‰ã§ä½¿ã†<strong>JavaScriptæ¼”ç®—å­</strong>ã«ã¤ã„ã¦ã€åˆå¿ƒè€…ã®æ–¹ã§ã‚‚ç†è§£ã§ãã‚‹ã‚ˆã†ã«è©³ã—ãèª¬æ˜ã—ã¾ã™ã€‚</p>
        
        <h2>ğŸ“š 1. æ¼”ç®—å­ã¨ã¯?</h2>
        
        <h3>ğŸ¤” ã€Œæ¼”ç®—å­ã€ã£ã¦ä½•?</h3>
        <p>
            æ¼”ç®—å­ï¼ˆã‚ªãƒšãƒ¬ãƒ¼ã‚¿ï¼‰ã¨ã¯ã€<strong>è¨ˆç®—ã‚„æ¯”è¼ƒã‚’è¡Œã†ãŸã‚ã®è¨˜å·</strong>ã§ã™ã€‚
            æ—¥å¸¸ç”Ÿæ´»ã§ä¾‹ãˆã‚‹ã¨ã€<strong>é›»å“ã®ãƒœã‚¿ãƒ³</strong>ã®ã‚ˆã†ãªã‚‚ã®ã§ã™ã€‚
            ã€Œ+ã€ã‚’æŠ¼ã›ã°è¶³ã—ç®—ã€ã€Œ-ã€ã‚’æŠ¼ã›ã°å¼•ãç®—ãŒã§ãã‚‹ã‚ˆã†ã«ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã‚‚è¨˜å·ã‚’ä½¿ã£ã¦æ§˜ã€…ãªå‡¦ç†ã‚’è¡Œã„ã¾ã™ã€‚
        </p>
        
        <div class="important">
            <p><strong>ğŸ§® é›»å“ã«ä¾‹ãˆã‚‹ã¨:</strong></p>
            <ul>
                <li>â• <strong>è¶³ã—ç®—ãƒœã‚¿ãƒ³</strong> = <code>+</code> æ¼”ç®—å­</li>
                <li>â– <strong>å¼•ãç®—ãƒœã‚¿ãƒ³</strong> = <code>-</code> æ¼”ç®—å­</li>
                <li>âœ–ï¸ <strong>æ›ã‘ç®—ãƒœã‚¿ãƒ³</strong> = <code>*</code> æ¼”ç®—å­</li>
                <li>â— <strong>å‰²ã‚Šç®—ãƒœã‚¿ãƒ³</strong> = <code>/</code> æ¼”ç®—å­</li>
                <li>âš–ï¸ <strong>æ¯”è¼ƒï¼ˆå¤§å°åˆ¤å®šï¼‰</strong> = <code>&lt;</code> <code>&gt;</code> <code>===</code> æ¼”ç®—å­</li>
            </ul>
        </div>
        
        <h3>ğŸ“‹ æ¼”ç®—å­ã®ç¨®é¡</h3>
        <div class="feature-grid">
            <div class="feature-card">
                <h4><span class="operator-badge badge-arithmetic">+ - * /</span> ç®—è¡“æ¼”ç®—å­</h4>
                <p>æ•°å€¤ã®è¨ˆç®—ã‚’è¡Œã†</p>
                <div class="code-block">è¶³ã—ç®—ã€å¼•ãç®—ã€
æ›ã‘ç®—ã€å‰²ã‚Šç®—ãªã©</div>
            </div>
            
            <div class="feature-card">
                <h4><span class="operator-badge badge-comparison">== != &lt; &gt;</span> æ¯”è¼ƒæ¼”ç®—å­</h4>
                <p>å€¤ã‚’æ¯”è¼ƒã—ã¦true/falseã‚’è¿”ã™</p>
                <div class="code-block">ç­‰ã—ã„ã€å¤§ãã„ã€
å°ã•ã„ã€ä»¥ä¸Šã€ä»¥ä¸‹</div>
            </div>
            
            <div class="feature-card">
                <h4><span class="operator-badge badge-logical">&amp;&amp; || !</span> è«–ç†æ¼”ç®—å­</h4>
                <p>è¤‡æ•°ã®æ¡ä»¶ã‚’çµ„ã¿åˆã‚ã›ã‚‹</p>
                <div class="code-block">ã‹ã¤(AND)ã€
ã¾ãŸã¯(OR)ã€å¦å®š(NOT)</div>
            </div>
            
            <div class="feature-card">
                <h4><span class="operator-badge badge-assignment">= += -=</span> ä»£å…¥æ¼”ç®—å­</h4>
                <p>å¤‰æ•°ã«å€¤ã‚’è¨­å®šã™ã‚‹</p>
                <div class="code-block">ä»£å…¥ã€åŠ ç®—ä»£å…¥ã€
æ¸›ç®—ä»£å…¥ãªã©</div>
            </div>
        </div>
        
        <h2>â• 2. ç®—è¡“æ¼”ç®—å­ï¼ˆå››å‰‡æ¼”ç®—ï¼‰</h2>
        
        <p>æ•°å€¤ã®è¨ˆç®—ã‚’è¡Œã†æ¼”ç®—å­ã§ã™ã€‚å°å­¦æ ¡ã§ç¿’ã£ãŸç®—æ•°ã¨åŒã˜æ¦‚å¿µã§ã™ãŒã€è¨˜å·ãŒå°‘ã—ç•°ãªã‚Šã¾ã™ã€‚</p>
        
        <div class="category-header">ğŸ”¢ ç®—è¡“æ¼”ç®—å­ä¸€è¦§</div>
        <div class="category-content">
            <table class="operator-table">
                <tr>
                    <th>æ¼”ç®—å­</th>
                    <th>åå‰</th>
                    <th>ä¾‹</th>
                    <th>çµæœ</th>
                    <th>èª¬æ˜</th>
                </tr>
                <tr>
                    <td>+</td>
                    <td>åŠ ç®—ï¼ˆè¶³ã—ç®—ï¼‰</td>
                    <td>10 + 3</td>
                    <td><span class="result-box">13</span></td>
                    <td>å·¦å³ã®å€¤ã‚’è¶³ã™</td>
                </tr>
                <tr>
                    <td>-</td>
                    <td>æ¸›ç®—ï¼ˆå¼•ãç®—ï¼‰</td>
                    <td>10 - 3</td>
                    <td><span class="result-box">7</span></td>
                    <td>å·¦ã‹ã‚‰å³ã‚’å¼•ã</td>
                </tr>
                <tr>
                    <td>*</td>
                    <td>ä¹—ç®—ï¼ˆæ›ã‘ç®—ï¼‰</td>
                    <td>10 * 3</td>
                    <td><span class="result-box">30</span></td>
                    <td>å·¦å³ã®å€¤ã‚’æ›ã‘ã‚‹ï¼ˆÃ—ã§ã¯ãªã*ï¼‰</td>
                </tr>
                <tr>
                    <td>/</td>
                    <td>é™¤ç®—ï¼ˆå‰²ã‚Šç®—ï¼‰</td>
                    <td>10 / 3</td>
                    <td><span class="result-box">3.333...</span></td>
                    <td>å·¦ã‚’å³ã§å‰²ã‚‹ï¼ˆÃ·ã§ã¯ãªã/ï¼‰</td>
                </tr>
                <tr>
                    <td>%</td>
                    <td>å‰°ä½™ï¼ˆä½™ã‚Šï¼‰</td>
                    <td>10 % 3</td>
                    <td><span class="result-box">1</span></td>
                    <td>å‰²ã‚Šç®—ã®ä½™ã‚Šã‚’æ±‚ã‚ã‚‹</td>
                </tr>
                <tr>
                    <td>**</td>
                    <td>ã¹ãä¹—</td>
                    <td>2 ** 3</td>
                    <td><span class="result-box">8</span></td>
                    <td>2ã®3ä¹— = 2Ã—2Ã—2</td>
                </tr>
            </table>
        </div>
        
        <div class="tip">
            <p><strong>ğŸ“Œ ã‚ˆãä½¿ã†å‰°ä½™æ¼”ç®—å­ï¼ˆ%ï¼‰ã®ä½¿ã„é“:</strong></p>
            <ul>
                <li><strong>å¶æ•°/å¥‡æ•°ã®åˆ¤å®š</strong>: <code>n % 2 === 0</code> ãªã‚‰å¶æ•°</li>
                <li><strong>Nå›ã«1å›ã®å‡¦ç†</strong>: <code>count % 5 === 0</code> ãªã‚‰5å›ã«1å›</li>
                <li><strong>å¾ªç’°å‡¦ç†</strong>: <code>index % é…åˆ—ã®é•·ã•</code> ã§é…åˆ—ã‚’ãƒ«ãƒ¼ãƒ—</li>
            </ul>
        </div>
        
        <h3>ğŸ”§ Node-REDã§ã®ä½¿ç”¨ä¾‹ï¼ˆFunctionãƒãƒ¼ãƒ‰ï¼‰</h3>
        
        <div class="node-example">
            <span class="node node-inject">Inject<br><small>(æ•°å€¤)</small></span>
            <span class="arrow">â†’</span>
            <span class="node node-function">Function<br><small>(è¨ˆç®—)</small></span>
            <span class="arrow">â†’</span>
            <span class="node node-debug">Debug</span>
        </div>
        
        <div class="js-code" data-copy="true">// Functionãƒãƒ¼ãƒ‰ã§ã®ç®—è¡“æ¼”ç®—ã®ä¾‹

// ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’å—ã‘å–ã£ã¦è¨ˆç®—
let temperature = msg.payload.temperature;  // 25.5
let humidity = msg.payload.humidity;        // 60

// è¶³ã—ç®—
let sum = temperature + humidity;           // 85.5

// å¹³å‡å€¤ã®è¨ˆç®—
let average = (temperature + humidity) / 2; // 42.75

// æ¸©åº¦ã‚’ãƒ•ã‚¡ãƒ¼ãƒ¬ãƒ³ãƒã‚¤ãƒˆã«å¤‰æ›
let fahrenheit = temperature * 9 / 5 + 32;  // 77.9

// 10ä»¶ã”ã¨ã«å‡¦ç†ï¼ˆå‰°ä½™ã®æ´»ç”¨ï¼‰
let count = msg.payload.count;
if (count % 10 === 0) {
    // 10ä»¶ç›®ã€20ä»¶ç›®ã€30ä»¶ç›®...ã§å®Ÿè¡Œ
    node.warn("10ä»¶å‡¦ç†ã—ã¾ã—ãŸ: " + count);
}

msg.payload = {
    sum: sum,
    average: average,
    fahrenheit: fahrenheit
};
return msg;</div>
        
        <div class="warning">
            <p><strong>âš ï¸ æ–‡å­—åˆ—ã®ã€Œ+ã€ã«æ³¨æ„!</strong></p>
            <p><code>+</code> ã¯æ–‡å­—åˆ—ã‚’é€£çµã™ã‚‹æ©Ÿèƒ½ã‚‚ã‚ã‚Šã¾ã™ã€‚æ•°å€¤ã¨æ–‡å­—åˆ—ã‚’è¶³ã™ã¨äºˆæœŸã—ãªã„çµæœã«ãªã‚Šã¾ã™ã€‚</p>
            <div class="code-block">"10" + 3     â†’ "103"   // æ–‡å­—åˆ—é€£çµã«ãªã£ã¦ã—ã¾ã†
10 + 3       â†’ 13      // æ•°å€¤ã®è¶³ã—ç®—
Number("10") + 3 â†’ 13  // æ•°å€¤ã«å¤‰æ›ã—ã¦ã‹ã‚‰è¨ˆç®—</div>
        </div>
        
        <h2>âš–ï¸ 3. æ¯”è¼ƒæ¼”ç®—å­</h2>
        
        <p>2ã¤ã®å€¤ã‚’æ¯”è¼ƒã—ã¦ã€<strong>trueï¼ˆçœŸï¼‰</strong>ã¾ãŸã¯<strong>falseï¼ˆå½ï¼‰</strong>ã‚’è¿”ã™æ¼”ç®—å­ã§ã™ã€‚
        æ¡ä»¶åˆ†å²ï¼ˆifæ–‡ã‚„Switchãƒãƒ¼ãƒ‰ï¼‰ã§å¿…é ˆã®çŸ¥è­˜ã§ã™ã€‚</p>
        
        <div class="category-header">ğŸ” æ¯”è¼ƒæ¼”ç®—å­ä¸€è¦§</div>
        <div class="category-content">
            <table class="operator-table">
                <tr>
                    <th>æ¼”ç®—å­</th>
                    <th>åå‰</th>
                    <th>ä¾‹</th>
                    <th>çµæœ</th>
                    <th>èª¬æ˜</th>
                </tr>
                <tr>
                    <td>===</td>
                    <td>å³å¯†ç­‰ä¾¡</td>
                    <td>5 === 5</td>
                    <td><span class="result-box">true</span></td>
                    <td>å€¤ã¨å‹ãŒä¸¡æ–¹åŒã˜ï¼ˆæ¨å¥¨ï¼‰</td>
                </tr>
                <tr>
                    <td>!==</td>
                    <td>å³å¯†ä¸ç­‰ä¾¡</td>
                    <td>5 !== "5"</td>
                    <td><span class="result-box">true</span></td>
                    <td>å€¤ã¾ãŸã¯å‹ãŒç•°ãªã‚‹ï¼ˆæ¨å¥¨ï¼‰</td>
                </tr>
                <tr>
                    <td>==</td>
                    <td>ç­‰ä¾¡</td>
                    <td>5 == "5"</td>
                    <td><span class="result-box">true</span></td>
                    <td>å‹å¤‰æ›å¾Œã«å€¤ãŒåŒã˜ï¼ˆéæ¨å¥¨ï¼‰</td>
                </tr>
                <tr>
                    <td>!=</td>
                    <td>ä¸ç­‰ä¾¡</td>
                    <td>5 != "5"</td>
                    <td><span class="result-box result-false">false</span></td>
                    <td>å‹å¤‰æ›å¾Œã«å€¤ãŒç•°ãªã‚‹ï¼ˆéæ¨å¥¨ï¼‰</td>
                </tr>
                <tr>
                    <td>&lt;</td>
                    <td>å°ãªã‚Š</td>
                    <td>3 &lt; 5</td>
                    <td><span class="result-box">true</span></td>
                    <td>å·¦ãŒå³ã‚ˆã‚Šå°ã•ã„</td>
                </tr>
                <tr>
                    <td>&gt;</td>
                    <td>å¤§ãªã‚Š</td>
                    <td>3 &gt; 5</td>
                    <td><span class="result-box result-false">false</span></td>
                    <td>å·¦ãŒå³ã‚ˆã‚Šå¤§ãã„</td>
                </tr>
                <tr>
                    <td>&lt;=</td>
                    <td>ä»¥ä¸‹</td>
                    <td>5 &lt;= 5</td>
                    <td><span class="result-box">true</span></td>
                    <td>å·¦ãŒå³ä»¥ä¸‹</td>
                </tr>
                <tr>
                    <td>&gt;=</td>
                    <td>ä»¥ä¸Š</td>
                    <td>3 &gt;= 5</td>
                    <td><span class="result-box result-false">false</span></td>
                    <td>å·¦ãŒå³ä»¥ä¸Š</td>
                </tr>
            </table>
        </div>
        
        <h3>ğŸ¯ === ã¨ == ã®é•ã„ï¼ˆé‡è¦!ï¼‰</h3>
        
        <div class="comparison-visual">
            <div class="comparison-item">
                <div class="expr">5 === 5</div>
                <div class="result-true">âœ“ true</div>
                <small>æ•°å€¤ã¨æ•°å€¤ã€å€¤ã‚‚å‹ã‚‚åŒã˜</small>
            </div>
            <div class="comparison-item">
                <div class="expr">5 === "5"</div>
                <div class="result-false">âœ— false</div>
                <small>æ•°å€¤ã¨æ–‡å­—åˆ—ã€å‹ãŒé•ã†</small>
            </div>
            <div class="comparison-item">
                <div class="expr">5 == "5"</div>
                <div class="result-true">âœ“ true</div>
                <small>å‹å¤‰æ›å¾Œã«æ¯”è¼ƒï¼ˆå±é™ºï¼‰</small>
            </div>
        </div>
        
        <div class="important">
            <p><strong>ğŸ’¡ === ã‚’ä½¿ã†ã¹ãç†ç”±:</strong></p>
            <p><code>==</code> ã¯å‹å¤‰æ›ã‚’è¡Œã†ãŸã‚ã€äºˆæœŸã—ãªã„çµæœã‚’æ‹›ãã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚
            ãƒã‚°ã®åŸå› ã«ãªã‚Šã‚„ã™ã„ãŸã‚ã€<strong>å¸¸ã« <code>===</code>ï¼ˆå³å¯†ç­‰ä¾¡ï¼‰ã‚’ä½¿ã†</strong>ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚</p>
            <div class="code-block">// å±é™ºãªä¾‹ï¼ˆ==ã‚’ä½¿ç”¨ï¼‰
0 == ""       // trueï¼ˆä¸¡æ–¹falsyå€¤ã¨ã—ã¦æ‰±ã‚ã‚Œã‚‹ï¼‰
0 == false    // true
"" == false   // true
null == undefined // true

// å®‰å…¨ãªä¾‹ï¼ˆ===ã‚’ä½¿ç”¨ï¼‰
0 === ""      // false
0 === false   // false
"" === false  // false
null === undefined // false</div>
        </div>
        
        <h3>ğŸ”§ Node-REDã§ã®ä½¿ç”¨ä¾‹ï¼ˆSwitchãƒãƒ¼ãƒ‰ï¼‰</h3>
        
        <div class="node-example">
            <span class="node node-inject">Inject<br><small>(æ¸©åº¦)</small></span>
            <span class="arrow">â†’</span>
            <span class="node node-switch">Switch<br><small>(æ¡ä»¶åˆ†å²)</small></span>
            <span class="arrow">â†’â†’â†’</span>
            <span class="node node-debug">Debug<br><small>(é«˜æ¸©/æ­£å¸¸/ä½æ¸©)</small></span>
        </div>
        
        <p>Switchãƒãƒ¼ãƒ‰ã§ã¯æ¯”è¼ƒæ¼”ç®—å­ã‚’è¦–è¦šçš„ã«è¨­å®šã§ãã¾ã™:</p>
        
        <div class="code-block">// Switchãƒãƒ¼ãƒ‰ã®æ¡ä»¶è¨­å®šä¾‹
æ¡ä»¶1: msg.payload > 30   â†’ å‡ºåŠ›1ï¼ˆé«˜æ¸©ã‚¢ãƒ©ãƒ¼ãƒˆï¼‰
æ¡ä»¶2: msg.payload >= 20  â†’ å‡ºåŠ›2ï¼ˆæ­£å¸¸ï¼‰
æ¡ä»¶3: msg.payload < 20   â†’ å‡ºåŠ›3ï¼ˆä½æ¸©ã‚¢ãƒ©ãƒ¼ãƒˆï¼‰</div>
        
        <h3>ğŸ”§ Functionãƒãƒ¼ãƒ‰ã§ã®ä½¿ç”¨ä¾‹</h3>
        
        <div class="js-code" data-copy="true">// Functionãƒãƒ¼ãƒ‰ã§ã®æ¯”è¼ƒæ¼”ç®—ã®ä¾‹

let temperature = msg.payload;

// å˜ç´”ãªæ¯”è¼ƒ
if (temperature > 30) {
    msg.payload = "é«˜æ¸©è­¦å ±";
    msg.level = "danger";
} else if (temperature >= 20) {
    msg.payload = "æ­£å¸¸";
    msg.level = "normal";
} else {
    msg.payload = "ä½æ¸©è­¦å ±";
    msg.level = "warning";
}

// å³å¯†ç­‰ä¾¡ã§ã®æ¯”è¼ƒ
if (msg.topic === "sensor_A") {
    // ã‚»ãƒ³ã‚µãƒ¼Aã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿ã®ã¿å‡¦ç†
}

// ç¯„å›²ãƒã‚§ãƒƒã‚¯ï¼ˆ20ä»¥ä¸Š30ä»¥ä¸‹ï¼‰
if (temperature >= 20 && temperature <= 30) {
    msg.payload = "é©æ­£ç¯„å›²å†…";
}

return msg;</div>
        
        <h2>ğŸ”— 4. è«–ç†æ¼”ç®—å­</h2>
        
        <p>è¤‡æ•°ã®æ¡ä»¶ã‚’çµ„ã¿åˆã‚ã›ãŸã‚Šã€æ¡ä»¶ã‚’åè»¢ã•ã›ã‚‹æ¼”ç®—å­ã§ã™ã€‚</p>
        
        <div class="category-header">ğŸ§  è«–ç†æ¼”ç®—å­ä¸€è¦§</div>
        <div class="category-content">
            <table class="operator-table">
                <tr>
                    <th>æ¼”ç®—å­</th>
                    <th>åå‰</th>
                    <th>ä¾‹</th>
                    <th>çµæœ</th>
                    <th>èª¬æ˜</th>
                </tr>
                <tr>
                    <td>&amp;&amp;</td>
                    <td>ANDï¼ˆã‹ã¤ï¼‰</td>
                    <td>true && true</td>
                    <td><span class="result-box">true</span></td>
                    <td>ä¸¡æ–¹trueã®å ´åˆã®ã¿true</td>
                </tr>
                <tr>
                    <td>||</td>
                    <td>ORï¼ˆã¾ãŸã¯ï¼‰</td>
                    <td>true || false</td>
                    <td><span class="result-box">true</span></td>
                    <td>ã©ã¡ã‚‰ã‹ãŒtrueãªã‚‰true</td>
                </tr>
                <tr>
                    <td>!</td>
                    <td>NOTï¼ˆå¦å®šï¼‰</td>
                    <td>!true</td>
                    <td><span class="result-box result-false">false</span></td>
                    <td>true/falseã‚’åè»¢</td>
                </tr>
            </table>
            
            <h4>è«–ç†æ¼”ç®—ã®çœŸç†å€¤è¡¨</h4>
            <table>
                <tr>
                    <th>A</th>
                    <th>B</th>
                    <th>A && B</th>
                    <th>A || B</th>
                    <th>!A</th>
                </tr>
                <tr>
                    <td>true</td>
                    <td>true</td>
                    <td><span class="result-box">true</span></td>
                    <td><span class="result-box">true</span></td>
                    <td><span class="result-box result-false">false</span></td>
                </tr>
                <tr>
                    <td>true</td>
                    <td>false</td>
                    <td><span class="result-box result-false">false</span></td>
                    <td><span class="result-box">true</span></td>
                    <td><span class="result-box result-false">false</span></td>
                </tr>
                <tr>
                    <td>false</td>
                    <td>true</td>
                    <td><span class="result-box result-false">false</span></td>
                    <td><span class="result-box">true</span></td>
                    <td><span class="result-box">true</span></td>
                </tr>
                <tr>
                    <td>false</td>
                    <td>false</td>
                    <td><span class="result-box result-false">false</span></td>
                    <td><span class="result-box result-false">false</span></td>
                    <td><span class="result-box">true</span></td>
                </tr>
            </table>
        </div>
        
        <div class="tip">
            <p><strong>ğŸ“Œ æ—¥å¸¸ç”Ÿæ´»ã§ã®ä¾‹ãˆ:</strong></p>
            <ul>
                <li><strong>ANDï¼ˆ&&ï¼‰</strong>: ã€Œé›¨ãŒé™ã£ã¦ã„ã‚‹ã€<strong>ã‹ã¤</strong>ã€Œå‚˜ãŒãªã„ã€â†’ å¤–å‡ºã—ãªã„</li>
                <li><strong>ORï¼ˆ||ï¼‰</strong>: ã€ŒåœŸæ›œæ—¥ã€<strong>ã¾ãŸã¯</strong>ã€Œæ—¥æ›œæ—¥ã€â†’ ä¼‘æ—¥</li>
                <li><strong>NOTï¼ˆ!ï¼‰</strong>: ã€Œå–¶æ¥­ä¸­ã€ã®<strong>å¦å®š</strong> â†’ é–‰åº—ä¸­</li>
            </ul>
        </div>
        
        <h3>ğŸ”§ Node-REDã§ã®ä½¿ç”¨ä¾‹</h3>
        
        <div class="js-code" data-copy="true">// Functionãƒãƒ¼ãƒ‰ã§ã®è«–ç†æ¼”ç®—ã®ä¾‹

let temperature = msg.payload.temperature;  // æ¸©åº¦
let humidity = msg.payload.humidity;        // æ¹¿åº¦
let isActive = msg.payload.isActive;        // ã‚»ãƒ³ã‚µãƒ¼ç¨¼åƒä¸­

// AND: ä¸¡æ–¹ã®æ¡ä»¶ã‚’æº€ãŸã™å ´åˆ
if (temperature > 30 && humidity > 80) {
    msg.payload = "ç†±ä¸­ç—‡è­¦å ±: é«˜æ¸©å¤šæ¹¿";
}

// OR: ã©ã¡ã‚‰ã‹ã®æ¡ä»¶ã‚’æº€ãŸã™å ´åˆ
if (temperature > 35 || humidity > 90) {
    msg.payload = "å±é™ºè­¦å ±";
}

// NOT: æ¡ä»¶ã®åè»¢
if (!isActive) {
    msg.payload = "ã‚»ãƒ³ã‚µãƒ¼åœæ­¢ä¸­";
    return msg;  // å‡¦ç†ã‚’ä¸­æ–­
}

// è¤‡åˆæ¡ä»¶
// ç¨¼åƒä¸­ ã‹ã¤ (é«˜æ¸© ã¾ãŸã¯ é«˜æ¹¿åº¦)
if (isActive && (temperature > 30 || humidity > 80)) {
    msg.alert = true;
}

return msg;</div>
        
        <h2>ğŸ“ 5. ä»£å…¥æ¼”ç®—å­</h2>
        
        <p>å¤‰æ•°ã«å€¤ã‚’è¨­å®šã—ãŸã‚Šã€è¨ˆç®—çµæœã‚’ä»£å…¥ã™ã‚‹æ¼”ç®—å­ã§ã™ã€‚</p>
        
        <div class="category-header">âœï¸ ä»£å…¥æ¼”ç®—å­ä¸€è¦§</div>
        <div class="category-content">
            <table class="operator-table">
                <tr>
                    <th>æ¼”ç®—å­</th>
                    <th>åå‰</th>
                    <th>ä¾‹</th>
                    <th>åŒç­‰ã®å‡¦ç†</th>
                    <th>èª¬æ˜</th>
                </tr>
                <tr>
                    <td>=</td>
                    <td>ä»£å…¥</td>
                    <td>x = 5</td>
                    <td>-</td>
                    <td>å€¤ã‚’å¤‰æ•°ã«è¨­å®š</td>
                </tr>
                <tr>
                    <td>+=</td>
                    <td>åŠ ç®—ä»£å…¥</td>
                    <td>x += 3</td>
                    <td>x = x + 3</td>
                    <td>è¶³ã—ã¦ä»£å…¥</td>
                </tr>
                <tr>
                    <td>-=</td>
                    <td>æ¸›ç®—ä»£å…¥</td>
                    <td>x -= 3</td>
                    <td>x = x - 3</td>
                    <td>å¼•ã„ã¦ä»£å…¥</td>
                </tr>
                <tr>
                    <td>*=</td>
                    <td>ä¹—ç®—ä»£å…¥</td>
                    <td>x *= 3</td>
                    <td>x = x * 3</td>
                    <td>æ›ã‘ã¦ä»£å…¥</td>
                </tr>
                <tr>
                    <td>/=</td>
                    <td>é™¤ç®—ä»£å…¥</td>
                    <td>x /= 3</td>
                    <td>x = x / 3</td>
                    <td>å‰²ã£ã¦ä»£å…¥</td>
                </tr>
                <tr>
                    <td>++</td>
                    <td>ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆ</td>
                    <td>x++</td>
                    <td>x = x + 1</td>
                    <td>1ã‚’è¶³ã™</td>
                </tr>
                <tr>
                    <td>--</td>
                    <td>ãƒ‡ã‚¯ãƒªãƒ¡ãƒ³ãƒˆ</td>
                    <td>x--</td>
                    <td>x = x - 1</td>
                    <td>1ã‚’å¼•ã</td>
                </tr>
            </table>
        </div>
        
        <div class="js-code" data-copy="true">// ä»£å…¥æ¼”ç®—å­ã®ä½¿ç”¨ä¾‹

let count = 0;

// åŸºæœ¬ã®ä»£å…¥
count = 10;           // count ã¯ 10

// åŠ ç®—ä»£å…¥ï¼ˆã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã§ã‚ˆãä½¿ç”¨ï¼‰
count += 1;           // count ã¯ 11
count++;              // count ã¯ 12ï¼ˆåŒã˜æ„å‘³ï¼‰

// æ¸›ç®—ä»£å…¥
count -= 5;           // count ã¯ 7

// ä¹—ç®—ä»£å…¥
count *= 2;           // count ã¯ 14

// æ–‡å­—åˆ—ã®é€£çµã«ã‚‚ä½¿ãˆã‚‹
let message = "Hello";
message += " World";  // message ã¯ "Hello World"</div>
        
        <h2>âš¡ 6. æ¼”ç®—å­ã®å„ªå…ˆé †ä½</h2>
        
        <p>è¤‡æ•°ã®æ¼”ç®—å­ã‚’ä½¿ã†å ´åˆã€è¨ˆç®—ã•ã‚Œã‚‹é †åºãŒã‚ã‚Šã¾ã™ã€‚æ•°å­¦ã®å››å‰‡æ¼”ç®—ã¨åŒã˜ãã€æ›ã‘ç®—ãƒ»å‰²ã‚Šç®—ãŒå…ˆã«è¨ˆç®—ã•ã‚Œã¾ã™ã€‚</p>
        
        <div class="category-header">ğŸ“Š å„ªå…ˆé †ä½ï¼ˆé«˜ã„é †ï¼‰</div>
        <div class="category-content">
            <table>
                <tr>
                    <th>å„ªå…ˆåº¦</th>
                    <th>æ¼”ç®—å­</th>
                    <th>èª¬æ˜</th>
                </tr>
                <tr>
                    <td>1ï¼ˆæœ€é«˜ï¼‰</td>
                    <td><code>()</code></td>
                    <td>æ‹¬å¼§ï¼ˆã‚°ãƒ«ãƒ¼ãƒ—åŒ–ï¼‰</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td><code>!</code> <code>++</code> <code>--</code></td>
                    <td>å¦å®šã€ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆ</td>
                </tr>
                <tr>
                    <td>3</td>
                    <td><code>**</code></td>
                    <td>ã¹ãä¹—</td>
                </tr>
                <tr>
                    <td>4</td>
                    <td><code>*</code> <code>/</code> <code>%</code></td>
                    <td>ä¹—ç®—ã€é™¤ç®—ã€å‰°ä½™</td>
                </tr>
                <tr>
                    <td>5</td>
                    <td><code>+</code> <code>-</code></td>
                    <td>åŠ ç®—ã€æ¸›ç®—</td>
                </tr>
                <tr>
                    <td>6</td>
                    <td><code>&lt;</code> <code>&lt;=</code> <code>&gt;</code> <code>&gt;=</code></td>
                    <td>æ¯”è¼ƒï¼ˆå¤§å°ï¼‰</td>
                </tr>
                <tr>
                    <td>7</td>
                    <td><code>===</code> <code>!==</code> <code>==</code> <code>!=</code></td>
                    <td>ç­‰ä¾¡æ¯”è¼ƒ</td>
                </tr>
                <tr>
                    <td>8</td>
                    <td><code>&amp;&amp;</code></td>
                    <td>è«–ç†AND</td>
                </tr>
                <tr>
                    <td>9</td>
                    <td><code>||</code></td>
                    <td>è«–ç†OR</td>
                </tr>
                <tr>
                    <td>10ï¼ˆæœ€ä½ï¼‰</td>
                    <td><code>=</code> <code>+=</code> <code>-=</code> ãªã©</td>
                    <td>ä»£å…¥</td>
                </tr>
            </table>
        </div>
        
        <div class="tip">
            <p><strong>ğŸ“Œ è¿·ã£ãŸã‚‰æ‹¬å¼§ã‚’ä½¿ã†!</strong></p>
            <p>å„ªå…ˆé †ä½ã‚’è¦šãˆã‚‹ã‚ˆã‚Šã€<strong>æ‹¬å¼§ <code>()</code> ã‚’ä½¿ã£ã¦æ˜ç¤ºçš„ã«</strong>è¨ˆç®—é †åºã‚’æŒ‡å®šã™ã‚‹ã®ãŒå®‰å…¨ã§ã™ã€‚</p>
            <div class="code-block">// ã‚ã‹ã‚Šã«ãã„
let result = a + b * c > d && e || f;

// ã‚ã‹ã‚Šã‚„ã™ã„ï¼ˆæ‹¬å¼§ã§æ˜ç¤ºï¼‰
let result = ((a + (b * c)) > d) && e) || f;</div>
        </div>
        
        <h2>ğŸ¯ 7. Node-REDã§ã®æ´»ç”¨å ´æ‰€</h2>
        
        <h3>ğŸ“ Functionãƒãƒ¼ãƒ‰</h3>
        <p>JavaScriptã‚³ãƒ¼ãƒ‰ã‚’ç›´æ¥æ›¸ããŸã‚ã€ã™ã¹ã¦ã®æ¼”ç®—å­ãŒä½¿ç”¨å¯èƒ½ã§ã™ã€‚</p>
        
        <div class="node-example">
            <span class="node node-inject">Inject</span>
            <span class="arrow">â†’</span>
            <span class="node node-function">Function</span>
            <span class="arrow">â†’</span>
            <span class="node node-debug">Debug</span>
        </div>
        
        <h3>ğŸ“ Switchãƒãƒ¼ãƒ‰</h3>
        <p>æ¯”è¼ƒæ¼”ç®—å­ã‚’GUIã§è¨­å®šã§ãã¾ã™ã€‚</p>
        
        <div class="code-block">// Switchãƒãƒ¼ãƒ‰ã§è¨­å®šã§ãã‚‹æ¡ä»¶
== (ç­‰ã—ã„)
!= (ç­‰ã—ããªã„)
<  (ã‚ˆã‚Šå°ã•ã„)
<= (ä»¥ä¸‹)
>  (ã‚ˆã‚Šå¤§ãã„)
>= (ä»¥ä¸Š)
is true / is false
is null
is not null
ãªã©</div>
        
        <h3>ğŸ“ Changeãƒãƒ¼ãƒ‰</h3>
        <p>JSONataå¼ã‚’ä½¿ã£ã¦æ¼”ç®—ãŒå¯èƒ½ã§ã™ã€‚</p>
        
        <div class="code-block">// Changeãƒãƒ¼ãƒ‰ã§ã® JSONataå¼ ä¾‹
$sum(payload.values)              // é…åˆ—ã®åˆè¨ˆ
payload.price * payload.quantity  // æ›ã‘ç®—
payload.temperature > 30          // æ¯”è¼ƒï¼ˆtrue/falseï¼‰</div>
        
        <h3>ğŸ“ Templateãƒãƒ¼ãƒ‰</h3>
        <p>Mustacheè¨˜æ³•ã§ã¯æ¼”ç®—å­ã¯ä½¿ãˆã¾ã›ã‚“ãŒã€JavaScriptå‡¦ç†ã‚’æŒŸã‚ã°å¯èƒ½ã§ã™ã€‚</p>
        
        <h2>ğŸ‹ï¸ 8. å®Ÿè·µæ¼”ç¿’</h2>
        
        <div class="exercise">
            <h3>æ¼”ç¿’1: åŸºæœ¬çš„ãªè¨ˆç®—<span class="difficulty difficulty-easy">åˆç´š</span></h3>
            
            <p><strong>ğŸ“ èª²é¡Œ:</strong></p>
            <p>2ã¤ã®æ•°å€¤ã‚’å—ã‘å–ã‚Šã€å››å‰‡æ¼”ç®—ã®çµæœã‚’ã™ã¹ã¦å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚</p>
            
            <p><strong>ğŸ¯ è¦æ±‚ä»•æ§˜:</strong></p>
            <ul>
                <li>Injectã€Functionã€Debugãƒãƒ¼ãƒ‰ã‚’ä½¿ç”¨</li>
                <li>å…¥åŠ›: {a: 10, b: 3}</li>
                <li>å‡ºåŠ›: {sum: 13, diff: 7, product: 30, quotient: 3.33..., remainder: 1}</li>
            </ul>
            
            <details>
                <summary>ğŸ’¡ ãƒ’ãƒ³ãƒˆ</summary>
                <p><strong>Injectãƒãƒ¼ãƒ‰ã®è¨­å®š:</strong></p>
                <ul>
                    <li>payload: JSONå‹ã§ {"a": 10, "b": 3}</li>
                </ul>
                <p><strong>Functionãƒãƒ¼ãƒ‰ã®ã‚³ãƒ¼ãƒ‰:</strong></p>
                <ul>
                    <li>msg.payload.a ã¨ msg.payload.b ã§å€¤ã‚’å–å¾—</li>
                    <li>å„æ¼”ç®—çµæœã‚’æ–°ã—ã„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã¾ã¨ã‚ã‚‹</li>
                </ul>
            </details>
            
            <details>
                <summary>âœ… è§£ç­”ä¾‹ãƒ•ãƒ­ãƒ¼</summary>
                <div class="flow-json">[
    {
        "id": "ex1_inject",
        "type": "inject",
        "name": "æ•°å€¤å…¥åŠ›",
        "props": [{"p": "payload"}],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"a\":10,\"b\":3}",
        "payloadType": "json",
        "x": 120,
        "y": 100,
        "wires": [["ex1_function"]]
    },
    {
        "id": "ex1_function",
        "type": "function",
        "name": "å››å‰‡æ¼”ç®—",
        "func": "let a = msg.payload.a;\nlet b = msg.payload.b;\n\nmsg.payload = {\n    sum: a + b,\n    diff: a - b,\n    product: a * b,\n    quotient: a / b,\n    remainder: a % b\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 300,
        "y": 100,
        "wires": [["ex1_debug"]]
    },
    {
        "id": "ex1_debug",
        "type": "debug",
        "name": "çµæœ",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 470,
        "y": 100,
        "wires": []
    }
]</div>
            </details>
        </div>
        
        <div class="exercise">
            <h3>æ¼”ç¿’2: æ¸©åº¦åˆ¤å®š<span class="difficulty difficulty-easy">åˆç´š</span></h3>
            
            <p><strong>ğŸ“ èª²é¡Œ:</strong></p>
            <p>æ¸©åº¦ã«å¿œã˜ã¦3æ®µéšã®åˆ¤å®šçµæœã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚</p>
            
            <p><strong>ğŸ¯ è¦æ±‚ä»•æ§˜:</strong></p>
            <ul>
                <li>Injectã€Switchãƒãƒ¼ãƒ‰ã€3ã¤ã®Debugãƒãƒ¼ãƒ‰ã‚’ä½¿ç”¨</li>
                <li>30ã‚ˆã‚Šå¤§ãã„ â†’ ã€Œé«˜æ¸©ã€</li>
                <li>20ä»¥ä¸Š30ä»¥ä¸‹ â†’ ã€Œé©æ¸©ã€</li>
                <li>20æœªæº€ â†’ ã€Œä½æ¸©ã€</li>
            </ul>
            
            <details>
                <summary>ğŸ’¡ ãƒ’ãƒ³ãƒˆ</summary>
                <p><strong>Switchãƒãƒ¼ãƒ‰ã®è¨­å®š:</strong></p>
                <ul>
                    <li>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£: msg.payload</li>
                    <li>æ¡ä»¶1: &gt; 30</li>
                    <li>æ¡ä»¶2: &gt;= 20ï¼ˆæ¡ä»¶1ã§30è¶…ã¯é™¤å¤–ã•ã‚Œã¦ã„ã‚‹ï¼‰</li>
                    <li>æ¡ä»¶3: ãã®ä»–ï¼ˆotherwiseï¼‰</li>
                </ul>
            </details>
            
            <details>
                <summary>âœ… è§£ç­”ä¾‹ãƒ•ãƒ­ãƒ¼</summary>
                <div class="flow-json">[
    {
        "id": "ex2_inject_high",
        "type": "inject",
        "name": "35åº¦",
        "props": [{"p": "payload"}],
        "repeat": "",
        "crontab": "",
        "once": false,
        "topic": "",
        "payload": "35",
        "payloadType": "num",
        "x": 110,
        "y": 80,
        "wires": [["ex2_switch"]]
    },
    {
        "id": "ex2_inject_normal",
        "type": "inject",
        "name": "25åº¦",
        "props": [{"p": "payload"}],
        "repeat": "",
        "crontab": "",
        "once": false,
        "topic": "",
        "payload": "25",
        "payloadType": "num",
        "x": 110,
        "y": 140,
        "wires": [["ex2_switch"]]
    },
    {
        "id": "ex2_inject_low",
        "type": "inject",
        "name": "15åº¦",
        "props": [{"p": "payload"}],
        "repeat": "",
        "crontab": "",
        "once": false,
        "topic": "",
        "payload": "15",
        "payloadType": "num",
        "x": 110,
        "y": 200,
        "wires": [["ex2_switch"]]
    },
    {
        "id": "ex2_switch",
        "type": "switch",
        "name": "æ¸©åº¦åˆ¤å®š",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {"t": "gt", "v": "30", "vt": "num"},
            {"t": "gte", "v": "20", "vt": "num"},
            {"t": "else"}
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 3,
        "x": 280,
        "y": 140,
        "wires": [["ex2_debug_high"], ["ex2_debug_normal"], ["ex2_debug_low"]]
    },
    {
        "id": "ex2_debug_high",
        "type": "debug",
        "name": "é«˜æ¸©",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "'é«˜æ¸©: ' & payload & 'åº¦'",
        "targetType": "jsonata",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 450,
        "y": 80,
        "wires": []
    },
    {
        "id": "ex2_debug_normal",
        "type": "debug",
        "name": "é©æ¸©",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "'é©æ¸©: ' & payload & 'åº¦'",
        "targetType": "jsonata",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 450,
        "y": 140,
        "wires": []
    },
    {
        "id": "ex2_debug_low",
        "type": "debug",
        "name": "ä½æ¸©",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "'ä½æ¸©: ' & payload & 'åº¦'",
        "targetType": "jsonata",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 450,
        "y": 200,
        "wires": []
    }
]</div>
            </details>
        </div>
        
        <div class="exercise">
            <h3>æ¼”ç¿’3: è¤‡åˆæ¡ä»¶åˆ¤å®š<span class="difficulty difficulty-medium">ä¸­ç´š</span></h3>
            
            <p><strong>ğŸ“ èª²é¡Œ:</strong></p>
            <p>æ¸©åº¦ã¨æ¹¿åº¦ã®è¤‡åˆæ¡ä»¶ã§ã‚¢ãƒ©ãƒ¼ãƒˆã‚’åˆ¤å®šã—ã¦ãã ã•ã„ã€‚</p>
            
            <p><strong>ğŸ¯ è¦æ±‚ä»•æ§˜:</strong></p>
            <ul>
                <li>Injectã€Functionã€Debugãƒãƒ¼ãƒ‰ã‚’ä½¿ç”¨</li>
                <li>å…¥åŠ›: {temperature: 32, humidity: 85}</li>
                <li>é«˜æ¸©(>30) ã‹ã¤ é«˜æ¹¿åº¦(>80) â†’ "ç†±ä¸­ç—‡è­¦å ±"</li>
                <li>é«˜æ¸©(>30) ã¾ãŸã¯ é«˜æ¹¿åº¦(>80) â†’ "æ³¨æ„å ±"</li>
                <li>ãã‚Œä»¥å¤– â†’ "æ­£å¸¸"</li>
            </ul>
            
            <details>
                <summary>ğŸ’¡ ãƒ’ãƒ³ãƒˆ</summary>
                <p><strong>Functionãƒãƒ¼ãƒ‰ã®ãƒã‚¤ãƒ³ãƒˆ:</strong></p>
                <ul>
                    <li>&& (AND) ã¨ || (OR) ã‚’ä½¿ã„åˆ†ã‘ã‚‹</li>
                    <li>æ¡ä»¶ã®é †åºã«æ³¨æ„ï¼ˆå³ã—ã„æ¡ä»¶ã‹ã‚‰åˆ¤å®šï¼‰</li>
                </ul>
                <div class="code-block">// åˆ¤å®šé †åº
if (æ¡ä»¶A && æ¡ä»¶B) {
    // ä¸¡æ–¹æº€ãŸã™å ´åˆï¼ˆæœ€ã‚‚å³ã—ã„ï¼‰
} else if (æ¡ä»¶A || æ¡ä»¶B) {
    // ã©ã¡ã‚‰ã‹æº€ãŸã™å ´åˆ
} else {
    // ã©ã¡ã‚‰ã‚‚æº€ãŸã•ãªã„å ´åˆ
}</div>
            </details>
            
            <details>
                <summary>âœ… è§£ç­”ä¾‹ãƒ•ãƒ­ãƒ¼</summary>
                <div class="flow-json">[
    {
        "id": "ex3_inject_danger",
        "type": "inject",
        "name": "å±é™º(32åº¦,85%)",
        "props": [{"p": "payload"}],
        "repeat": "",
        "crontab": "",
        "once": false,
        "topic": "",
        "payload": "{\"temperature\":32,\"humidity\":85}",
        "payloadType": "json",
        "x": 150,
        "y": 80,
        "wires": [["ex3_function"]]
    },
    {
        "id": "ex3_inject_warn",
        "type": "inject",
        "name": "æ³¨æ„(32åº¦,60%)",
        "props": [{"p": "payload"}],
        "repeat": "",
        "crontab": "",
        "once": false,
        "topic": "",
        "payload": "{\"temperature\":32,\"humidity\":60}",
        "payloadType": "json",
        "x": 150,
        "y": 140,
        "wires": [["ex3_function"]]
    },
    {
        "id": "ex3_inject_normal",
        "type": "inject",
        "name": "æ­£å¸¸(25åº¦,60%)",
        "props": [{"p": "payload"}],
        "repeat": "",
        "crontab": "",
        "once": false,
        "topic": "",
        "payload": "{\"temperature\":25,\"humidity\":60}",
        "payloadType": "json",
        "x": 150,
        "y": 200,
        "wires": [["ex3_function"]]
    },
    {
        "id": "ex3_function",
        "type": "function",
        "name": "è¤‡åˆæ¡ä»¶åˆ¤å®š",
        "func": "let temp = msg.payload.temperature;\nlet humid = msg.payload.humidity;\n\nlet isHighTemp = temp > 30;\nlet isHighHumid = humid > 80;\n\nlet result;\n\nif (isHighTemp && isHighHumid) {\n    result = \"ç†±ä¸­ç—‡è­¦å ±\";\n} else if (isHighTemp || isHighHumid) {\n    result = \"æ³¨æ„å ±\";\n} else {\n    result = \"æ­£å¸¸\";\n}\n\nmsg.payload = {\n    temperature: temp,\n    humidity: humid,\n    status: result\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 140,
        "wires": [["ex3_debug"]]
    },
    {
        "id": "ex3_debug",
        "type": "debug",
        "name": "çµæœ",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 550,
        "y": 140,
        "wires": []
    }
]</div>
            </details>
        </div>
        
        <div class="exercise">
            <h3>æ¼”ç¿’4: ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã¨Nå›å‡¦ç†<span class="difficulty difficulty-hard">ä¸Šç´š</span></h3>
            
            <p><strong>ğŸ“ èª²é¡Œ:</strong></p>
            <p>ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚«ã‚¦ãƒ³ãƒˆã—ã€5å›ã”ã¨ã«é›†è¨ˆçµæœã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚</p>
            
            <p><strong>ğŸ¯ è¦æ±‚ä»•æ§˜:</strong></p>
            <ul>
                <li>Injectã€Functionï¼ˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆä½¿ç”¨ï¼‰ã€Debugãƒãƒ¼ãƒ‰ã‚’ä½¿ç”¨</li>
                <li>ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å—ã‘å–ã‚‹ãŸã³ã«ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ—</li>
                <li>5ã®å€æ•°ã®ã¨ãã ã‘ã€ã‚«ã‚¦ãƒ³ãƒˆå€¤ã‚’å‡ºåŠ›</li>
                <li>å‰°ä½™æ¼”ç®—å­ï¼ˆ%ï¼‰ã‚’ä½¿ç”¨</li>
            </ul>
            
            <details>
                <summary>ğŸ’¡ ãƒ’ãƒ³ãƒˆ</summary>
                <p><strong>ãƒ•ãƒ­ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®ä½¿ç”¨:</strong></p>
                <ul>
                    <li><code>flow.get("count")</code> ã§å€¤ã‚’å–å¾—</li>
                    <li><code>flow.set("count", value)</code> ã§å€¤ã‚’ä¿å­˜</li>
                    <li><code>count % 5 === 0</code> ã§5ã®å€æ•°ã‚’åˆ¤å®š</li>
                </ul>
                <div class="code-block">// ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆä½¿ç”¨ä¾‹
let count = flow.get("count") || 0;
count++;
flow.set("count", count);

if (count % 5 === 0) {
    // 5ã®å€æ•°ã®ã¨ãã®å‡¦ç†
}</div>
            </details>
            
            <details>
                <summary>âœ… è§£ç­”ä¾‹ãƒ•ãƒ­ãƒ¼</summary>
                <div class="flow-json">[
    {
        "id": "ex4_inject",
        "type": "inject",
        "name": "ã‚«ã‚¦ãƒ³ãƒˆ+1",
        "props": [{"p": "payload"}],
        "repeat": "",
        "crontab": "",
        "once": false,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 130,
        "y": 100,
        "wires": [["ex4_function"]]
    },
    {
        "id": "ex4_reset",
        "type": "inject",
        "name": "ãƒªã‚»ãƒƒãƒˆ",
        "props": [{"p": "reset", "v": "true", "vt": "bool"}],
        "repeat": "",
        "crontab": "",
        "once": false,
        "topic": "",
        "x": 120,
        "y": 160,
        "wires": [["ex4_function"]]
    },
    {
        "id": "ex4_function",
        "type": "function",
        "name": "5å›ã”ã¨ã«å‡ºåŠ›",
        "func": "// ãƒªã‚»ãƒƒãƒˆå‡¦ç†\nif (msg.reset) {\n    flow.set(\"count\", 0);\n    msg.payload = \"ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸ\";\n    return msg;\n}\n\n// ã‚«ã‚¦ãƒ³ãƒˆå–å¾—ãƒ»æ›´æ–°\nlet count = flow.get(\"count\") || 0;\ncount++;\nflow.set(\"count\", count);\n\n// 5ã®å€æ•°ã‹ã©ã†ã‹åˆ¤å®šï¼ˆå‰°ä½™æ¼”ç®—å­ã‚’ä½¿ç”¨ï¼‰\nif (count % 5 === 0) {\n    msg.payload = {\n        message: \"5ä»¶å‡¦ç†å®Œäº†\",\n        totalCount: count\n    };\n    return msg;\n}\n\n// 5ã®å€æ•°ã§ãªã„å ´åˆã¯å‡ºåŠ›ã—ãªã„\nreturn null;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 120,
        "wires": [["ex4_debug"]]
    },
    {
        "id": "ex4_debug",
        "type": "debug",
        "name": "5ä»¶ã”ã¨ã®çµæœ",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 540,
        "y": 120,
        "wires": []
    }
]</div>
            </details>
        </div>
        
        <h2>ğŸ“ 9. ã¾ã¨ã‚</h2>
        
        <div class="important">
            <h3>æ¼”ç®—å­ã®é‡è¦ãƒã‚¤ãƒ³ãƒˆ</h3>
            <ul>
                <li>âœ… <strong>ç®—è¡“æ¼”ç®—å­</strong>: <code>+</code> <code>-</code> <code>*</code> <code>/</code> <code>%</code> ã§æ•°å€¤è¨ˆç®—</li>
                <li>âœ… <strong>æ¯”è¼ƒæ¼”ç®—å­</strong>: <code>===</code> <code>!==</code> <code>&lt;</code> <code>&gt;</code> <code>&lt;=</code> <code>&gt;=</code> ã§å€¤ã‚’æ¯”è¼ƒï¼ˆtrue/falseï¼‰</li>
                <li>âœ… <strong>è«–ç†æ¼”ç®—å­</strong>: <code>&&</code>ï¼ˆANDï¼‰<code>||</code>ï¼ˆORï¼‰<code>!</code>ï¼ˆNOTï¼‰ã§æ¡ä»¶ã‚’çµ„ã¿åˆã‚ã›</li>
                <li>âœ… <strong>ä»£å…¥æ¼”ç®—å­</strong>: <code>=</code> <code>+=</code> <code>++</code> ã§å¤‰æ•°ã«å€¤ã‚’è¨­å®š</li>
                <li>âœ… <strong>å„ªå…ˆé †ä½</strong>: è¿·ã£ãŸã‚‰æ‹¬å¼§ <code>()</code> ã§æ˜ç¤º</li>
            </ul>
        </div>
        
        <div class="warning">
            <h3>âš ï¸ ã‚ˆãã‚ã‚‹é–“é•ã„</h3>
            <ul>
                <li><strong>== ã¨ === ã®æ··åŒ</strong>: å¸¸ã« <code>===</code>ï¼ˆå³å¯†ç­‰ä¾¡ï¼‰ã‚’ä½¿ã†</li>
                <li><strong>= ã¨ == ã®æ··åŒ</strong>: <code>=</code> ã¯ä»£å…¥ã€<code>==</code> ã¯æ¯”è¼ƒ</li>
                <li><strong>æ–‡å­—åˆ— + æ•°å€¤</strong>: æ–‡å­—åˆ—é€£çµã«ãªã£ã¦ã—ã¾ã†ï¼ˆNumber()ã§å¤‰æ›ï¼‰</li>
                <li><strong>0ã§ã®å‰²ã‚Šç®—</strong>: Infinity ã«ãªã‚‹ï¼ˆäº‹å‰ã«ãƒã‚§ãƒƒã‚¯ï¼‰</li>
                <li><strong>&&ã¨||ã®å„ªå…ˆé †ä½</strong>: <code>&&</code> ãŒ <code>||</code> ã‚ˆã‚Šå…ˆã«è©•ä¾¡ã•ã‚Œã‚‹</li>
            </ul>
        </div>
        
        <div class="tip">
            <h3>ğŸ“š æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—</h3>
            <p>æ¼”ç®—å­ã®åŸºç¤ã‚’ãƒã‚¹ã‚¿ãƒ¼ã—ãŸã‚‰ã€ä»¥ä¸‹ã‚‚å­¦ã‚“ã§ã¿ã¾ã—ã‚‡ã†:</p>
            <ul>
                <li><strong>ä¸‰é …æ¼”ç®—å­</strong>: <code>æ¡ä»¶ ? çœŸã®å€¤ : å½ã®å€¤</code></li>
                <li><strong>Nullåˆä½“æ¼”ç®—å­</strong>: <code>å€¤ ?? ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤</code></li>
                <li><strong>ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ãƒã‚§ãƒ¼ãƒ³</strong>: <code>obj?.prop?.nested</code></li>
                <li><strong>ãƒ“ãƒƒãƒˆæ¼”ç®—å­</strong>: <code>&</code> <code>|</code> <code>^</code> <code>~</code>ï¼ˆIoTã§ãƒ•ãƒ©ã‚°å‡¦ç†ã«ä½¿ç”¨ï¼‰</li>
            </ul>
        </div>
        
        <h2>ğŸ”§ 10. ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°</h2>
        
        <h3>ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ–¹æ³•</h3>
        
        <table>
            <tr>
                <th>å•é¡Œ</th>
                <th>åŸå› </th>
                <th>è§£æ±ºæ–¹æ³•</th>
            </tr>
            <tr>
                <td>"103" ã«ãªã‚‹</td>
                <td>"10" + 3 ã§æ–‡å­—åˆ—é€£çµ</td>
                <td>Number("10") + 3 ã§æ•°å€¤ã«å¤‰æ›</td>
            </tr>
            <tr>
                <td>å¸¸ã«true/falseã«ãªã‚‹</td>
                <td>= ã¨ == ã‚’é–“é•ãˆã¦ã„ã‚‹</td>
                <td>æ¯”è¼ƒã¯ === ã‚’ä½¿ç”¨</td>
            </tr>
            <tr>
                <td>NaN ãŒå‡ºã‚‹</td>
                <td>æ•°å€¤ã§ãªã„å€¤ã§è¨ˆç®—</td>
                <td>isNaN() ã§ãƒã‚§ãƒƒã‚¯ã€Number()ã§å¤‰æ›</td>
            </tr>
            <tr>
                <td>Infinity ãŒå‡ºã‚‹</td>
                <td>0ã§å‰²ã‚Šç®—</td>
                <td>å‰²ã‚‹å‰ã« 0 ã§ãªã„ã‹ãƒã‚§ãƒƒã‚¯</td>
            </tr>
            <tr>
                <td>æ¡ä»¶ãŒæœŸå¾…é€šã‚Šã«ãªã‚‰ãªã„</td>
                <td>æ¼”ç®—å­ã®å„ªå…ˆé †ä½</td>
                <td>æ‹¬å¼§ () ã§é †åºã‚’æ˜ç¤º</td>
            </tr>
            <tr>
                <td>undefined ã¨ã®æ¯”è¼ƒ</td>
                <td>å¤‰æ•°ãŒæœªå®šç¾©</td>
                <td>typeof ã§å‹ãƒã‚§ãƒƒã‚¯ã€?? æ¼”ç®—å­ã§ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤</td>
            </tr>
        </table>
        
        <h2>ğŸ”— 11. è¿½åŠ ãƒªã‚½ãƒ¼ã‚¹</h2>
        
        <ul>
            <li><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Guide/Expressions_and_Operators" target="_blank">MDN: å¼ã¨æ¼”ç®—å­</a></li>
            <li><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Operator_Precedence" target="_blank">MDN: æ¼”ç®—å­ã®å„ªå…ˆé †ä½</a></li>
            <li><a href="https://nodered.org/docs/user-guide/writing-functions" target="_blank">Node-RED: Functionãƒãƒ¼ãƒ‰ã®æ›¸ãæ–¹</a></li>
            <li><a href="https://docs.jsonata.org/comparison-operators" target="_blank">JSONata: æ¯”è¼ƒæ¼”ç®—å­</a></li>
        </ul>
        
        <hr>
        
        <p style="text-align: center; color: #999; margin-top: 40px;">
            <small>ã“ã®ã‚¬ã‚¤ãƒ‰ãŒå½¹ã«ç«‹ã¡ã¾ã—ãŸã‚‰ã€å®Ÿéš›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ç·´ç¿’ã—ã¦ã¿ã¦ãã ã•ã„!<br>
            æ¼”ç®—å­ã¯ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®åŸºç¤ä¸­ã®åŸºç¤ã§ã™ã€‚</small>
        </p>
    </div>
    
    <script>
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ã‚’è¿½åŠ 
        document.addEventListener('DOMContentLoaded', function() {
            // .flow-jsonã¨.js-code[data-copy="true"]ã«ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ã‚’è¿½åŠ 
            var codeBlocks = document.querySelectorAll('.flow-json, .js-code[data-copy="true"]');
            
            codeBlocks.forEach(function(block) {
                // ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ã‚’ä½œæˆ
                var button = document.createElement('button');
                button.className = 'copy-button';
                button.innerHTML = '<svg viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>ã‚³ãƒ”ãƒ¼';
                
                // ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¿½åŠ 
                button.addEventListener('click', function() {
                    // ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’å–å¾—ï¼ˆãƒœã‚¿ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’é™¤å¤–ï¼‰
                    var code = block.textContent.replace(/ã‚³ãƒ”ãƒ¼(ã—ã¾ã—ãŸ!)?$/, '').trim();
                    
                    // æ”¹è¡Œã‚’é©åˆ‡ã«å‡¦ç†
                    if (block.classList.contains('js-code')) {
                        code = block.innerText.replace(/ã‚³ãƒ”ãƒ¼(ã—ã¾ã—ãŸ!)?$/, '').trim();
                    }
                    
                    // ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼
                    navigator.clipboard.writeText(code).then(function() {
                        // æˆåŠŸæ™‚ã®è¦–è¦šçš„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
                        button.innerHTML = '<svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ!';
                        button.classList.add('copied');
                        
                        // 2ç§’å¾Œã«å…ƒã«æˆ»ã™
                        setTimeout(function() {
                            button.innerHTML = '<svg viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>ã‚³ãƒ”ãƒ¼';
                            button.classList.remove('copied');
                        }, 2000);
                    }).catch(function(err) {
                        console.error('ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ:', err);
                        button.textContent = 'ã‚¨ãƒ©ãƒ¼';
                        setTimeout(function() {
                            button.innerHTML = '<svg viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>ã‚³ãƒ”ãƒ¼';
                        }, 2000);
                    });
                });
                
                // ãƒœã‚¿ãƒ³ã‚’ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã«è¿½åŠ 
                block.style.position = 'relative';
                block.appendChild(button);
            });
        });
    </script>
</body>
</html>

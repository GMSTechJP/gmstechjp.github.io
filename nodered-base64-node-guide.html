<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Node-RED base64 ãƒãƒ¼ãƒ‰ã‚¬ã‚¤ãƒ‰</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.8; max-width: 1000px; margin: 0 auto; padding: 20px; background-color: #f5f5f5; color: #333; }
        h1 { color: #b92d5d; border-bottom: 3px solid #b92d5d; padding-bottom: 10px; }
        h2 { color: #d33682; margin-top: 40px; border-left: 5px solid #d33682; padding-left: 15px; }
        h3 { color: #555; margin-top: 25px; }
        h4 { color: #666; margin-top: 20px; }
        .container { background-color: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 20px; }
        .node-example { background-color: #2d3133; padding: 20px; border-radius: 5px; margin: 20px 0; color: white; font-family: 'Courier New', monospace; display: flex; align-items: center; flex-wrap: wrap; gap: 5px; }
        .node { display: inline-block; padding: 8px 15px; border-radius: 4px; margin: 5px; font-weight: bold; font-size: 14px; }
        .node-inject { background-color: #3fadb5; color: white; }
        .node-debug { background-color: #87a48d; color: white; }
        .node-function { background-color: #e8a658; color: white; }
        .node-change { background-color: #e7a070; color: white; }
        .node-base64 { background-color: #DEBD5C; color: #333; }
        .node-http-request { background-color: #e8d44d; color: #333; }
        .node-file { background-color: #d4b8a0; color: #333; }
        .node-template { background-color: #e8a658; color: white; }
        .arrow { color: #999; font-size: 20px; margin: 0 10px; }
        .important { background-color: #fce4ec; border-left: 4px solid #b92d5d; padding: 15px; margin: 20px 0; border-radius: 0 5px 5px 0; }
        .tip { background-color: #e8f5e9; border-left: 4px solid #4caf50; padding: 15px; margin: 20px 0; border-radius: 0 5px 5px 0; }
        .warning { background-color: #fff3e0; border-left: 4px solid #ff9800; padding: 15px; margin: 20px 0; border-radius: 0 5px 5px 0; }
        .code-block { background-color: #2d3133; color: #f8f8f2; padding: 15px; border-radius: 5px; margin: 15px 0; overflow-x: auto; font-family: 'Courier New', Consolas, monospace; font-size: 14px; white-space: pre; }
        .flow-json { background-color: #1a1a2e; color: #a6e22e; padding: 15px; border-radius: 5px; font-family: 'Courier New', Consolas, monospace; font-size: 12px; overflow-x: auto; white-space: pre; position: relative; max-height: 400px; overflow-y: auto; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
        th { background-color: #b92d5d; color: white; }
        tr:nth-child(even) { background-color: #f9f9f9; }
        .exercise { background-color: #e3f2fd; padding: 20px; border-radius: 8px; margin: 20px 0; border: 2px solid #2196f3; }
        .exercise h3 { color: #1976d2; margin-top: 0; }
        .difficulty { display: inline-block; padding: 3px 10px; border-radius: 12px; font-size: 12px; font-weight: bold; margin-left: 10px; }
        .difficulty-easy { background-color: #c8e6c9; color: #2e7d32; }
        .difficulty-medium { background-color: #fff9c4; color: #f57f17; }
        .difficulty-hard { background-color: #ffcdd2; color: #c62828; }
        details { background-color: #f5f5f5; padding: 10px 15px; border-radius: 5px; margin: 10px 0; }
        details summary { cursor: pointer; font-weight: bold; color: #1976d2; }
        details[open] summary { margin-bottom: 10px; }
        .toc { background-color: #fafafa; border: 1px solid #ddd; border-radius: 8px; padding: 20px; margin: 20px 0; }
        .toc h3 { margin-top: 0; color: #b92d5d; }
        .toc ul { list-style: none; padding-left: 0; }
        .toc li { padding: 5px 0; }
        .toc a { color: #1976d2; text-decoration: none; }
        .toc a:hover { text-decoration: underline; }
        .copy-button { position: absolute; top: 8px; right: 8px; padding: 6px 12px; background-color: #b92d5d; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 12px; font-family: 'Segoe UI', sans-serif; transition: background-color 0.2s; z-index: 10; display: flex; align-items: center; gap: 4px; }
        .copy-button:hover { background-color: #9a2550; }
        .copy-button.copied { background-color: #28a745; }
        .copy-button svg { width: 14px; height: 14px; fill: currentColor; }
        .node-compare { display: flex; gap: 20px; flex-wrap: wrap; margin: 20px 0; }
        .node-card { background: #f9f9f9; border: 1px solid #ddd; border-radius: 8px; padding: 15px; flex: 1; min-width: 280px; }
        .node-card h4 { margin-top: 0; color: #b92d5d; }
        .conversion-diagram { background: #f8f9fa; border: 2px solid #DEBD5C; border-radius: 8px; padding: 20px; margin: 20px 0; text-align: center; }
        .conversion-diagram .arrow-down { font-size: 24px; color: #DEBD5C; margin: 10px 0; }
        .conversion-diagram .data-box { display: inline-block; padding: 10px 20px; border-radius: 6px; margin: 5px; font-family: 'Courier New', monospace; font-size: 13px; }
        .data-box.buffer { background: #e3f2fd; border: 1px solid #2196f3; color: #1565c0; }
        .data-box.base64-str { background: #fff8e1; border: 1px solid #ffc107; color: #e65100; }
        .data-box.plain-str { background: #e8f5e9; border: 1px solid #4caf50; color: #2e7d32; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”„ Node-RED base64 ãƒãƒ¼ãƒ‰ã‚¬ã‚¤ãƒ‰</h1>

        <div class="toc">
            <h3>ğŸ“š ç›®æ¬¡</h3>
            <ul>
                <li><a href="#section1">1. æ¦‚è¦</a></li>
                <li><a href="#section2">2. ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</a></li>
                <li><a href="#section3">3. ãƒãƒ¼ãƒ‰è¨­å®šãƒ—ãƒ­ãƒ‘ãƒ†ã‚£</a></li>
                <li><a href="#section4">4. å¤‰æ›å‹•ä½œã®è©³ç´°</a></li>
                <li><a href="#section5">5. å®Ÿç”¨çš„ãªä½¿ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³</a></li>
                <li><a href="#section6">6. æ¼”ç¿’å•é¡Œ</a></li>
                <li><a href="#section7">7. ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°</a></li>
                <li><a href="#section8">8. ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹</a></li>
                <li><a href="#section9">9. è¿½åŠ ãƒªã‚½ãƒ¼ã‚¹</a></li>
            </ul>
        </div>

        <div class="important">
            <p><strong>ğŸ“¦ ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æƒ…å ±:</strong></p>
            <ul>
                <li><strong>ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å:</strong> node-red-node-base64</li>
                <li><strong>ç¨®åˆ¥:</strong> Node-REDå…¬å¼ã‚¢ãƒ‰ã‚ªãƒ³ãƒãƒ¼ãƒ‰ï¼ˆnode-red-nodesã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ï¼‰</li>
                <li><strong>ã‚«ãƒ†ã‚´ãƒª:</strong> parser</li>
                <li><strong>ãƒ©ã‚¤ã‚»ãƒ³ã‚¹:</strong> Apache-2.0</li>
            </ul>
        </div>

        <h2 id="section1">ğŸ“– 1. æ¦‚è¦</h2>

        <p><code>node-red-node-base64</code>ã¯ã€<strong>Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰/ãƒ‡ã‚³ãƒ¼ãƒ‰</strong>ã‚’è¡Œã†ãƒ‘ãƒ¼ã‚µãƒ¼ãƒãƒ¼ãƒ‰ã§ã™ã€‚ãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿ï¼ˆBufferï¼‰ã¨Base64æ–‡å­—åˆ—ã‚’ç›¸äº’å¤‰æ›ã—ã¾ã™ã€‚</p>

        <h3>Base64ã¨ã¯</h3>
        <p>Base64ã¯ã€ãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿ã‚’<strong>ASCIIæ–‡å­—åˆ—ã«å¤‰æ›</strong>ã™ã‚‹ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰æ–¹å¼ã§ã™ã€‚ç”»åƒã‚„ãƒ•ã‚¡ã‚¤ãƒ«ãªã©ã®ãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿ã‚’ã€ãƒ†ã‚­ã‚¹ãƒˆãƒ™ãƒ¼ã‚¹ã®ãƒ—ãƒ­ãƒˆã‚³ãƒ«ï¼ˆJSONã€HTTPã€MQTTç­‰ï¼‰ã§å®‰å…¨ã«é€å—ä¿¡ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚</p>

        <div class="conversion-diagram">
            <div>
                <span class="data-box buffer">Bufferï¼ˆãƒã‚¤ãƒŠãƒªï¼‰</span>
            </div>
            <div class="arrow-down">â‡… base64ãƒãƒ¼ãƒ‰</div>
            <div>
                <span class="data-box base64-str">Base64æ–‡å­—åˆ—</span>
            </div>
        </div>

        <h3>è·ç‰©ã®æ¢±åŒ…ã«ä¾‹ãˆã‚‹ã¨</h3>
        <ul>
            <li><strong>ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ï¼ˆBuffer â†’ Base64ï¼‰</strong>= å£Šã‚Œã‚„ã™ã„è·ç‰©ã‚’ç·©è¡æã§åŒ…ã‚“ã§å®‰å…¨ã«é€ã‚Œã‚‹å½¢ã«ã™ã‚‹</li>
            <li><strong>ãƒ‡ã‚³ãƒ¼ãƒ‰ï¼ˆBase64 â†’ Bufferï¼‰</strong>= å±Šã„ãŸè·ç‰©ã‹ã‚‰ç·©è¡æã‚’å¤–ã—ã¦ä¸­èº«ã‚’å–ã‚Šå‡ºã™</li>
        </ul>

        <div class="node-example">
            <span class="node node-inject">ãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿</span>
            <span class="arrow">â†’</span>
            <span class="node node-base64">base64</span>
            <span class="arrow">â†’</span>
            <span class="node node-debug">debug</span>
        </div>

        <h2 id="section2">ğŸ”§ 2. ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h2>

        <h3>æ–¹æ³•1: ãƒ‘ãƒ¬ãƒƒãƒˆãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ï¼ˆæ¨å¥¨ï¼‰</h3>
        <ol>
            <li>Node-REDã‚¨ãƒ‡ã‚£ã‚¿ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ â†’ <strong>ãƒ‘ãƒ¬ãƒƒãƒˆã®ç®¡ç†</strong></li>
            <li><strong>ãƒãƒ¼ãƒ‰ã‚’è¿½åŠ </strong>ã‚¿ãƒ–ã‚’é¸æŠ</li>
            <li><code>node-red-node-base64</code> ã‚’æ¤œç´¢</li>
            <li><strong>ãƒãƒ¼ãƒ‰ã‚’è¿½åŠ </strong>ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
        </ol>

        <h3>æ–¹æ³•2: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³</h3>
        <div class="code-block">cd ~/.node-red
npm install node-red-node-base64</div>

        <p>ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¾Œã€Node-REDã‚’å†èµ·å‹•ã™ã‚‹ã¨ãƒ‘ãƒ¬ãƒƒãƒˆã®<strong>ã€Œparserã€</strong>ã‚«ãƒ†ã‚´ãƒªã«ãƒãƒ¼ãƒ‰ãŒè¿½åŠ ã•ã‚Œã¾ã™ã€‚</p>

        <h2 id="section3">âš™ï¸ 3. ãƒãƒ¼ãƒ‰è¨­å®šãƒ—ãƒ­ãƒ‘ãƒ†ã‚£</h2>

        <table>
            <tr>
                <th>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£</th>
                <th>å‹</th>
                <th>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ</th>
                <th>èª¬æ˜</th>
            </tr>
            <tr>
                <td><strong>Action</strong></td>
                <td>select</td>
                <td>Convert to/from buffer</td>
                <td>å¤‰æ›ãƒ¢ãƒ¼ãƒ‰ï¼ˆè‡ªå‹•åˆ¤å®š / ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ / ãƒ‡ã‚³ãƒ¼ãƒ‰ï¼‰</td>
            </tr>
            <tr>
                <td><strong>Property</strong></td>
                <td>typedInput</td>
                <td>msg.payload</td>
                <td>æ“ä½œå¯¾è±¡ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£</td>
            </tr>
            <tr>
                <td><strong>Name</strong></td>
                <td>string</td>
                <td>ï¼ˆç©ºï¼‰</td>
                <td>ã‚¨ãƒ‡ã‚£ã‚¿ä¸Šã§ã®è¡¨ç¤ºå</td>
            </tr>
        </table>

        <h3>Actionãƒ¢ãƒ¼ãƒ‰ã®è©³ç´°</h3>

        <table>
            <tr>
                <th>ãƒ¢ãƒ¼ãƒ‰</th>
                <th>å‹•ä½œ</th>
                <th>ç”¨é€”</th>
            </tr>
            <tr>
                <td><strong>Convert to/from buffer</strong>ï¼ˆè‡ªå‹•åˆ¤å®šï¼‰</td>
                <td>å…¥åŠ›ã®å‹ã«å¿œã˜ã¦ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã¾ãŸã¯ãƒ‡ã‚³ãƒ¼ãƒ‰ã‚’è‡ªå‹•é¸æŠ</td>
                <td>æ±ç”¨çš„ãªå¤‰æ›å‡¦ç†</td>
            </tr>
            <tr>
                <td><strong>Encode to base64</strong></td>
                <td>å…¥åŠ›ã‚’å¸¸ã«Base64æ–‡å­—åˆ—ã«ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰</td>
                <td>ç¢ºå®Ÿã«Base64åŒ–ã—ãŸã„å ´åˆ</td>
            </tr>
            <tr>
                <td><strong>Decode from base64</strong></td>
                <td>å…¥åŠ›ã‚’å¸¸ã«Base64ã‹ã‚‰ãƒ‡ã‚³ãƒ¼ãƒ‰</td>
                <td>ç¢ºå®Ÿã«ãƒ‡ã‚³ãƒ¼ãƒ‰ã—ãŸã„å ´åˆ</td>
            </tr>
        </table>

        <h2 id="section4">ğŸ”€ 4. å¤‰æ›å‹•ä½œã®è©³ç´°</h2>

        <h3>è‡ªå‹•åˆ¤å®šãƒ¢ãƒ¼ãƒ‰ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ã®å‹•ä½œ</h3>

        <table>
            <tr>
                <th>å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã®å‹</th>
                <th>å‡ºåŠ›çµæœ</th>
                <th>èª¬æ˜</th>
            </tr>
            <tr>
                <td>Bufferï¼ˆãƒã‚¤ãƒŠãƒªï¼‰</td>
                <td>Base64æ–‡å­—åˆ—</td>
                <td>ãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿ã‚’Base64ã«ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰</td>
            </tr>
            <tr>
                <td>æœ‰åŠ¹ãªBase64æ–‡å­—åˆ—</td>
                <td>Bufferï¼ˆãƒã‚¤ãƒŠãƒªï¼‰</td>
                <td>Base64æ–‡å­—åˆ—ã‚’ãƒã‚¤ãƒŠãƒªã«ãƒ‡ã‚³ãƒ¼ãƒ‰</td>
            </tr>
            <tr>
                <td>é€šå¸¸ã®æ–‡å­—åˆ—</td>
                <td>Base64æ–‡å­—åˆ—</td>
                <td>æ–‡å­—åˆ—ã‚’Base64ã«ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰</td>
            </tr>
        </table>

        <div class="tip">
            <p><strong>ğŸ’¡ æœ‰åŠ¹ãªBase64æ–‡å­—åˆ—ã®åˆ¤å®šæ¡ä»¶:</strong></p>
            <ul>
                <li>ä½¿ç”¨æ–‡å­—: <code>A-Z</code>, <code>a-z</code>, <code>0-9</code>, <code>+</code>, <code>/</code>, <code>=</code> ã®ã¿</li>
                <li>æ–‡å­—åˆ—é•·ãŒ4ã®å€æ•°ã§ã‚ã‚‹ã“ã¨</li>
                <li>å…¥åŠ›å‰ã«ã‚¹ãƒšãƒ¼ã‚¹ãƒ»æ”¹è¡Œç­‰ã®ç©ºç™½æ–‡å­—ã¯è‡ªå‹•çš„ã«é™¤å»ã•ã‚Œã‚‹</li>
            </ul>
        </div>

        <h3>å¤‰æ›ã®å…·ä½“ä¾‹</h3>

        <h4>ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ï¼ˆæ–‡å­—åˆ— â†’ Base64ï¼‰</h4>
        <div class="code-block">å…¥åŠ›: "Hello, Node-RED!"
å‡ºåŠ›: "SGVsbG8sIE5vZGUtUkVEIQ=="</div>

        <h4>ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ï¼ˆBuffer â†’ Base64ï¼‰</h4>
        <div class="code-block">å…¥åŠ›: Buffer.from([0x89, 0x50, 0x4E, 0x47])  // PNGãƒ˜ãƒƒãƒ€ãƒ¼
å‡ºåŠ›: "iVBORw=="</div>

        <h4>ãƒ‡ã‚³ãƒ¼ãƒ‰ï¼ˆBase64 â†’ Bufferï¼‰</h4>
        <div class="code-block">å…¥åŠ›: "SGVsbG8sIE5vZGUtUkVEIQ=="
å‡ºåŠ›: Buffer &lt;48 65 6c 6c 6f 2c 20 4e 6f 64 65 2d 52 45 44 21&gt;
     ï¼ˆ"Hello, Node-RED!" ã®ãƒã‚¤ãƒŠãƒªè¡¨ç¾ï¼‰</div>

        <h3>Propertyã®è¨­å®š</h3>
        <p>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯<code>msg.payload</code>ã‚’å¤‰æ›ã—ã¾ã™ãŒã€ä»»æ„ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æŒ‡å®šã§ãã¾ã™ã€‚</p>

        <div class="code-block">// ä¾‹: msg.data.image ã‚’å¤‰æ›å¯¾è±¡ã«è¨­å®š
// Propertyæ¬„ã« "msg.data.image" ã‚’æŒ‡å®š

// å…¥åŠ›
msg.data = {
    image: Buffer.from(imageData),
    name: "photo.png"
};

// base64ãƒãƒ¼ãƒ‰é€šéå¾Œ
msg.data = {
    image: "iVBORw0KGgoAAAANSUhEUg...",  // Base64æ–‡å­—åˆ—ã«å¤‰æ›
    name: "photo.png"                      // ä»–ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯ãã®ã¾ã¾
};</div>

        <h2 id="section5">ğŸ› ï¸ 5. å®Ÿç”¨çš„ãªä½¿ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³</h2>

        <h3>ãƒ‘ã‚¿ãƒ¼ãƒ³1: ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’Base64ã«å¤‰æ›ã—ã¦APIé€ä¿¡</h3>
        <p>ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿ã€Base64ã«å¤‰æ›ã—ã¦REST APIã«é€ä¿¡ã—ã¾ã™ã€‚</p>

        <div class="node-example">
            <span class="node node-file">file read</span>
            <span class="arrow">â†’</span>
            <span class="node node-base64">base64</span>
            <span class="arrow">â†’</span>
            <span class="node node-function">JSONä½œæˆ</span>
            <span class="arrow">â†’</span>
            <span class="node node-http-request">http request</span>
        </div>

        <div class="code-block">// Functionãƒãƒ¼ãƒ‰: Base64ç”»åƒã‚’JSON APIã«é€ä¿¡
msg.payload = {
    "image": msg.payload,  // base64ãƒãƒ¼ãƒ‰ã§å¤‰æ›æ¸ˆã¿
    "filename": msg.filename || "image.png",
    "timestamp": new Date().toISOString()
};
msg.headers = { "Content-Type": "application/json" };
return msg;</div>

        <h3>ãƒ‘ã‚¿ãƒ¼ãƒ³2: HTMLã«ç”»åƒã‚’åŸ‹ã‚è¾¼ã‚€ï¼ˆData URIï¼‰</h3>
        <p>ç”»åƒã‚’Base64ã«å¤‰æ›ã—ã€Data URIã¨ã—ã¦HTMLã«ç›´æ¥åŸ‹ã‚è¾¼ã¿ã¾ã™ã€‚</p>

        <div class="node-example">
            <span class="node node-file">file read</span>
            <span class="arrow">â†’</span>
            <span class="node node-base64">base64</span>
            <span class="arrow">â†’</span>
            <span class="node node-template">HTMLç”Ÿæˆ</span>
            <span class="arrow">â†’</span>
            <span class="node node-debug">debug</span>
        </div>

        <div class="code-block">// Functionãƒãƒ¼ãƒ‰: Data URIå½¢å¼ã«å¤‰æ›
var mimeType = "image/png";  // ç”»åƒã®ç¨®é¡ã«å¿œã˜ã¦å¤‰æ›´
var dataUri = "data:" + mimeType + ";base64," + msg.payload;

msg.payload = '&lt;img src="' + dataUri + '" alt="embedded image"&gt;';
return msg;</div>

        <h3>ãƒ‘ã‚¿ãƒ¼ãƒ³3: MQTTã§ãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿ã‚’é€å—ä¿¡</h3>
        <p>ãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿ã‚’Base64ã«ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã—ã¦MQTTã§é€ä¿¡ã—ã€å—ä¿¡å´ã§ãƒ‡ã‚³ãƒ¼ãƒ‰ã—ã¾ã™ã€‚</p>

        <h4>é€ä¿¡å´</h4>
        <div class="node-example">
            <span class="node node-function">ãƒã‚¤ãƒŠãƒªç”Ÿæˆ</span>
            <span class="arrow">â†’</span>
            <span class="node node-base64">base64</span>
            <span class="arrow">â†’</span>
            <span class="node node-function">MQTT out</span>
        </div>

        <h4>å—ä¿¡å´</h4>
        <div class="node-example">
            <span class="node node-function">MQTT in</span>
            <span class="arrow">â†’</span>
            <span class="node node-base64">base64</span>
            <span class="arrow">â†’</span>
            <span class="node node-function">ãƒã‚¤ãƒŠãƒªå‡¦ç†</span>
        </div>

        <div class="code-block">// é€ä¿¡å´Functionãƒãƒ¼ãƒ‰: ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’ãƒã‚¤ãƒŠãƒªãƒ‘ã‚±ãƒƒãƒˆã«
var buf = Buffer.alloc(8);
buf.writeFloatLE(25.5, 0);   // æ¸©åº¦
buf.writeFloatLE(60.2, 4);   // æ¹¿åº¦
msg.payload = buf;
// â†’ base64ãƒãƒ¼ãƒ‰ã§ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚Œã¦MQTTã§é€ä¿¡

return msg;</div>

        <div class="code-block">// å—ä¿¡å´Functionãƒãƒ¼ãƒ‰: ãƒ‡ã‚³ãƒ¼ãƒ‰å¾Œã®ãƒã‚¤ãƒŠãƒªãƒ‘ã‚±ãƒƒãƒˆã‚’è§£æ
// base64ãƒãƒ¼ãƒ‰ã§BufferåŒ–æ¸ˆã¿
var buf = msg.payload;
var temp = buf.readFloatLE(0);
var humidity = buf.readFloatLE(4);

msg.payload = {
    temperature: Math.round(temp * 10) / 10,
    humidity: Math.round(humidity * 10) / 10
};
return msg;</div>

        <h3>ãƒ‘ã‚¿ãƒ¼ãƒ³4: ãƒ¡ãƒ¼ãƒ«æ·»ä»˜ç”»åƒã®ãƒ‡ã‚³ãƒ¼ãƒ‰</h3>
        <p>å—ä¿¡ãƒ¡ãƒ¼ãƒ«ã®æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆBase64ï¼‰ã‚’ãƒ‡ã‚³ãƒ¼ãƒ‰ã—ã¦ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã—ã¾ã™ã€‚</p>

        <div class="node-example">
            <span class="node node-function">æ·»ä»˜å–å¾—</span>
            <span class="arrow">â†’</span>
            <span class="node node-base64">base64</span>
            <span class="arrow">â†’</span>
            <span class="node node-file">file write</span>
        </div>

        <div class="code-block">// Functionãƒãƒ¼ãƒ‰: ãƒ¡ãƒ¼ãƒ«æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«ã®å‡¦ç†
if (msg.attachments &amp;&amp; msg.attachments.length > 0) {
    var att = msg.attachments[0];
    msg.payload = att.content;  // Base64æ–‡å­—åˆ—
    msg.filename = "/tmp/" + att.fileName;
    return msg;
}
return null;</div>

        <h3>ãƒ‘ã‚¿ãƒ¼ãƒ³5: ã‚«ãƒ¡ãƒ©ç”»åƒã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰è¡¨ç¤º</h3>
        <p>HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã§å–å¾—ã—ãŸç”»åƒã‚’Base64ã«å¤‰æ›ã—ã€ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®Templateãƒãƒ¼ãƒ‰ã§è¡¨ç¤ºã—ã¾ã™ã€‚</p>

        <div class="node-example">
            <span class="node node-inject">å®šæœŸå–å¾—</span>
            <span class="arrow">â†’</span>
            <span class="node node-http-request">ã‚«ãƒ¡ãƒ©ç”»åƒå–å¾—</span>
            <span class="arrow">â†’</span>
            <span class="node node-base64">base64</span>
            <span class="arrow">â†’</span>
            <span class="node node-template">ui-template</span>
        </div>

        <div class="code-block">// http requestãƒãƒ¼ãƒ‰ã®è¨­å®š:
//   URL: http://camera-ip/snapshot.jpg
//   Method: GET
//   Return: a binary buffer

// base64ãƒãƒ¼ãƒ‰ã§è‡ªå‹•çš„ã«Bufferã‹ã‚‰Base64æ–‡å­—åˆ—ã«å¤‰æ›ã•ã‚Œã‚‹

// ui-templateãƒãƒ¼ãƒ‰:
// &lt;img src="data:image/jpeg;base64,{{msg.payload}}"
//      style="width:100%; max-width:640px;"&gt;</div>

        <h2 id="section6">ğŸ“ 6. æ¼”ç¿’å•é¡Œ</h2>

        <div class="exercise">
            <h3>æ¼”ç¿’1: ãƒ†ã‚­ã‚¹ãƒˆã®Base64å¤‰æ›<span class="difficulty difficulty-easy">åˆç´š</span></h3>

            <p><strong>èª²é¡Œ:</strong></p>
            <p>ãƒ†ã‚­ã‚¹ãƒˆæ–‡å­—åˆ—ã‚’Base64ã«ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã—ã€ã•ã‚‰ã«ãƒ‡ã‚³ãƒ¼ãƒ‰ã—ã¦å…ƒã«æˆ»ã‚‹ãƒ•ãƒ­ãƒ¼ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚</p>

            <p><strong>è¦ä»¶:</strong></p>
            <ul>
                <li>Injectãƒãƒ¼ãƒ‰ã§ã€ŒNode-RED Base64 ãƒ†ã‚¹ãƒˆã€ã¨ã„ã†ãƒ†ã‚­ã‚¹ãƒˆã‚’é€ä¿¡</li>
                <li>1ã¤ç›®ã®base64ãƒãƒ¼ãƒ‰ã§ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰</li>
                <li>2ã¤ç›®ã®base64ãƒãƒ¼ãƒ‰ã§ãƒ‡ã‚³ãƒ¼ãƒ‰</li>
                <li>å„æ®µéšã§Debugãƒãƒ¼ãƒ‰ã«å‡ºåŠ›ã—ã¦å¤‰æ›çµæœã‚’ç¢ºèª</li>
            </ul>

            <details>
                <summary>ğŸ’¡ ãƒ’ãƒ³ãƒˆ</summary>
                <ul>
                    <li>Injectãƒãƒ¼ãƒ‰ã®<code>msg.payload</code>ã‚’æ–‡å­—åˆ—å‹ã§è¨­å®š</li>
                    <li>base64ãƒãƒ¼ãƒ‰ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼ˆè‡ªå‹•åˆ¤å®šï¼‰ãƒ¢ãƒ¼ãƒ‰ã§å‹•ä½œã™ã‚‹</li>
                    <li>1ã¤ç›®ã®Debugã§ã¯Base64æ–‡å­—åˆ—ãŒè¡¨ç¤ºã•ã‚Œã‚‹</li>
                    <li>2ã¤ç›®ã®Debugã§ã¯BufferãŒè¡¨ç¤ºã•ã‚Œã‚‹ï¼ˆ<code>.toString()</code>ã§æ–‡å­—åˆ—ã«æˆ»ã‚‹ï¼‰</li>
                </ul>
            </details>

            <details>
                <summary>âœ… è§£ç­”ä¾‹ãƒ•ãƒ­ãƒ¼</summary>
                <div class="flow-json">[
    {
        "id": "b64_ex1_inject",
        "type": "inject",
        "name": "ãƒ†ã‚¹ãƒˆæ–‡å­—åˆ—",
        "props": [{"p": "payload"}],
        "payload": "Node-RED Base64 ãƒ†ã‚¹ãƒˆ",
        "payloadType": "str",
        "wires": [["b64_ex1_encode"]]
    },
    {
        "id": "b64_ex1_encode",
        "type": "base64",
        "name": "ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰",
        "action": "",
        "property": "payload",
        "wires": [["b64_ex1_debug1", "b64_ex1_decode"]]
    },
    {
        "id": "b64_ex1_debug1",
        "type": "debug",
        "name": "Base64æ–‡å­—åˆ—",
        "active": true,
        "complete": "payload",
        "wires": []
    },
    {
        "id": "b64_ex1_decode",
        "type": "base64",
        "name": "ãƒ‡ã‚³ãƒ¼ãƒ‰",
        "action": "",
        "property": "payload",
        "wires": [["b64_ex1_func"]]
    },
    {
        "id": "b64_ex1_func",
        "type": "function",
        "name": "Bufferâ†’æ–‡å­—åˆ—",
        "func": "msg.payload = msg.payload.toString();\nreturn msg;",
        "wires": [["b64_ex1_debug2"]]
    },
    {
        "id": "b64_ex1_debug2",
        "type": "debug",
        "name": "å¾©å…ƒçµæœ",
        "active": true,
        "complete": "payload",
        "wires": []
    }
]</div>
            </details>
        </div>

        <div class="exercise">
            <h3>æ¼”ç¿’2: ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã®Base64å¤‰æ›<span class="difficulty difficulty-medium">ä¸­ç´š</span></h3>

            <p><strong>èª²é¡Œ:</strong></p>
            <p>ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚“ã§Base64ã«å¤‰æ›ã—ã€Data URIå½¢å¼ã®HTMLã‚’ç”Ÿæˆã™ã‚‹ãƒ•ãƒ­ãƒ¼ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚</p>

            <p><strong>è¦ä»¶:</strong></p>
            <ul>
                <li>Read Fileãƒãƒ¼ãƒ‰ã§ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆPNG/JPEGï¼‰ã‚’ãƒã‚¤ãƒŠãƒªã¨ã—ã¦èª­ã¿è¾¼ã¿</li>
                <li>base64ãƒãƒ¼ãƒ‰ã§Bufferâ†’Base64æ–‡å­—åˆ—ã«å¤‰æ›</li>
                <li>Functionãƒãƒ¼ãƒ‰ã§<code>data:image/png;base64,...</code>å½¢å¼ã®HTMLã‚’ç”Ÿæˆ</li>
                <li>Debugãƒãƒ¼ãƒ‰ã§ç”Ÿæˆã•ã‚ŒãŸHTMLã‚’ç¢ºèª</li>
            </ul>

            <details>
                <summary>ğŸ’¡ ãƒ’ãƒ³ãƒˆ</summary>
                <ul>
                    <li>Read Fileãƒãƒ¼ãƒ‰ã®å‡ºåŠ›ã‚’ã€Œa binary bufferã€ã«è¨­å®š</li>
                    <li>base64ãƒãƒ¼ãƒ‰ã¯è‡ªå‹•åˆ¤å®šãƒ¢ãƒ¼ãƒ‰ã§Bufferã‚’æ¤œçŸ¥ã—ã¦ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã™ã‚‹</li>
                    <li>Data URIã®å½¢å¼: <code>data:[MIMEå‹];base64,[Base64æ–‡å­—åˆ—]</code></li>
                    <li>PNGã¯<code>image/png</code>ã€JPEGã¯<code>image/jpeg</code></li>
                </ul>
            </details>

            <details>
                <summary>âœ… è§£ç­”ä¾‹ãƒ•ãƒ­ãƒ¼</summary>
                <div class="flow-json">[
    {
        "id": "b64_ex2_inject",
        "type": "inject",
        "name": "èª­ã¿è¾¼ã¿é–‹å§‹",
        "props": [{"p": "filename", "v": "/tmp/test.png", "vt": "str"}],
        "wires": [["b64_ex2_file"]]
    },
    {
        "id": "b64_ex2_file",
        "type": "file in",
        "name": "ç”»åƒèª­ã¿è¾¼ã¿",
        "filename": "",
        "filenameType": "msg",
        "format": "",
        "allProps": true,
        "wires": [["b64_ex2_base64"]]
    },
    {
        "id": "b64_ex2_base64",
        "type": "base64",
        "name": "Base64å¤‰æ›",
        "action": "",
        "property": "payload",
        "wires": [["b64_ex2_func"]]
    },
    {
        "id": "b64_ex2_func",
        "type": "function",
        "name": "Data URI HTMLç”Ÿæˆ",
        "func": "var ext = (msg.filename || '').split('.').pop().toLowerCase();\nvar mimeMap = { 'png': 'image/png', 'jpg': 'image/jpeg', 'jpeg': 'image/jpeg', 'gif': 'image/gif' };\nvar mime = mimeMap[ext] || 'image/png';\n\nvar dataUri = 'data:' + mime + ';base64,' + msg.payload;\nmsg.payload = '<html><body><h2>Base64åŸ‹ã‚è¾¼ã¿ç”»åƒ</h2><img src=\"' + dataUri + '\" style=\"max-width:400px\"></body></html>';\nreturn msg;",
        "wires": [["b64_ex2_debug"]]
    },
    {
        "id": "b64_ex2_debug",
        "type": "debug",
        "name": "HTMLå‡ºåŠ›",
        "active": true,
        "complete": "payload",
        "wires": []
    }
]</div>
            </details>
        </div>

        <div class="exercise">
            <h3>æ¼”ç¿’3: MQTTã«ã‚ˆã‚‹ãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿é€å—ä¿¡<span class="difficulty difficulty-hard">ä¸Šç´š</span></h3>

            <p><strong>èª²é¡Œ:</strong></p>
            <p>ãƒã‚¤ãƒŠãƒªæ§‹é€ ä½“ãƒ‡ãƒ¼ã‚¿ã‚’Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã—ã¦MQTTã§é€ä¿¡ã—ã€å—ä¿¡å´ã§ãƒ‡ã‚³ãƒ¼ãƒ‰ã—ã¦è§£æã™ã‚‹ãƒ•ãƒ­ãƒ¼ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚</p>

            <p><strong>è¦ä»¶:</strong></p>
            <ul>
                <li>é€ä¿¡å´: Functionãƒãƒ¼ãƒ‰ã§ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ï¼ˆæ¸©åº¦ãƒ»æ¹¿åº¦ãƒ»æ°—åœ§ï¼‰ã‚’ãƒã‚¤ãƒŠãƒªãƒ‘ã‚±ãƒƒãƒˆã«å¤‰æ›</li>
                <li>é€ä¿¡å´: base64ãƒãƒ¼ãƒ‰ã§ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰å¾Œã«MQTT outã§é€ä¿¡</li>
                <li>å—ä¿¡å´: MQTT inã§å—ä¿¡å¾Œã«base64ãƒãƒ¼ãƒ‰ã§ãƒ‡ã‚³ãƒ¼ãƒ‰</li>
                <li>å—ä¿¡å´: Functionãƒãƒ¼ãƒ‰ã§ãƒã‚¤ãƒŠãƒªãƒ‘ã‚±ãƒƒãƒˆã‚’è§£æã—ã¦JSONå½¢å¼ã«å¤‰æ›</li>
                <li>Debugãƒãƒ¼ãƒ‰ã§è§£æçµæœã‚’ç¢ºèª</li>
            </ul>

            <details>
                <summary>ğŸ’¡ ãƒ’ãƒ³ãƒˆ</summary>
                <ul>
                    <li><code>Buffer.alloc(12)</code>ã§12ãƒã‚¤ãƒˆã®ãƒãƒƒãƒ•ã‚¡ã‚’ä½œæˆï¼ˆFloat32Ã—3ï¼‰</li>
                    <li><code>buf.writeFloatLE(value, offset)</code>ã§æµ®å‹•å°æ•°ç‚¹æ•°ã‚’æ›¸ãè¾¼ã¿</li>
                    <li><code>buf.readFloatLE(offset)</code>ã§èª­ã¿å–ã‚Š</li>
                    <li>ã‚ªãƒ•ã‚»ãƒƒãƒˆ: æ¸©åº¦=0, æ¹¿åº¦=4, æ°—åœ§=8</li>
                </ul>
            </details>

            <details>
                <summary>âœ… è§£ç­”ä¾‹ãƒ•ãƒ­ãƒ¼</summary>
                <div class="flow-json">[
    {
        "id": "b64_ex3_inject",
        "type": "inject",
        "name": "ã‚»ãƒ³ã‚µãƒ¼é€ä¿¡",
        "props": [],
        "repeat": "",
        "wires": [["b64_ex3_pack"]]
    },
    {
        "id": "b64_ex3_pack",
        "type": "function",
        "name": "ãƒã‚¤ãƒŠãƒªãƒ‘ãƒƒã‚¯",
        "func": "var buf = Buffer.alloc(12);\nbuf.writeFloatLE(25.5, 0);    // æ¸©åº¦\nbuf.writeFloatLE(60.2, 4);    // æ¹¿åº¦\nbuf.writeFloatLE(1013.25, 8); // æ°—åœ§\nmsg.payload = buf;\nreturn msg;",
        "wires": [["b64_ex3_encode"]]
    },
    {
        "id": "b64_ex3_encode",
        "type": "base64",
        "name": "ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰",
        "action": "",
        "property": "payload",
        "wires": [["b64_ex3_debug_enc", "b64_ex3_decode"]]
    },
    {
        "id": "b64_ex3_debug_enc",
        "type": "debug",
        "name": "Base64ãƒ‘ã‚±ãƒƒãƒˆ",
        "active": true,
        "complete": "payload",
        "wires": []
    },
    {
        "id": "b64_ex3_decode",
        "type": "base64",
        "name": "ãƒ‡ã‚³ãƒ¼ãƒ‰",
        "action": "",
        "property": "payload",
        "wires": [["b64_ex3_unpack"]]
    },
    {
        "id": "b64_ex3_unpack",
        "type": "function",
        "name": "ãƒã‚¤ãƒŠãƒªè§£æ",
        "func": "var buf = msg.payload;\nmsg.payload = {\n    temperature: Math.round(buf.readFloatLE(0) * 10) / 10,\n    humidity: Math.round(buf.readFloatLE(4) * 10) / 10,\n    pressure: Math.round(buf.readFloatLE(8) * 100) / 100\n};\nreturn msg;",
        "wires": [["b64_ex3_debug_dec"]]
    },
    {
        "id": "b64_ex3_debug_dec",
        "type": "debug",
        "name": "è§£æçµæœ",
        "active": true,
        "complete": "payload",
        "wires": []
    }
]</div>
            </details>
        </div>

        <h2 id="section7">ğŸ”§ 7. ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°</h2>

        <table>
            <tr>
                <th>å•é¡Œ</th>
                <th>åŸå› </th>
                <th>è§£æ±ºæ–¹æ³•</th>
            </tr>
            <tr>
                <td>ãƒ‡ã‚³ãƒ¼ãƒ‰çµæœãŒæ–‡å­—åŒ–ã‘ã™ã‚‹</td>
                <td>å…ƒãƒ‡ãƒ¼ã‚¿ã®æ–‡å­—ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãŒç•°ãªã‚‹</td>
                <td>ãƒ‡ã‚³ãƒ¼ãƒ‰å¾Œã«<code>buf.toString('utf-8')</code>ã§æ­£ã—ã„ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’æŒ‡å®šã™ã‚‹</td>
            </tr>
            <tr>
                <td>ã€ŒNot a valid base64 stringã€ã‚¨ãƒ©ãƒ¼</td>
                <td>å…¥åŠ›ãŒBase64å½¢å¼ã§ã¯ãªã„ã€ã¾ãŸã¯ä¸æ­£ãªæ–‡å­—ã‚’å«ã‚€</td>
                <td>å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ãŒæœ‰åŠ¹ãªBase64ã‹ç¢ºèªã™ã‚‹ã€‚æ”¹è¡Œã‚„ã‚¹ãƒšãƒ¼ã‚¹ã¯è‡ªå‹•é™¤å»ã•ã‚Œã‚‹ãŒã€ä¸æ­£æ–‡å­—ã¯é™¤å»ã•ã‚Œãªã„</td>
            </tr>
            <tr>
                <td>ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚Œãšã«ãã®ã¾ã¾é€šéã™ã‚‹</td>
                <td>å…¥åŠ›ãŒæœ‰åŠ¹ãªBase64æ–‡å­—åˆ—ã¨åˆ¤å®šã•ã‚Œãƒ‡ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸ</td>
                <td>Actionã‚’ã€ŒEncode to base64ã€ã«æ˜ç¤ºçš„ã«è¨­å®šã™ã‚‹</td>
            </tr>
            <tr>
                <td>å‡ºåŠ›ãŒBufferã«ãªã£ã¦ã—ã¾ã†</td>
                <td>Base64æ–‡å­—åˆ—ãŒãƒ‡ã‚³ãƒ¼ãƒ‰ã•ã‚Œã¦Bufferã«ãªã£ãŸ</td>
                <td>æ–‡å­—åˆ—ãŒå¿…è¦ãªå ´åˆã¯å¾Œæ®µã®Functionãƒãƒ¼ãƒ‰ã§<code>.toString()</code>ã‚’å®Ÿè¡Œã™ã‚‹</td>
            </tr>
            <tr>
                <td>ãƒãƒ¼ãƒ‰ãŒãƒ‘ãƒ¬ãƒƒãƒˆã«è¡¨ç¤ºã•ã‚Œãªã„</td>
                <td>ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¤±æ•—ã¾ãŸã¯Node-REDæœªå†èµ·å‹•</td>
                <td>npm installã®ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’ç¢ºèªã—ã€Node-REDã‚’å†èµ·å‹•ã™ã‚‹</td>
            </tr>
            <tr>
                <td>å¤§ããªãƒ•ã‚¡ã‚¤ãƒ«ã§å‡¦ç†ãŒé…ã„</td>
                <td>Base64å¤‰æ›ã¯ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚ºãŒç´„33%å¢—åŠ ã™ã‚‹</td>
                <td>å¤§ããªãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿ã¯ç›´æ¥Bufferã§å‡¦ç†ã—ã€Base64ã¯è»¢é€æ™‚ã®ã¿ä½¿ç”¨ã™ã‚‹</td>
            </tr>
        </table>

        <h2 id="section8">ğŸ“ 8. ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹</h2>

        <div class="tip">
            <p><strong>âœ… æ¨å¥¨äº‹é …:</strong></p>
            <ul>
                <li><strong>Actionãƒ¢ãƒ¼ãƒ‰ã®æ˜ç¤ºçš„è¨­å®š:</strong> æ„å›³ã—ãŸå¤‰æ›æ–¹å‘ãŒæ±ºã¾ã£ã¦ã„ã‚‹å ´åˆã¯è‡ªå‹•åˆ¤å®šã§ã¯ãªãæ˜ç¤ºçš„ã«Encode/Decodeã‚’æŒ‡å®šã™ã‚‹</li>
                <li><strong>ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚ºã®è€ƒæ…®:</strong> Base64ã¯ãƒ‡ãƒ¼ã‚¿ã‚’ç´„33%å¢—åŠ ã•ã›ã‚‹ãŸã‚ã€å¤§é‡ã®ãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿ã«ã¯ä¸å‘ãã€‚å¿…è¦ãªå ´åˆã®ã¿ä½¿ç”¨ã™ã‚‹</li>
                <li><strong>MIMEå‹ã®ç®¡ç†:</strong> ç”»åƒã‚’Base64åŒ–ã™ã‚‹éš›ã¯MIMEå‹ï¼ˆimage/pngç­‰ï¼‰ã‚’åˆ¥ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã§ä¿æŒã—ã¦ãŠã</li>
                <li><strong>Bufferã®æ–‡å­—åˆ—åŒ–:</strong> ãƒ‡ã‚³ãƒ¼ãƒ‰å¾Œã®Bufferã‚’æ–‡å­—åˆ—ã¨ã—ã¦ä½¿ã†å ´åˆã¯<code>toString('utf-8')</code>ã‚’æ˜ç¤ºã™ã‚‹</li>
                <li><strong>ç”¨é€”ã®æ˜ç¢ºåŒ–:</strong> Base64ã¯ã€Œãƒ†ã‚­ã‚¹ãƒˆãƒãƒ£ãƒãƒ«ã§ãƒã‚¤ãƒŠãƒªã‚’é€ã‚‹ã€ãŸã‚ã®æ‰‹æ®µã€‚ãƒã‚¤ãƒŠãƒªå¯¾å¿œãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§ã¯ãã®ã¾ã¾Bufferã‚’ä½¿ã†ã»ã†ãŒåŠ¹ç‡çš„</li>
            </ul>
        </div>

        <div class="warning">
            <p><strong>âš ï¸ æ³¨æ„äº‹é …:</strong></p>
            <ul>
                <li><strong>è‡ªå‹•åˆ¤å®šã®ç½ :</strong> å¶ç„¶Base64ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ä¸€è‡´ã™ã‚‹é€šå¸¸æ–‡å­—åˆ—ï¼ˆè‹±æ•°å­—ã®ã¿ï¼‹é•·ã•ãŒ4ã®å€æ•°ï¼‰ã¯èª¤ã£ã¦ãƒ‡ã‚³ãƒ¼ãƒ‰ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹</li>
                <li><strong>ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡:</strong> å¤§ããªãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆæ•°åMBä»¥ä¸Šï¼‰ã®Base64å¤‰æ›ã¯Node.jsã®ãƒ¡ãƒ¢ãƒªã‚’åœ§è¿«ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹</li>
                <li><strong>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£:</strong> Base64ã¯æš—å·åŒ–ã§ã¯ãªãã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã«éããªã„ã€‚æ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿ã®ä¿è­·ã«ã¯åˆ¥é€”æš—å·åŒ–ãŒå¿…è¦</li>
            </ul>
        </div>

        <h2 id="section9">ğŸ”— 9. è¿½åŠ ãƒªã‚½ãƒ¼ã‚¹</h2>

        <ul>
            <li><a href="https://flows.nodered.org/node/node-red-node-base64" target="_blank">Node-RED Flow Library: node-red-node-base64</a></li>
            <li><a href="https://github.com/node-red/node-red-nodes/tree/master/parsers/base64" target="_blank">GitHub ãƒªãƒã‚¸ãƒˆãƒªï¼ˆnode-red-nodes/parsers/base64ï¼‰</a></li>
            <li><a href="https://www.npmjs.com/package/node-red-node-base64" target="_blank">npm: node-red-node-base64</a></li>
            <li><a href="nodered-function-node-guide.html">Function ãƒãƒ¼ãƒ‰ã‚¬ã‚¤ãƒ‰</a>ï¼ˆBufferæ“ä½œã®å‚è€ƒï¼‰</li>
            <li><a href="nodered-file-node-guide.html">File ãƒãƒ¼ãƒ‰ã‚¬ã‚¤ãƒ‰</a>ï¼ˆãƒã‚¤ãƒŠãƒªãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿æ›¸ãï¼‰</li>
            <li><a href="nodered-http-request-node-guide.html">HTTP Request ãƒãƒ¼ãƒ‰ã‚¬ã‚¤ãƒ‰</a>ï¼ˆãƒã‚¤ãƒŠãƒªãƒ¬ã‚¹ãƒãƒ³ã‚¹å–å¾—ï¼‰</li>
        </ul>

        <a href="index.html" style="position: fixed; bottom: 20px; right: 20px; background-color: #b92d5d; color: white; width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; text-decoration: none; font-size: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.3); z-index: 1000;" title="ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹">ğŸ </a>
    </div>

    <script>
        function copyCode(button) {
            const codeBlock = button.parentElement;
            const code = codeBlock.textContent.replace('Copy', '').trim();

            navigator.clipboard.writeText(code).then(function() {
                button.classList.add('copied');
                button.innerHTML = '<svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>Copied!';
                setTimeout(function() {
                    button.classList.remove('copied');
                    button.innerHTML = '<svg viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>Copy';
                }, 2000);
            });
        }
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Node-RED Pi Sense HATãƒãƒ¼ãƒ‰ ã‚¬ã‚¤ãƒ‰</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.8;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }

        h1 {
            color: #a7001e;
            border-bottom: 3px solid #a7001e;
            padding-bottom: 10px;
        }

        h2 {
            color: #c51a4a;
            margin-top: 30px;
            border-left: 5px solid #c51a4a;
            padding-left: 15px;
        }

        h3 {
            color: #555;
            margin-top: 25px;
        }

        .container {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .node-example {
            background-color: #2d3133;
            padding: 20px;
            border-radius: 5px;
            margin: 20px 0;
            color: white;
            font-family: 'Courier New', monospace;
        }

        .node {
            display: inline-block;
            padding: 8px 15px;
            border-radius: 4px;
            margin: 5px;
            font-weight: bold;
            font-size: 14px;
        }

        .node-sensehat {
            background-color: #c6dbef;
            color: #333;
            border: 2px solid #9bbedd;
        }

        .node-debug {
            background-color: #87a48d;
            color: white;
        }

        .node-inject {
            background-color: #3fadb5;
            color: white;
        }

        .node-function {
            background-color: #e8a658;
            color: white;
        }

        .arrow {
            color: #999;
            font-size: 20px;
            margin: 0 10px;
        }

        .important {
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }

        .tip {
            background-color: #d1ecf1;
            border-left: 4px solid #17a2b8;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }

        .warning {
            background-color: #f8d7da;
            border-left: 4px solid #dc3545;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }

        .hardware-req {
            background-color: #e8d5f5;
            border-left: 4px solid #9c27b0;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }

        .code-block {
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 15px;
            margin: 15px 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            position: relative;
            white-space: pre-wrap;
        }

        .copy-button {
            position: absolute;
            top: 8px;
            right: 8px;
            padding: 6px 12px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            font-family: 'Segoe UI', sans-serif;
            transition: background-color 0.2s;
            z-index: 10;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .copy-button:hover {
            background-color: #0056b3;
        }

        .copy-button.copied {
            background-color: #28a745;
        }

        .copy-button svg {
            width: 14px;
            height: 14px;
            fill: currentColor;
        }

        .exercise {
            background-color: #e8f5e9;
            border: 2px solid #4caf50;
            border-radius: 8px;
            padding: 20px;
            margin: 25px 0;
        }

        .exercise h3 {
            color: #2e7d32;
            margin-top: 0;
        }

        .difficulty {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
            margin-left: 10px;
        }

        .difficulty-easy {
            background-color: #4caf50;
            color: white;
        }

        .difficulty-medium {
            background-color: #ff9800;
            color: white;
        }

        .difficulty-hard {
            background-color: #f44336;
            color: white;
        }

        ul, ol {
            padding-left: 25px;
        }

        li {
            margin: 8px 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }

        th {
            background-color: #c51a4a;
            color: white;
        }

        tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        .flow-json {
            background-color: #263238;
            color: #aed581;
            padding: 15px;
            padding-top: 40px;
            border-radius: 5px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 400px;
            overflow-y: auto;
            position: relative;
        }

        details {
            margin: 15px 0;
        }

        summary {
            cursor: pointer;
            padding: 10px;
            background-color: #6c757d;
            color: white;
            border-radius: 4px;
            font-weight: bold;
        }

        summary:hover {
            background-color: #5a6268;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .feature-card {
            background-color: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
        }

        .feature-card h4 {
            color: #a7001e;
            margin-top: 0;
        }

        .sensor-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: bold;
            margin: 2px;
        }

        .badge-motion {
            background-color: #3f51b5;
            color: white;
        }

        .badge-env {
            background-color: #4caf50;
            color: white;
        }

        .badge-joystick {
            background-color: #ff9800;
            color: white;
        }

        .badge-led {
            background-color: #e91e63;
            color: white;
        }

        .led-demo {
            display: inline-grid;
            grid-template-columns: repeat(8, 24px);
            gap: 2px;
            background-color: #111;
            padding: 8px;
            border-radius: 4px;
            margin: 10px 0;
        }

        .led-cell {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background-color: #222;
        }

        .led-on {
            box-shadow: 0 0 6px 2px currentColor;
        }

        .home-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background-color: #a7001e;
            color: white;
            padding: 12px 20px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: bold;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            transition: background-color 0.2s;
            z-index: 100;
        }

        .home-button:hover {
            background-color: #c51a4a;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“ Node-RED Pi Sense HATãƒãƒ¼ãƒ‰ ã‚¬ã‚¤ãƒ‰</h1>

        <p>ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ã€Node-REDã®<strong>Pi Sense HATãƒãƒ¼ãƒ‰</strong>ã«ã¤ã„ã¦ã€åˆå¿ƒè€…ã®æ–¹ã§ã‚‚ç†è§£ã§ãã‚‹ã‚ˆã†ã«è©³ã—ãèª¬æ˜ã—ã¾ã™ã€‚</p>

        <div class="hardware-req">
            <p><strong>âš ï¸ ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢è¦ä»¶ï¼ˆå¿…ãšãŠèª­ã¿ãã ã•ã„ï¼‰</strong></p>
            <ul>
                <li>ğŸ“ <strong>Raspberry Piå°‚ç”¨ãƒãƒ¼ãƒ‰ã§ã™ã€‚</strong> Windows/macOS/é€šå¸¸ã®Linuxç’°å¢ƒã§ã¯å‹•ä½œã—ã¾ã›ã‚“ã€‚</li>
                <li>ğŸ”Œ <strong>Raspberry Pi Sense HATãŒå¿…è¦ã§ã™ã€‚</strong> Sense HATã‚’Raspberry Piã®GPIOãƒ”ãƒ³ãƒ˜ãƒƒãƒ€ã«æ¥ç¶šã—ãŸçŠ¶æ…‹ã§ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚</li>
                <li>ğŸ“¦ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯ <code>npm install node-red-node-pi-sense-hat</code> ã§è¡Œã„ã¾ã™ã€‚</li>
                <li>ğŸ å†…éƒ¨çš„ã«Pythonã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã€Raspberry Pi OSã®æ¨™æº–Pythonç’°å¢ƒãŒå¿…è¦ã§ã™ã€‚</li>
            </ul>
        </div>

        <h2>ğŸ“š 1. Pi Sense HATãƒãƒ¼ãƒ‰ã¨ã¯?</h2>

        <p>
            Raspberry Pi Sense HATã¯ã€Raspberry Piã«æ¥ç¶šã§ãã‚‹å¤šæ©Ÿèƒ½ã‚»ãƒ³ã‚µãƒ¼ãƒœãƒ¼ãƒ‰ã§ã™ã€‚
            Pi Sense HATãƒãƒ¼ãƒ‰ã‚’ä½¿ã†ã¨ã€ã“ã®ãƒœãƒ¼ãƒ‰ã®ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿å–ã£ãŸã‚Šã€LEDãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã‚’åˆ¶å¾¡ã—ãŸã‚Šã§ãã¾ã™ã€‚
        </p>

        <div class="feature-grid">
            <div class="feature-card">
                <h4>ğŸ“¡ ã‚»ãƒ³ã‚µãƒ¼èª­ã¿å–ã‚Šï¼ˆå…¥åŠ›ãƒãƒ¼ãƒ‰ï¼‰</h4>
                <p><span class="sensor-badge badge-motion">ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³</span> åŠ é€Ÿåº¦è¨ˆãƒ»ã‚¸ãƒ£ã‚¤ãƒ­ãƒ»ç£åŠ›è¨ˆ</p>
                <p><span class="sensor-badge badge-env">ç’°å¢ƒ</span> æ¸©åº¦ãƒ»æ¹¿åº¦ãƒ»æ°—åœ§</p>
                <p><span class="sensor-badge badge-joystick">ã‚¸ãƒ§ã‚¤ã‚¹ãƒ†ã‚£ãƒƒã‚¯</span> 5æ–¹å‘å…¥åŠ›</p>
            </div>
            <div class="feature-card">
                <h4>ğŸ’¡ LEDåˆ¶å¾¡ï¼ˆå‡ºåŠ›ãƒãƒ¼ãƒ‰ï¼‰</h4>
                <p><span class="sensor-badge badge-led">8Ã—8ãƒãƒˆãƒªãƒƒã‚¯ã‚¹</span> 64å€‹ã®ãƒ•ãƒ«ã‚«ãƒ©ãƒ¼LED</p>
                <p>ãƒ”ã‚¯ã‚»ãƒ«å˜ä½ãƒ»ãƒ†ã‚­ã‚¹ãƒˆã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒ»å›è»¢ãƒ»åè»¢ã«å¯¾å¿œ</p>
            </div>
        </div>

        <h3>ğŸ“¦ ãƒãƒ¼ãƒ‰ã®æ§‹æˆ</h3>
        <div class="node-example">
            <span class="node node-sensehat">rpi-sensehat in</span>
            <span class="arrow">â†’</span>
            <span class="node node-debug">Debug</span>
            <br><br>
            <span class="node node-inject">Inject</span>
            <span class="arrow">â†’</span>
            <span class="node node-sensehat">rpi-sensehat out</span>
        </div>

        <p>ã“ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯2ç¨®é¡ã®ãƒãƒ¼ãƒ‰ã§æ§‹æˆã•ã‚Œã¦ã„ã¾ã™ï¼š</p>
        <ul>
            <li><strong>rpi-sensehat in</strong> â€” ã‚»ãƒ³ã‚µãƒ¼ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿å–ã‚Šã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ã—ã¦å‡ºåŠ›ã™ã‚‹å…¥åŠ›ãƒãƒ¼ãƒ‰</li>
            <li><strong>rpi-sensehat out</strong> â€” LEDãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã‚’åˆ¶å¾¡ã™ã‚‹å‡ºåŠ›ãƒãƒ¼ãƒ‰</li>
        </ul>

        <h2>âš™ï¸ 2. è¨­å®šé …ç›®ä¸€è¦§</h2>

        <h3>rpi-sensehat inï¼ˆå…¥åŠ›ãƒãƒ¼ãƒ‰ï¼‰</h3>

        <table>
            <tr>
                <th>è¨­å®šé …ç›®</th>
                <th>èª¬æ˜</th>
                <th>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ</th>
            </tr>
            <tr>
                <td><strong>ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆ</strong></td>
                <td>åŠ é€Ÿåº¦è¨ˆã€ã‚¸ãƒ£ã‚¤ãƒ­ã‚¹ã‚³ãƒ¼ãƒ—ã€ç£åŠ›è¨ˆã€æ–¹ä½è¨ˆã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹</td>
                <td>æœ‰åŠ¹ï¼ˆãƒã‚§ãƒƒã‚¯ã‚ã‚Šï¼‰</td>
            </tr>
            <tr>
                <td><strong>ç’°å¢ƒã‚¤ãƒ™ãƒ³ãƒˆ</strong></td>
                <td>æ¸©åº¦ã€æ¹¿åº¦ã€æ°—åœ§ã‚»ãƒ³ã‚µãƒ¼ã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹</td>
                <td>æœ‰åŠ¹ï¼ˆãƒã‚§ãƒƒã‚¯ã‚ã‚Šï¼‰</td>
            </tr>
            <tr>
                <td><strong>ã‚¸ãƒ§ã‚¤ã‚¹ãƒ†ã‚£ãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ</strong></td>
                <td>ã‚¸ãƒ§ã‚¤ã‚¹ãƒ†ã‚£ãƒƒã‚¯ï¼ˆUP/DOWN/LEFT/RIGHT/ENTERï¼‰ã®æ“ä½œã‚’æ¤œå‡ºã™ã‚‹</td>
                <td>æœ‰åŠ¹ï¼ˆãƒã‚§ãƒƒã‚¯ã‚ã‚Šï¼‰</td>
            </tr>
            <tr>
                <td><strong>åå‰</strong></td>
                <td>ãƒãƒ¼ãƒ‰ã®è¡¨ç¤ºå</td>
                <td>ç©ºï¼ˆ"Sense HAT" ã¨è¡¨ç¤ºï¼‰</td>
            </tr>
        </table>

        <h3>rpi-sensehat outï¼ˆå‡ºåŠ›ãƒãƒ¼ãƒ‰ï¼‰</h3>

        <table>
            <tr>
                <th>è¨­å®šé …ç›®</th>
                <th>èª¬æ˜</th>
                <th>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ</th>
            </tr>
            <tr>
                <td><strong>åå‰</strong></td>
                <td>ãƒãƒ¼ãƒ‰ã®è¡¨ç¤ºå</td>
                <td>ç©ºï¼ˆ"Sense HAT" ã¨è¡¨ç¤ºï¼‰</td>
            </tr>
        </table>

        <div class="tip">
            <p><strong>ğŸ’¡ ãƒã‚¤ãƒ³ãƒˆ:</strong> rpi-sensehat out ã¯è¨­å®šé …ç›®ãŒåå‰ã®ã¿ã§ã™ã€‚LEDã¸ã®å‡ºåŠ›å†…å®¹ã¯ã™ã¹ã¦ <code>msg.payload</code> ã§åˆ¶å¾¡ã—ã¾ã™ã€‚</p>
        </div>

        <h2>ğŸ“¤ 3. å…¥åŠ›ãƒãƒ¼ãƒ‰ã®å‡ºåŠ›ãƒ‡ãƒ¼ã‚¿</h2>

        <p>rpi-sensehat in ã¯ã€å„ã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç”Ÿã™ã‚‹ãŸã³ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‡ºåŠ›ã—ã¾ã™ã€‚<code>msg.topic</code> ã§ã‚¤ãƒ™ãƒ³ãƒˆã®ç¨®é¡ã‚’åˆ¤åˆ¥ã§ãã¾ã™ã€‚</p>

        <h3><span class="sensor-badge badge-motion">ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆ</span> topic: "motion"</h3>
        <p>ç´„10å›/ç§’ã®é »åº¦ã§é€ä¿¡ã•ã‚Œã¾ã™ã€‚<code>msg.payload</code> ã«ä»¥ä¸‹ã®ãƒ‡ãƒ¼ã‚¿ãŒå«ã¾ã‚Œã¾ã™ï¼š</p>
        <table>
            <tr>
                <th>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£</th>
                <th>å†…å®¹</th>
                <th>å˜ä½</th>
            </tr>
            <tr>
                <td><code>acceleration.x/y/z</code></td>
                <td>åŠ é€Ÿåº¦è¨ˆï¼ˆX/Y/Zè»¸ï¼‰</td>
                <td>Gï¼ˆé‡åŠ›åŠ é€Ÿåº¦ï¼‰</td>
            </tr>
            <tr>
                <td><code>gyroscope.x/y/z</code></td>
                <td>ã‚¸ãƒ£ã‚¤ãƒ­ã‚¹ã‚³ãƒ¼ãƒ—ï¼ˆX/Y/Zè»¸ï¼‰</td>
                <td>ãƒ©ã‚¸ã‚¢ãƒ³/ç§’</td>
            </tr>
            <tr>
                <td><code>orientation.roll/pitch/yaw</code></td>
                <td>å‘ãè§’åº¦ï¼ˆãƒ­ãƒ¼ãƒ«/ãƒ”ãƒƒãƒ/ãƒ¨ãƒ¼ï¼‰</td>
                <td>åº¦</td>
            </tr>
            <tr>
                <td><code>compass</code></td>
                <td>ç£æ–¹ä½</td>
                <td>åº¦</td>
            </tr>
        </table>

        <div class="code-block">// msg.payloadã®ä¾‹ï¼ˆãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆï¼‰
{
  "acceleration": { "x": 0.01, "y": -0.02, "z": 1.00 },
  "gyroscope":    { "x": 0.001, "y": 0.002, "z": -0.001 },
  "orientation":  { "roll": 2.1, "pitch": -1.5, "yaw": 180.3 },
  "compass": 180.3
}</div>

        <h3><span class="sensor-badge badge-env">ç’°å¢ƒã‚¤ãƒ™ãƒ³ãƒˆ</span> topic: "environment"</h3>
        <p>ç´„1å›/ç§’ã®é »åº¦ã§é€ä¿¡ã•ã‚Œã¾ã™ã€‚<code>msg.payload</code> ã«ä»¥ä¸‹ã®ãƒ‡ãƒ¼ã‚¿ãŒå«ã¾ã‚Œã¾ã™ï¼š</p>
        <table>
            <tr>
                <th>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£</th>
                <th>å†…å®¹</th>
                <th>å˜ä½</th>
            </tr>
            <tr>
                <td><code>temperature</code></td>
                <td>æ¸©åº¦ï¼ˆSense HATåŸºæ¿ä¸Šã®æ¸©åº¦ã‚»ãƒ³ã‚µãƒ¼ã®ãŸã‚ã€CPUã®ç†±å½±éŸ¿ã‚’å—ã‘ã‚‹å ´åˆã‚ã‚Šï¼‰</td>
                <td>â„ƒ</td>
            </tr>
            <tr>
                <td><code>humidity</code></td>
                <td>æ¹¿åº¦</td>
                <td>%</td>
            </tr>
            <tr>
                <td><code>pressure</code></td>
                <td>æ°—åœ§</td>
                <td>ãƒŸãƒªãƒãƒ¼ãƒ«ï¼ˆhPaï¼‰</td>
            </tr>
        </table>

        <div class="code-block">// msg.payloadã®ä¾‹ï¼ˆç’°å¢ƒã‚¤ãƒ™ãƒ³ãƒˆï¼‰
{
  "temperature": 32.5,
  "humidity": 45.2,
  "pressure": 1013.25
}</div>

        <div class="warning">
            <p><strong>âš ï¸ æ¸©åº¦ç²¾åº¦ã«ã¤ã„ã¦:</strong> Sense HATã®æ¸©åº¦ã‚»ãƒ³ã‚µãƒ¼ã¯Raspberry Piã®CPUã«è¿‘ã„ãŸã‚ã€å®Ÿéš›ã®å®¤æ¸©ã‚ˆã‚Š5ã€œ10â„ƒé«˜ãè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚è£œæ­£ãŒå¿…è¦ãªå ´åˆã¯ <code>msg.payload.temperature - 5</code> ã®ã‚ˆã†ã«å·®ã—å¼•ã„ã¦ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚</p>
        </div>

        <h3><span class="sensor-badge badge-joystick">ã‚¸ãƒ§ã‚¤ã‚¹ãƒ†ã‚£ãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ</span> topic: "joystick"</h3>
        <p>ã‚¸ãƒ§ã‚¤ã‚¹ãƒ†ã‚£ãƒƒã‚¯ã®æ“ä½œæ™‚ã«é€ä¿¡ã•ã‚Œã¾ã™ã€‚<code>msg.payload</code> ã«ä»¥ä¸‹ã®ãƒ‡ãƒ¼ã‚¿ãŒå«ã¾ã‚Œã¾ã™ï¼š</p>
        <table>
            <tr>
                <th>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£</th>
                <th>å†…å®¹</th>
                <th>å€¤</th>
            </tr>
            <tr>
                <td><code>key</code></td>
                <td>æŠ¼ã•ã‚ŒãŸã‚­ãƒ¼ã®æ–¹å‘</td>
                <td>"UP" / "DOWN" / "LEFT" / "RIGHT" / "ENTER"</td>
            </tr>
            <tr>
                <td><code>state</code></td>
                <td>ã‚­ãƒ¼ã®çŠ¶æ…‹</td>
                <td>0 = è§£æ”¾ã€1 = æŠ¼ä¸‹ã€2 = ä¿æŒï¼ˆé•·æŠ¼ã—ï¼‰</td>
            </tr>
        </table>

        <div class="code-block">// msg.payloadã®ä¾‹ï¼ˆã‚¸ãƒ§ã‚¤ã‚¹ãƒ†ã‚£ãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆï¼‰
{
  "key": "ENTER",
  "state": 1
}</div>

        <h2>ğŸ“¥ 4. å‡ºåŠ›ãƒãƒ¼ãƒ‰ã¸ã®å…¥åŠ›ã‚³ãƒãƒ³ãƒ‰</h2>

        <p>rpi-sensehat out ã¯ <code>msg.payload</code> ã«æ–‡å­—åˆ—ã§ã‚³ãƒãƒ³ãƒ‰ã‚’é€ã‚‹ã“ã¨ã§ã€8Ã—8 LEDãƒãƒˆãƒªãƒƒã‚¯ã‚¹ã‚’åˆ¶å¾¡ã—ã¾ã™ã€‚</p>

        <h3>ğŸ’¡ ãƒ”ã‚¯ã‚»ãƒ«è¨­å®š</h3>
        <p>å½¢å¼: <code>x,y,è‰²</code></p>
        <table>
            <tr>
                <th>æ›¸å¼</th>
                <th>å†…å®¹</th>
                <th>ä¾‹</th>
            </tr>
            <tr>
                <td><code>x,y,è‰²</code></td>
                <td>æŒ‡å®šåº§æ¨™ã®ãƒ”ã‚¯ã‚»ãƒ«ã‚’ç‚¹ç¯ï¼ˆx/y: 0ã€œ7ï¼‰</td>
                <td><code>3,3,red</code></td>
            </tr>
            <tr>
                <td><code>*,y,è‰²</code></td>
                <td>æŒ‡å®šè¡Œã®å…¨ãƒ”ã‚¯ã‚»ãƒ«ã‚’ç‚¹ç¯</td>
                <td><code>*,0,blue</code></td>
            </tr>
            <tr>
                <td><code>x-x,y-y,è‰²</code></td>
                <td>æŒ‡å®šç¯„å›²ã®ãƒ”ã‚¯ã‚»ãƒ«ã‚’ç‚¹ç¯</td>
                <td><code>0-3,0-3,green</code></td>
            </tr>
            <tr>
                <td><code>x,y,off</code></td>
                <td>æŒ‡å®šåº§æ¨™ã®ãƒ”ã‚¯ã‚»ãƒ«ã‚’æ¶ˆç¯</td>
                <td><code>3,3,off</code></td>
            </tr>
        </table>

        <p><strong>è‰²ã®æŒ‡å®šæ–¹æ³•:</strong></p>
        <ul>
            <li>HTMLè‰²å: <code>red</code>, <code>blue</code>, <code>green</code>, <code>white</code> ãªã©</li>
            <li>16é€²æ•°: <code>#ff0000</code></li>
            <li>RGB: <code>255,0,0</code>ï¼ˆãƒ”ã‚¯ã‚»ãƒ«è¨­å®šã§ã¯ä½¿ç”¨ä¸å¯ï¼‰</li>
            <li>CheerLightsè‰²å: <code>warmwhite</code> ãªã©</li>
            <li>æ¶ˆç¯: <code>off</code></li>
        </ul>

        <h3>ğŸ”„ å›è»¢ãƒ»åè»¢</h3>
        <table>
            <tr>
                <th>ã‚³ãƒãƒ³ãƒ‰</th>
                <th>å†…å®¹</th>
            </tr>
            <tr>
                <td><code>R0</code> / <code>R90</code> / <code>R180</code> / <code>R270</code></td>
                <td>ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã‚’æŒ‡å®šè§’åº¦ã§å›è»¢</td>
            </tr>
            <tr>
                <td><code>FH</code></td>
                <td>æ°´å¹³æ–¹å‘ã«åè»¢ï¼ˆå·¦å³åè»¢ï¼‰</td>
            </tr>
            <tr>
                <td><code>FV</code></td>
                <td>å‚ç›´æ–¹å‘ã«åè»¢ï¼ˆä¸Šä¸‹åè»¢ï¼‰</td>
            </tr>
        </table>

        <h3>ğŸ“ ãƒ†ã‚­ã‚¹ãƒˆã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«</h3>
        <p><code>msg.payload</code> ã«é€šå¸¸ã®æ–‡å­—åˆ—ã‚’é€ã‚‹ã¨ã€8Ã—8 LEDã«è‡ªå‹•ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
        <table>
            <tr>
                <th>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£</th>
                <th>å†…å®¹</th>
                <th>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ</th>
            </tr>
            <tr>
                <td><code>msg.payload</code></td>
                <td>ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«è¡¨ç¤ºã™ã‚‹ãƒ†ã‚­ã‚¹ãƒˆ</td>
                <td>-</td>
            </tr>
            <tr>
                <td><code>msg.color</code></td>
                <td>ãƒ†ã‚­ã‚¹ãƒˆã®è‰²</td>
                <td>white</td>
            </tr>
            <tr>
                <td><code>msg.background</code></td>
                <td>èƒŒæ™¯è‰²</td>
                <td>offï¼ˆæ¶ˆç¯ï¼‰</td>
            </tr>
            <tr>
                <td><code>msg.speed</code></td>
                <td>ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é€Ÿåº¦ï¼ˆ1ã€œ10ï¼‰</td>
                <td>3</td>
            </tr>
        </table>

        <h3>ğŸ”† æ˜ã‚‹ã•èª¿æ•´</h3>
        <table>
            <tr>
                <th>ã‚³ãƒãƒ³ãƒ‰</th>
                <th>å†…å®¹</th>
            </tr>
            <tr>
                <td><code>D0</code></td>
                <td>LEDã®æ˜ã‚‹ã•ã‚’ä½ãè¨­å®šï¼ˆæš—ã„ç’°å¢ƒå‘ã‘ï¼‰</td>
            </tr>
            <tr>
                <td><code>D1</code></td>
                <td>LEDã®æ˜ã‚‹ã•ã‚’é«˜ãè¨­å®šï¼ˆé€šå¸¸ï¼‰</td>
            </tr>
        </table>

        <h2>ğŸ¯ 5. å®Ÿç”¨çš„ãªä½¿ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³</h2>

        <div class="important">
            <p><strong>ğŸ“¥ ã‚µãƒ³ãƒ—ãƒ«ãƒ•ãƒ­ãƒ¼ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ–¹æ³•:</strong></p>
            <ol>
                <li>ä¸‹ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ•ãƒ­ãƒ¼JSONã‚’ã‚³ãƒ”ãƒ¼</li>
                <li>Node-REDã‚¨ãƒ‡ã‚£ã‚¿ã§ <strong>ãƒ¡ãƒ‹ãƒ¥ãƒ¼ â†’ èª­ã¿è¾¼ã¿</strong> ã‚’é¸æŠ</li>
                <li>JSONã‚’ãƒšãƒ¼ã‚¹ãƒˆã—ã¦ã€Œèª­ã¿è¾¼ã¿ã€ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
            </ol>
            <p>âš ï¸ ã“ã®ãƒãƒ¼ãƒ‰ã¯Raspberry Pi + Sense HATãŒã‚ã‚‹ç’°å¢ƒã®ã¿ã§å®Ÿéš›ã«å‹•ä½œã—ã¾ã™ã€‚</p>
        </div>

        <h3>ãƒ‘ã‚¿ãƒ¼ãƒ³1: ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿å–ã‚Šã¨ç¢ºèª</h3>
        <p>Sense HATã®å…¨ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ‡ãƒãƒƒã‚°ãƒ‘ãƒãƒ«ã§ç¢ºèªã™ã‚‹åŸºæœ¬ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã™ã€‚</p>

        <details>
            <summary>ğŸ“‹ ã‚µãƒ³ãƒ—ãƒ«ãƒ•ãƒ­ãƒ¼ï¼ˆã‚¯ãƒªãƒƒã‚¯ã§å±•é–‹ï¼‰</summary>
            <p style="margin: 10px 0; color: #666;"><small>å…¨ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ‡ãƒãƒƒã‚°ãƒ‘ãƒãƒ«ã«è¡¨ç¤ºã—ã¾ã™</small></p>
            <div class="flow-json">
                <button class="copy-button" onclick="copyFlow(this)">
                    <svg viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>
                    ã‚³ãƒ”ãƒ¼
                </button>
[
    {
        "id": "tab_sensehat_01",
        "type": "tab",
        "label": "Sense HAT ã‚»ãƒ³ã‚µãƒ¼èª­ã¿å–ã‚Š",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "sensehat_in_01",
        "type": "rpi-sensehat in",
        "z": "tab_sensehat_01",
        "name": "Sense HAT å…¥åŠ›",
        "motion": true,
        "env": true,
        "stick": true,
        "x": 160,
        "y": 200,
        "wires": [["debug_all_01"]]
    },
    {
        "id": "debug_all_01",
        "type": "debug",
        "z": "tab_sensehat_01",
        "name": "ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ç¢ºèª",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 400,
        "y": 200,
        "wires": []
    }
]
            </div>
        </details>

        <h3>ãƒ‘ã‚¿ãƒ¼ãƒ³2: ç’°å¢ƒãƒ‡ãƒ¼ã‚¿ã®ã¿å–å¾—ã—ã¦LEDã«æ¸©åº¦è¡¨ç¤º</h3>
        <p>ç’°å¢ƒã‚»ãƒ³ã‚µãƒ¼ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã€æ¸©åº¦ã«å¿œã˜ã¦LEDã®è‰²ã‚’å¤‰ãˆã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã™ã€‚</p>

        <details>
            <summary>ğŸ“‹ ã‚µãƒ³ãƒ—ãƒ«ãƒ•ãƒ­ãƒ¼ï¼ˆã‚¯ãƒªãƒƒã‚¯ã§å±•é–‹ï¼‰</summary>
            <p style="margin: 10px 0; color: #666;"><small>æ¸©åº¦ãŒ30â„ƒä»¥ä¸Šãªã‚‰èµ¤ã€25â„ƒä»¥ä¸Šãªã‚‰æ©™ã€ãã‚Œä»¥å¤–ã¯é’ã§LEDã‚’ç‚¹ç¯ã—ã¾ã™</small></p>
            <div class="flow-json">
                <button class="copy-button" onclick="copyFlow(this)">
                    <svg viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>
                    ã‚³ãƒ”ãƒ¼
                </button>
[
    {
        "id": "tab_sensehat_02",
        "type": "tab",
        "label": "Sense HAT æ¸©åº¦è¡¨ç¤º",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "sensehat_in_02",
        "type": "rpi-sensehat in",
        "z": "tab_sensehat_02",
        "name": "ç’°å¢ƒã‚»ãƒ³ã‚µãƒ¼",
        "motion": false,
        "env": true,
        "stick": false,
        "x": 160,
        "y": 200,
        "wires": [["func_temp_color_02"]]
    },
    {
        "id": "func_temp_color_02",
        "type": "function",
        "z": "tab_sensehat_02",
        "name": "æ¸©åº¦â†’LEDè‰²å¤‰æ›",
        "func": "if (msg.topic !== 'environment') return null;\nvar temp = msg.payload.temperature;\nvar color;\nif (temp >= 30) {\n    color = 'red';\n} else if (temp >= 25) {\n    color = 'orange';\n} else {\n    color = 'blue';\n}\nmsg.payload = '*,*,' + color;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 200,
        "wires": [["sensehat_out_02"]]
    },
    {
        "id": "sensehat_out_02",
        "type": "rpi-sensehat out",
        "z": "tab_sensehat_02",
        "name": "LEDè¡¨ç¤º",
        "x": 560,
        "y": 200,
        "wires": []
    }
]
            </div>
        </details>

        <h3>ãƒ‘ã‚¿ãƒ¼ãƒ³3: ã‚¸ãƒ§ã‚¤ã‚¹ãƒ†ã‚£ãƒƒã‚¯ã§LEDã‚’åˆ¶å¾¡</h3>
        <p>ã‚¸ãƒ§ã‚¤ã‚¹ãƒ†ã‚£ãƒƒã‚¯ã®æ“ä½œã«å¿œã˜ã¦LEDã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«è¡¨ç¤ºã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã™ã€‚</p>

        <details>
            <summary>ğŸ“‹ ã‚µãƒ³ãƒ—ãƒ«ãƒ•ãƒ­ãƒ¼ï¼ˆã‚¯ãƒªãƒƒã‚¯ã§å±•é–‹ï¼‰</summary>
            <p style="margin: 10px 0; color: #666;"><small>ENTERã‚­ãƒ¼ã‚’æŠ¼ã™ã¨ "Hello!" ã‚’ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«è¡¨ç¤ºã—ã¾ã™</small></p>
            <div class="flow-json">
                <button class="copy-button" onclick="copyFlow(this)">
                    <svg viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>
                    ã‚³ãƒ”ãƒ¼
                </button>
[
    {
        "id": "tab_sensehat_03",
        "type": "tab",
        "label": "Sense HAT ã‚¸ãƒ§ã‚¤ã‚¹ãƒ†ã‚£ãƒƒã‚¯åˆ¶å¾¡",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "sensehat_in_03",
        "type": "rpi-sensehat in",
        "z": "tab_sensehat_03",
        "name": "ã‚¸ãƒ§ã‚¤ã‚¹ãƒ†ã‚£ãƒƒã‚¯å…¥åŠ›",
        "motion": false,
        "env": false,
        "stick": true,
        "x": 160,
        "y": 200,
        "wires": [["switch_03"]]
    },
    {
        "id": "switch_03",
        "type": "switch",
        "z": "tab_sensehat_03",
        "name": "ENTERæŠ¼ä¸‹ã®ã¿é€šé",
        "property": "payload.key",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "ENTER",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 360,
        "y": 200,
        "wires": [["func_scroll_03"]]
    },
    {
        "id": "func_scroll_03",
        "type": "function",
        "z": "tab_sensehat_03",
        "name": "ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¨­å®š",
        "func": "if (msg.payload.state !== 1) return null;\nmsg.payload = 'Hello!';\nmsg.color = 'yellow';\nmsg.speed = 5;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 580,
        "y": 200,
        "wires": [["sensehat_out_03"]]
    },
    {
        "id": "sensehat_out_03",
        "type": "rpi-sensehat out",
        "z": "tab_sensehat_03",
        "name": "LEDã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«",
        "x": 800,
        "y": 200,
        "wires": []
    }
]
            </div>
        </details>

        <h3>ãƒ‘ã‚¿ãƒ¼ãƒ³4: LEDå…¨é¢åˆ¶å¾¡ã¨ãƒ†ã‚­ã‚¹ãƒˆè¡¨ç¤º</h3>
        <p>Injectãƒãƒ¼ãƒ‰ã‹ã‚‰LEDã®å„ç¨®ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚³ãƒãƒ³ãƒ‰ã‚’æ‰‹å‹•ã§é€ä¿¡ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã™ã€‚</p>

        <details>
            <summary>ğŸ“‹ ã‚µãƒ³ãƒ—ãƒ«ãƒ•ãƒ­ãƒ¼ï¼ˆã‚¯ãƒªãƒƒã‚¯ã§å±•é–‹ï¼‰</summary>
            <p style="margin: 10px 0; color: #666;"><small>å„ç¨®ã‚³ãƒãƒ³ãƒ‰ã®å‹•ä½œç¢ºèªã«ä½¿ç”¨ã§ãã¾ã™</small></p>
            <div class="flow-json">
                <button class="copy-button" onclick="copyFlow(this)">
                    <svg viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>
                    ã‚³ãƒ”ãƒ¼
                </button>
[
    {
        "id": "tab_sensehat_04",
        "type": "tab",
        "label": "Sense HAT LEDåˆ¶å¾¡ã‚³ãƒãƒ³ãƒ‰",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "inject_scroll_04",
        "type": "inject",
        "z": "tab_sensehat_04",
        "name": "ãƒ†ã‚­ã‚¹ãƒˆã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«",
        "props": [
            {"p": "payload"},
            {"p": "color", "v": "cyan", "vt": "str"},
            {"p": "speed", "v": "5", "vt": "num"}
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "Hello Node-RED!",
        "payloadType": "str",
        "x": 160,
        "y": 120,
        "wires": [["sensehat_out_04"]]
    },
    {
        "id": "inject_pixel_04",
        "type": "inject",
        "z": "tab_sensehat_04",
        "name": "ä¸­å¿ƒãƒ”ã‚¯ã‚»ãƒ«èµ¤ç‚¹ç¯",
        "props": [{"p": "payload"}],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "3,3,red",
        "payloadType": "str",
        "x": 170,
        "y": 180,
        "wires": [["sensehat_out_04"]]
    },
    {
        "id": "inject_alloff_04",
        "type": "inject",
        "z": "tab_sensehat_04",
        "name": "å…¨æ¶ˆç¯",
        "props": [{"p": "payload"}],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "*,*,off",
        "payloadType": "str",
        "x": 130,
        "y": 240,
        "wires": [["sensehat_out_04"]]
    },
    {
        "id": "inject_rotate_04",
        "type": "inject",
        "z": "tab_sensehat_04",
        "name": "90åº¦å›è»¢",
        "props": [{"p": "payload"}],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "R90",
        "payloadType": "str",
        "x": 130,
        "y": 300,
        "wires": [["sensehat_out_04"]]
    },
    {
        "id": "inject_bright_04",
        "type": "inject",
        "z": "tab_sensehat_04",
        "name": "æ˜ã‚‹ã•ä½",
        "props": [{"p": "payload"}],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "D0",
        "payloadType": "str",
        "x": 130,
        "y": 360,
        "wires": [["sensehat_out_04"]]
    },
    {
        "id": "sensehat_out_04",
        "type": "rpi-sensehat out",
        "z": "tab_sensehat_04",
        "name": "LEDåˆ¶å¾¡",
        "x": 420,
        "y": 240,
        "wires": []
    }
]
            </div>
        </details>

        <h2>ğŸ“ 6. æ¼”ç¿’å•é¡Œ</h2>

        <div class="exercise">
            <h3>æ¼”ç¿’1: ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚° <span class="difficulty difficulty-easy">åˆç´š</span></h3>
            <p><strong>èª²é¡Œ:</strong> rpi-sensehat in ã‹ã‚‰æ¥ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’topicã§æŒ¯ã‚Šåˆ†ã‘ã€ç’°å¢ƒãƒ‡ãƒ¼ã‚¿ã®ã¿ãƒ‡ãƒãƒƒã‚°ã«è¡¨ç¤ºã™ã‚‹ãƒ•ãƒ­ãƒ¼ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚</p>
            <p><strong>âœ… æˆåŠŸã®æ¡ä»¶:</strong></p>
            <ul>
                <li>ãƒ‡ãƒãƒƒã‚°ãƒ‘ãƒãƒ«ã« <code>msg.topic: "environment"</code> ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã¿ãŒç´„1ç§’ã”ã¨ã«è¡¨ç¤ºã•ã‚Œã‚‹</li>
                <li><code>motion</code> ã‚„ <code>joystick</code> ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ãƒ‡ãƒãƒƒã‚°ãƒ‘ãƒãƒ«ã«ä¸€åˆ‡è¡¨ç¤ºã•ã‚Œãªã„</li>
                <li>ãƒ‡ãƒãƒƒã‚°ãƒ‘ãƒãƒ«ã®ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ã« <code>temperature</code>ãƒ»<code>humidity</code>ãƒ»<code>pressure</code> ã®3ã¤ã®ã‚­ãƒ¼ãŒå«ã¾ã‚Œã¦ã„ã‚‹</li>
            </ul>
            <p><strong>ãƒ’ãƒ³ãƒˆ:</strong> Switchãƒãƒ¼ãƒ‰ã§Switchã®æ¡ä»¶ã‚’ <code>msg.topic == "environment"</code> ã«ã—ã¾ã™ã€‚</p>
            <details>
                <summary>ğŸ“‹ è§£ç­”ãƒ•ãƒ­ãƒ¼ï¼ˆã‚¯ãƒªãƒƒã‚¯ã§å±•é–‹ï¼‰</summary>
                <div class="flow-json">
                    <button class="copy-button" onclick="copyFlow(this)">
                        <svg viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>
                        ã‚³ãƒ”ãƒ¼
                    </button>
[
    {
        "id": "tab_ex1",
        "type": "tab",
        "label": "æ¼”ç¿’1: ç’°å¢ƒãƒ‡ãƒ¼ã‚¿ãƒ•ã‚£ãƒ«ã‚¿",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "sensehat_in_ex1",
        "type": "rpi-sensehat in",
        "z": "tab_ex1",
        "name": "Sense HAT",
        "motion": true,
        "env": true,
        "stick": true,
        "x": 160,
        "y": 200,
        "wires": [["switch_ex1"]]
    },
    {
        "id": "switch_ex1",
        "type": "switch",
        "z": "tab_ex1",
        "name": "ç’°å¢ƒãƒ‡ãƒ¼ã‚¿ã®ã¿é€šé",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "environment",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 370,
        "y": 200,
        "wires": [["debug_ex1"]]
    },
    {
        "id": "debug_ex1",
        "type": "debug",
        "z": "tab_ex1",
        "name": "ç’°å¢ƒãƒ‡ãƒ¼ã‚¿",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 570,
        "y": 200,
        "wires": []
    }
]
                </div>
            </details>
        </div>

        <div class="exercise">
            <h3>æ¼”ç¿’2: ã‚¸ãƒ§ã‚¤ã‚¹ãƒ†ã‚£ãƒƒã‚¯ã§LEDè‰²å¤‰æ›´ <span class="difficulty difficulty-medium">ä¸­ç´š</span></h3>
            <p><strong>èª²é¡Œ:</strong> ã‚¸ãƒ§ã‚¤ã‚¹ãƒ†ã‚£ãƒƒã‚¯ã®å„æ–¹å‘ï¼ˆUP/DOWN/LEFT/RIGHTï¼‰ã«å¯¾å¿œã—ãŸè‰²ã§LEDå…¨é¢ã‚’ç‚¹ç¯ã•ã›ã‚‹ãƒ•ãƒ­ãƒ¼ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚</p>
            <ul>
                <li>UP â†’ èµ¤ï¼ˆredï¼‰</li>
                <li>DOWN â†’ é’ï¼ˆblueï¼‰</li>
                <li>LEFT â†’ ç·‘ï¼ˆgreenï¼‰</li>
                <li>RIGHT â†’ é»„ï¼ˆyellowï¼‰</li>
            </ul>
            <p><strong>âœ… æˆåŠŸã®æ¡ä»¶:</strong></p>
            <ul>
                <li>ã‚¸ãƒ§ã‚¤ã‚¹ãƒ†ã‚£ãƒƒã‚¯ã‚’ä¸Šï¼ˆUPï¼‰ã«å€’ã™ã¨ã€8Ã—8 LED 64å€‹ãŒ<strong>ã™ã¹ã¦èµ¤</strong>ã«ç‚¹ç¯ã™ã‚‹</li>
                <li>ä¸‹ï¼ˆDOWNï¼‰ã¯é’ã€å·¦ï¼ˆLEFTï¼‰ã¯ç·‘ã€å³ï¼ˆRIGHTï¼‰ã¯é»„è‰²ã«ã€ãã‚Œãã‚Œå…¨é¢ç‚¹ç¯ã™ã‚‹</li>
                <li>ENTER ã‚­ãƒ¼ã‚„é•·æŠ¼ã—ï¼ˆstate: 2ï¼‰ã§ã¯ä½•ã‚‚èµ·ããªã„ï¼ˆä½™åˆ†ãªåå¿œãŒãªã„ï¼‰</li>
                <li>æ–¹å‘ã‚’å¤‰ãˆã‚‹ãŸã³ã«å³åº§ã«è‰²ãŒåˆ‡ã‚Šæ›¿ã‚ã‚‹ï¼ˆå‰ã®è‰²ãŒæ®‹ã‚‰ãªã„ï¼‰</li>
            </ul>
            <p><strong>ãƒ’ãƒ³ãƒˆ:</strong> Functionãƒãƒ¼ãƒ‰ã§ <code>msg.payload.key</code> ã‚’å‚ç…§ã—ã€å¯¾å¿œã™ã‚‹è‰²ã§ <code>*,*,è‰²</code> ã‚³ãƒãƒ³ãƒ‰ã‚’çµ„ã¿ç«‹ã¦ã¾ã™ã€‚</p>
            <details>
                <summary>ğŸ“‹ è§£ç­”ãƒ•ãƒ­ãƒ¼ï¼ˆã‚¯ãƒªãƒƒã‚¯ã§å±•é–‹ï¼‰</summary>
                <div class="flow-json">
                    <button class="copy-button" onclick="copyFlow(this)">
                        <svg viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>
                        ã‚³ãƒ”ãƒ¼
                    </button>
[
    {
        "id": "tab_ex2",
        "type": "tab",
        "label": "æ¼”ç¿’2: ã‚¸ãƒ§ã‚¤ã‚¹ãƒ†ã‚£ãƒƒã‚¯LEDè‰²å¤‰æ›´",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "sensehat_in_ex2",
        "type": "rpi-sensehat in",
        "z": "tab_ex2",
        "name": "ã‚¸ãƒ§ã‚¤ã‚¹ãƒ†ã‚£ãƒƒã‚¯å…¥åŠ›",
        "motion": false,
        "env": false,
        "stick": true,
        "x": 160,
        "y": 200,
        "wires": [["func_ex2"]]
    },
    {
        "id": "func_ex2",
        "type": "function",
        "z": "tab_ex2",
        "name": "æ–¹å‘â†’LEDè‰²å¤‰æ›",
        "func": "if (msg.payload.state !== 1) return null;\nvar colorMap = {\n    'UP':    'red',\n    'DOWN':  'blue',\n    'LEFT':  'green',\n    'RIGHT': 'yellow'\n};\nvar color = colorMap[msg.payload.key];\nif (!color) return null;\nmsg.payload = '*,*,' + color;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 200,
        "wires": [["sensehat_out_ex2"]]
    },
    {
        "id": "sensehat_out_ex2",
        "type": "rpi-sensehat out",
        "z": "tab_ex2",
        "name": "LEDå…¨é¢è¡¨ç¤º",
        "x": 580,
        "y": 200,
        "wires": []
    }
]
                </div>
            </details>
        </div>

        <div class="exercise">
            <h3>æ¼”ç¿’3: å‚¾ãæ¤œçŸ¥ã‚¢ãƒ©ãƒ¼ãƒˆ <span class="difficulty difficulty-hard">ä¸Šç´š</span></h3>
            <p><strong>èª²é¡Œ:</strong> ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã‚»ãƒ³ã‚µãƒ¼ã®å‚¾ãï¼ˆorientationï¼‰ã‚’ç›£è¦–ã—ã€Sense HATãŒæ°´å¹³ã‹ã‚‰30åº¦ä»¥ä¸Šå‚¾ã„ãŸã¨ãã«LEDã‚’ç‚¹ç¯ã•ã›ã‚‹ãƒ•ãƒ­ãƒ¼ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚å…ƒã«æˆ»ã—ãŸã‚‰3ç§’å¾Œã«è‡ªå‹•æ¶ˆç¯ã—ã¾ã™ã€‚</p>
            <p><strong>âœ… æˆåŠŸã®æ¡ä»¶:</strong></p>
            <ul>
                <li>Sense HAT ãŒæ°´å¹³ï¼ˆæœºã®ä¸Šãªã©ï¼‰ã«ç½®ã‹ã‚Œã¦ã„ã‚‹é–“ã¯ã€LED ã¯<strong>æ¶ˆç¯ã—ãŸã¾ã¾</strong>å¤‰åŒ–ã—ãªã„</li>
                <li>å‰å¾Œã¾ãŸã¯å·¦å³ã«<strong>30åº¦ä»¥ä¸Šå‚¾ã‘ã‚‹</strong>ã¨ã€LED å…¨é¢ãŒ<strong>ã‚ªãƒ¬ãƒ³ã‚¸è‰²</strong>ã«ç‚¹ç¯ã™ã‚‹</li>
                <li>å‚¾ã‘ã¦ã„ã‚‹é–“ã¯ LED ãŒ<strong>ç‚¹ç¯ã—ç¶šã‘ã‚‹</strong></li>
                <li>æ°´å¹³ã«æˆ»ã—ã¦ã‹ã‚‰<strong>3ç§’å¾Œ</strong>ã« LED ãŒè‡ªå‹•çš„ã«æ¶ˆç¯ã™ã‚‹ï¼ˆæ‰‹å‹•æ“ä½œä¸è¦ï¼‰</li>
            </ul>
            <div class="tip">
                <p><strong>ğŸ’¡ ãªãœå‚¾ãã‚’ä½¿ã†ã®ã‹:</strong> <code>orientation.roll</code>ï¼ˆå·¦å³ã®å‚¾ãï¼‰ã¨ <code>orientation.pitch</code>ï¼ˆå‰å¾Œã®å‚¾ãï¼‰ã¯ã€ãƒœãƒ¼ãƒ‰ã‚’æ‰‹ã§å‚¾ã‘ã‚‹ã ã‘ã§ç¢ºå®Ÿã«å¤§ããå¤‰åŒ–ã—ã¾ã™ã€‚å®Ÿéš›ã«æ‰‹ã«æŒã£ã¦è©¦ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
            </div>
            <p><strong>ãƒ’ãƒ³ãƒˆ:</strong></p>
            <ul>
                <li>Functionãƒãƒ¼ãƒ‰ã§ <code>msg.topic === 'motion'</code> ã®ã¨ãã®ã¿å‡¦ç†ã—ã€<code>msg.payload.orientation.roll</code> ã¨ <code>msg.payload.orientation.pitch</code> ã‚’ç¢ºèªã—ã¾ã™</li>
                <li>Triggerãƒãƒ¼ãƒ‰ã®ã€Œå»¶é•·ã€ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã¨ã€å‚¾ã‘ã¦ã„ã‚‹é–“ã¯æ¶ˆç¯ã‚¿ã‚¤ãƒãƒ¼ãŒãƒªã‚»ãƒƒãƒˆã•ã‚Œç¶šã‘ã€æˆ»ã—ãŸã¨ãã ã‘ã‚«ã‚¦ãƒ³ãƒˆãŒå§‹ã¾ã‚Šã¾ã™</li>
            </ul>
            <details>
                <summary>ğŸ“‹ è§£ç­”ãƒ•ãƒ­ãƒ¼ï¼ˆã‚¯ãƒªãƒƒã‚¯ã§å±•é–‹ï¼‰</summary>
                <div class="flow-json">
                    <button class="copy-button" onclick="copyFlow(this)">
                        <svg viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>
                        ã‚³ãƒ”ãƒ¼
                    </button>
[
    {
        "id": "tab_ex3",
        "type": "tab",
        "label": "æ¼”ç¿’3: å‚¾ãæ¤œçŸ¥ã‚¢ãƒ©ãƒ¼ãƒˆ",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "sensehat_in_ex3",
        "type": "rpi-sensehat in",
        "z": "tab_ex3",
        "name": "ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã‚»ãƒ³ã‚µãƒ¼",
        "motion": true,
        "env": false,
        "stick": false,
        "x": 160,
        "y": 200,
        "wires": [["func_tilt_ex3"]]
    },
    {
        "id": "func_tilt_ex3",
        "type": "function",
        "z": "tab_ex3",
        "name": "å‚¾ãæ¤œçŸ¥",
        "func": "if (msg.topic !== 'motion') return null;\nvar roll = Math.abs(msg.payload.orientation.roll);\nvar pitch = Math.abs(msg.payload.orientation.pitch);\nif (roll > 30 || pitch > 30) {\n    msg.payload = '*,*,orange';\n    return msg;\n}\nreturn null;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 200,
        "wires": [["trigger_ex3"]]
    },
    {
        "id": "trigger_ex3",
        "type": "trigger",
        "z": "tab_ex3",
        "name": "æˆ»ã—ã¦ã‹ã‚‰3ç§’ã§æ¶ˆç¯",
        "op1": "",
        "op2": "*,*,off",
        "op1type": "pay",
        "op2type": "str",
        "duration": "3",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 590,
        "y": 200,
        "wires": [["sensehat_out_ex3"]]
    },
    {
        "id": "sensehat_out_ex3",
        "type": "rpi-sensehat out",
        "z": "tab_ex3",
        "name": "LEDã‚¢ãƒ©ãƒ¼ãƒˆ",
        "x": 800,
        "y": 200,
        "wires": []
    }
]
                </div>
            </details>
        </div>

        <h2>ğŸ”§ 7. ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°</h2>

        <table>
            <tr>
                <th>ç—‡çŠ¶</th>
                <th>åŸå› </th>
                <th>è§£æ±ºæ–¹æ³•</th>
            </tr>
            <tr>
                <td>ãƒãƒ¼ãƒ‰ãŒã€Œèµ¤ã„ã‚¨ãƒ©ãƒ¼ã€çŠ¶æ…‹ã«ãªã‚‹</td>
                <td>Raspberry Piä»¥å¤–ã®ç’°å¢ƒã§å®Ÿè¡Œã—ã¦ã„ã‚‹</td>
                <td>Raspberry Piä¸Šã®Node-REDã§å®Ÿè¡Œã—ã¦ãã ã•ã„</td>
            </tr>
            <tr>
                <td>ãƒãƒ¼ãƒ‰ãŒèµ·å‹•ã—ãªã„ / Sense HATãŒå¿œç­”ã—ãªã„</td>
                <td>Sense HATãŒæ­£ã—ãæ¥ç¶šã•ã‚Œã¦ã„ãªã„</td>
                <td>é›»æºã‚’åˆ‡ã£ã¦ã‹ã‚‰å†æ¥ç¶šã—ã€<code>sudo apt install sense-hat</code> ã‚’å®Ÿè¡Œ</td>
            </tr>
            <tr>
                <td>æ¸©åº¦ãŒå®Ÿéš›ã‚ˆã‚Šé«˜ãè¡¨ç¤ºã•ã‚Œã‚‹</td>
                <td>CPUã®ç†±ãŒSense HATã®æ¸©åº¦ã‚»ãƒ³ã‚µãƒ¼ã«å½±éŸ¿ã—ã¦ã„ã‚‹</td>
                <td>Functionãƒãƒ¼ãƒ‰ã§è£œæ­£å€¤ã‚’å¼•ãï¼ˆä¾‹: <code>temp - 5</code>ï¼‰</td>
            </tr>
            <tr>
                <td>ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿ãŒå¤šã™ãã‚‹</td>
                <td>ç´„10å›/ç§’ã§é€ä¿¡ã•ã‚Œã‚‹ãŸã‚éè² è·ã«ãªã‚‹ã“ã¨ãŒã‚ã‚‹</td>
                <td>Switchãƒãƒ¼ãƒ‰ã‚„ãƒ•ãƒ­ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’ä½¿ã„ã€ä¸€å®šé–“éš”ã§ã®ã¿å‡¦ç†ã™ã‚‹</td>
            </tr>
            <tr>
                <td>LEDã«ã‚³ãƒãƒ³ãƒ‰ãŒåŠ¹ã‹ãªã„</td>
                <td><code>msg.payload</code> ã®æ›¸å¼ãŒé–“é•ã£ã¦ã„ã‚‹</td>
                <td>åº§æ¨™ã¯ <code>x,y,è‰²</code>ï¼ˆã‚¹ãƒšãƒ¼ã‚¹ãªã—ï¼‰ã€è‰²ã¯HTMLè‰²åã‹HEXã§æŒ‡å®š</td>
            </tr>
        </table>

        <h2>ğŸ“– 8. ã¾ã¨ã‚</h2>

        <div class="tip">
            <p><strong>ğŸ’¡ Pi Sense HATãƒãƒ¼ãƒ‰ã®ãƒã‚¤ãƒ³ãƒˆ:</strong></p>
            <ul>
                <li>ğŸ“ <strong>Raspberry Pi + Sense HATãŒå¿…é ˆ</strong> â€” ä»–ã®ç’°å¢ƒã§ã¯å‹•ä½œã—ã¾ã›ã‚“</li>
                <li>ğŸ“¡ <strong>å…¥åŠ›ãƒãƒ¼ãƒ‰</strong>: ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³/ç’°å¢ƒ/ã‚¸ãƒ§ã‚¤ã‚¹ãƒ†ã‚£ãƒƒã‚¯ã®3ç¨®é¡ã®ã‚»ãƒ³ã‚µãƒ¼ã‚’ã¾ã¨ã‚ã¦èª­ã¿å–ã‚Š</li>
                <li>ğŸ’¡ <strong>å‡ºåŠ›ãƒãƒ¼ãƒ‰</strong>: <code>msg.payload</code> ã®æ–‡å­—åˆ—ã‚³ãƒãƒ³ãƒ‰ã§8Ã—8 LEDã‚’åˆ¶å¾¡</li>
                <li>ğŸŒ¡ï¸ <strong>æ¸©åº¦è£œæ­£ã«æ³¨æ„</strong>: CPUã®ç†±å½±éŸ¿ã‚’å—ã‘ã‚‹ãŸã‚ã€å¿…è¦ã«å¿œã˜ã¦è£œæ­£å€¤ã‚’å¼•ã</li>
                <li>âš¡ <strong>ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿ã¯é«˜é »åº¦</strong>: ç´„10å›/ç§’ã®ãŸã‚ã€ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã—ã¦ä½¿ç”¨ã™ã‚‹</li>
            </ul>
        </div>

        <h3>ğŸ”— å‚è€ƒãƒªãƒ³ã‚¯</h3>
        <ul>
            <li><a href="https://flows.nodered.org/node/node-red-node-pi-sense-hat" target="_blank">node-red-node-pi-sense-hat â€” Node-RED Library</a></li>
            <li><a href="https://github.com/node-red/node-red-nodes/tree/master/hardware/sensehat" target="_blank">ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ (GitHub)</a></li>
            <li><a href="https://www.raspberrypi.com/documentation/accessories/sense-hat.html" target="_blank">Raspberry Pi Sense HAT å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a></li>
        </ul>
    </div>

    <a href="index.html" class="home-button">ğŸ  ãƒ›ãƒ¼ãƒ ã¸</a>

    <script>
        function copyFlow(btn) {
            const container = btn.closest('.flow-json');
            const text = container.innerText.replace(/^ã‚³ãƒ”ãƒ¼\n?/, '').replace(/^[\s\S]*?\[/, '[');
            const match = container.innerText.match(/\[[\s\S]*\]/);
            if (match) {
                navigator.clipboard.writeText(match[0]).then(() => {
                    btn.classList.add('copied');
                    btn.innerHTML = '<svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg> ã‚³ãƒ”ãƒ¼æ¸ˆã¿';
                    setTimeout(() => {
                        btn.classList.remove('copied');
                        btn.innerHTML = '<svg viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg> ã‚³ãƒ”ãƒ¼';
                    }, 2000);
                });
            }
        }
    </script>
</body>
</html>

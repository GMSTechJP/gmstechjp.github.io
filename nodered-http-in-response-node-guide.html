<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Node-RED HTTP In / Response ãƒãƒ¼ãƒ‰ã‚¬ã‚¤ãƒ‰</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.8; max-width: 1000px; margin: 0 auto; padding: 20px; background-color: #f5f5f5; color: #333; }
        h1 { color: #b92d5d; border-bottom: 3px solid #b92d5d; padding-bottom: 10px; }
        h2 { color: #d33682; margin-top: 40px; border-left: 5px solid #d33682; padding-left: 15px; }
        h3 { color: #555; margin-top: 25px; }
        h4 { color: #666; margin-top: 20px; }
        .container { background-color: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 20px; }
        .node-example { background-color: #2d3133; padding: 20px; border-radius: 5px; margin: 20px 0; color: white; font-family: 'Courier New', monospace; display: flex; align-items: center; flex-wrap: wrap; gap: 5px; }
        .node { display: inline-block; padding: 8px 15px; border-radius: 4px; margin: 5px; font-weight: bold; font-size: 14px; }
        .node-inject { background-color: #3fadb5; color: white; }
        .node-debug { background-color: #87a48d; color: white; }
        .node-function { background-color: #e8a658; color: white; }
        .node-change { background-color: #e7a070; color: white; }
        .node-switch { background-color: #e2d96e; color: #333; }
        .node-http-in { background-color: #c9b6d5; color: #333; }
        .node-http-response { background-color: #c9b6d5; color: #333; }
        .node-catch { background-color: #e8967a; color: white; }
        .node-template { background-color: #d4b8a0; color: #333; }
        .arrow { color: #999; font-size: 20px; margin: 0 10px; }
        .important { background-color: #fce4ec; border-left: 4px solid #b92d5d; padding: 15px; margin: 20px 0; border-radius: 0 5px 5px 0; }
        .tip { background-color: #e8f5e9; border-left: 4px solid #4caf50; padding: 15px; margin: 20px 0; border-radius: 0 5px 5px 0; }
        .warning { background-color: #fff3e0; border-left: 4px solid #ff9800; padding: 15px; margin: 20px 0; border-radius: 0 5px 5px 0; }
        .code-block { background-color: #2d3133; color: #f8f8f2; padding: 15px; border-radius: 5px; margin: 15px 0; overflow-x: auto; font-family: 'Courier New', Consolas, monospace; font-size: 14px; white-space: pre; }
        .flow-json { background-color: #1a1a2e; color: #a6e22e; padding: 15px; border-radius: 5px; font-family: 'Courier New', Consolas, monospace; font-size: 12px; overflow-x: auto; white-space: pre; position: relative; max-height: 400px; overflow-y: auto; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
        th { background-color: #b92d5d; color: white; }
        tr:nth-child(even) { background-color: #f9f9f9; }
        .exercise { background-color: #e3f2fd; padding: 20px; border-radius: 8px; margin: 20px 0; border: 2px solid #2196f3; }
        .exercise h3 { color: #1976d2; margin-top: 0; }
        .difficulty { display: inline-block; padding: 3px 10px; border-radius: 12px; font-size: 12px; font-weight: bold; margin-left: 10px; }
        .difficulty-easy { background-color: #c8e6c9; color: #2e7d32; }
        .difficulty-medium { background-color: #fff9c4; color: #f57f17; }
        .difficulty-hard { background-color: #ffcdd2; color: #c62828; }
        details { background-color: #f5f5f5; padding: 10px 15px; border-radius: 5px; margin: 10px 0; }
        details summary { cursor: pointer; font-weight: bold; color: #1976d2; }
        details[open] summary { margin-bottom: 10px; }
        .toc { background-color: #fafafa; border: 1px solid #ddd; border-radius: 8px; padding: 20px; margin: 20px 0; }
        .toc h3 { margin-top: 0; color: #b92d5d; }
        .toc ul { list-style: none; padding-left: 0; }
        .toc li { padding: 5px 0; }
        .toc a { color: #1976d2; text-decoration: none; }
        .toc a:hover { text-decoration: underline; }
        .copy-btn { position: absolute; top: 5px; right: 5px; background-color: #666; color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer; font-size: 12px; }
        .copy-btn:hover { background-color: #888; }
        .node-compare { display: flex; gap: 20px; flex-wrap: wrap; margin: 20px 0; }
        .node-card { background: #f9f9f9; border: 1px solid #ddd; border-radius: 8px; padding: 15px; flex: 1; min-width: 280px; }
        .node-card h4 { margin-top: 0; color: #b92d5d; }
        .endpoint-box { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 15px 20px; border-radius: 8px; margin: 10px 0; font-family: 'Courier New', monospace; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ–¥ï¸ Node-RED HTTP In / Response ãƒãƒ¼ãƒ‰ã‚¬ã‚¤ãƒ‰</h1>
        
        <div class="toc">
            <h3>ğŸ“š ç›®æ¬¡</h3>
            <ul>
                <li><a href="#section1">1. æ¦‚è¦</a></li>
                <li><a href="#section2">2. HTTP In ãƒãƒ¼ãƒ‰è¨­å®š</a></li>
                <li><a href="#section3">3. HTTP Response ãƒãƒ¼ãƒ‰è¨­å®š</a></li>
                <li><a href="#section4">4. å®Ÿç”¨çš„ãªä½¿ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³</a></li>
                <li><a href="#section5">5. ã‚µãƒ³ãƒ—ãƒ«ãƒ•ãƒ­ãƒ¼</a></li>
                <li><a href="#section6">6. æ¼”ç¿’å•é¡Œ</a></li>
                <li><a href="#section7">7. ã¾ã¨ã‚</a></li>
                <li><a href="#section8">8. ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°</a></li>
                <li><a href="#section9">9. å®Ÿå‹™æ´»ç”¨ä¾‹</a></li>
            </ul>
        </div>
        
        <h2 id="section1">ğŸ“– 1. æ¦‚è¦</h2>
        
        <p>HTTP In / Response ãƒãƒ¼ãƒ‰ã¯ã€<strong>Node-REDè‡ªä½“ã‚’Webã‚µãƒ¼ãƒãƒ¼ã¨ã—ã¦å‹•ä½œã•ã›ã‚‹</strong>ãŸã‚ã®ãƒãƒ¼ãƒ‰ã§ã™ã€‚å¤–éƒ¨ã‹ã‚‰ã®HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ã‘ä»˜ã‘ã€å‡¦ç†ã—ã¦ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã™APIã‚’ä½œæˆã§ãã¾ã™ã€‚</p>
        
        <div class="node-compare">
            <div class="node-card">
                <h4>ğŸ“¥ HTTP In</h4>
                <div class="node-example" style="justify-content: center;">
                    <span class="node node-http-in">HTTP In</span>
                </div>
                <p><strong>å½¹å‰²:</strong> HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ä¿¡</p>
                <p><strong>æ©Ÿèƒ½:</strong></p>
                <ul>
                    <li>URLã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’å®šç¾©</li>
                    <li>HTTPãƒ¡ã‚½ãƒƒãƒ‰ã‚’æŒ‡å®šï¼ˆGET/POSTç­‰ï¼‰</li>
                    <li>ãƒªã‚¯ã‚¨ã‚¹ãƒˆæƒ…å ±ã‚’msgã«è¨­å®š</li>
                </ul>
            </div>
            
            <div class="node-card">
                <h4>ğŸ“¤ HTTP Response</h4>
                <div class="node-example" style="justify-content: center;">
                    <span class="node node-http-response">HTTP Response</span>
                </div>
                <p><strong>å½¹å‰²:</strong> HTTPãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’é€ä¿¡</p>
                <p><strong>æ©Ÿèƒ½:</strong></p>
                <ul>
                    <li>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’è¨­å®š</li>
                    <li>ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’è¨­å®š</li>
                    <li>ãƒœãƒ‡ã‚£ã‚’è¿”ã™</li>
                </ul>
            </div>
        </div>
        
        <p>ğŸª <strong>ã‚³ãƒ³ãƒ“ãƒ‹ã«ä¾‹ãˆã‚‹ã¨</strong>ï¼šHTTP In ãƒãƒ¼ãƒ‰ã¯ã€Œå…¥å£ã®è‡ªå‹•ãƒ‰ã‚¢ã€ã€HTTP Response ãƒãƒ¼ãƒ‰ã¯ã€Œãƒ¬ã‚¸ã§å•†å“ã‚’æ¸¡ã™åº—å“¡ã€ã§ã™ã€‚ãŠå®¢ã•ã‚“ï¼ˆãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼‰ãŒå…¥ã£ã¦ãã¦ã€æ³¨æ–‡ï¼ˆå‡¦ç†ï¼‰ã‚’å—ã‘ã€å•†å“ï¼ˆãƒ¬ã‚¹ãƒãƒ³ã‚¹ï¼‰ã‚’æ¸¡ã™ã¨ã„ã†æµã‚Œã§ã™ã€‚</p>
        
        <div class="node-example">
            <span class="node node-http-in">HTTP In</span>
            <span class="arrow">â†’</span>
            <span class="node node-function">å‡¦ç†</span>
            <span class="arrow">â†’</span>
            <span class="node node-http-response">HTTP Response</span>
        </div>
        
        <div class="important">
            <p><strong>âš ï¸ é‡è¦:</strong> HTTP In ã¨ HTTP Response ã¯å¿…ãšãƒšã‚¢ã§ä½¿ç”¨ã—ã¾ã™ã€‚HTTP Response ãŒãªã„ã¨ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆå…ƒã¯ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã¾ã§å¾…ã¡ç¶šã‘ã¾ã™ã€‚</p>
        </div>
        
        <h2 id="section2">âš™ï¸ 2. HTTP In ãƒãƒ¼ãƒ‰è¨­å®š</h2>
        
        <h3>ä¸»è¦ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£</h3>
        <table>
            <tr><th>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£</th><th>èª¬æ˜</th><th>ä¾‹</th></tr>
            <tr><td><strong>Method</strong></td><td>å—ã‘ä»˜ã‘ã‚‹HTTPãƒ¡ã‚½ãƒƒãƒ‰</td><td>GET, POST, PUT, DELETE</td></tr>
            <tr><td><strong>URL</strong></td><td>ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®ãƒ‘ã‚¹</td><td>/api/data, /users/:id</td></tr>
            <tr><td><strong>Name</strong></td><td>ãƒãƒ¼ãƒ‰ã®è¡¨ç¤ºå</td><td>GET /api/sensors</td></tr>
        </table>
        
        <h3>URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿</h3>
        <p>URLã« <code>:ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å</code> ã‚’å«ã‚ã‚‹ã¨ã€å‹•çš„ãªãƒ‘ã‚¹ã‚’å®šç¾©ã§ãã¾ã™ï¼š</p>
        <div class="code-block">// URLè¨­å®š: /users/:userId/posts/:postId

// ãƒªã‚¯ã‚¨ã‚¹ãƒˆ: GET /users/123/posts/456
// msg.req.params ã®å†…å®¹:
{
    "userId": "123",
    "postId": "456"
}</div>
        
        <h3>msg ã«è¨­å®šã•ã‚Œã‚‹æƒ…å ±</h3>
        <table>
            <tr><th>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£</th><th>èª¬æ˜</th><th>ä¾‹</th></tr>
            <tr><td><strong>msg.payload</strong></td><td>ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£</td><td>POSTã§é€ã‚‰ã‚ŒãŸJSONãªã©</td></tr>
            <tr><td><strong>msg.req.params</strong></td><td>URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿</td><td>{id: "123"}</td></tr>
            <tr><td><strong>msg.req.query</strong></td><td>ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿</td><td>{page: "1", limit: "10"}</td></tr>
            <tr><td><strong>msg.req.headers</strong></td><td>ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ˜ãƒƒãƒ€ãƒ¼</td><td>{"content-type": "..."}</td></tr>
            <tr><td><strong>msg.req.body</strong></td><td>ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ï¼ˆç”Ÿï¼‰</td><td>POSTãƒ‡ãƒ¼ã‚¿</td></tr>
        </table>
        
        <h3>ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®ã‚¢ã‚¯ã‚»ã‚¹æ–¹æ³•</h3>
        <div class="endpoint-box">
            http://[Node-REDã®ãƒ›ã‚¹ãƒˆ]:1880/[è¨­å®šã—ãŸURL]
        </div>
        <p>ä¾‹: URLã‚’ <code>/api/hello</code> ã«è¨­å®šã—ãŸå ´åˆ</p>
        <div class="endpoint-box">
            http://localhost:1880/api/hello
        </div>
        
        <h2 id="section3">âš™ï¸ 3. HTTP Response ãƒãƒ¼ãƒ‰è¨­å®š</h2>
        
        <h3>ä¸»è¦ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£</h3>
        <table>
            <tr><th>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£</th><th>èª¬æ˜</th><th>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ</th></tr>
            <tr><td><strong>Status code</strong></td><td>HTTPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰</td><td>ï¼ˆmsg.statusCodeã‚’ä½¿ç”¨ï¼‰</td></tr>
            <tr><td><strong>Headers</strong></td><td>è¿½åŠ ãƒ˜ãƒƒãƒ€ãƒ¼</td><td>ï¼ˆmsg.headersã‚’ä½¿ç”¨ï¼‰</td></tr>
        </table>
        
        <h3>msgã§è¨­å®šã™ã‚‹æƒ…å ±</h3>
        <table>
            <tr><th>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£</th><th>èª¬æ˜</th><th>ä¾‹</th></tr>
            <tr><td><strong>msg.payload</strong></td><td>ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒœãƒ‡ã‚£</td><td>JSONã€HTMLã€ãƒ†ã‚­ã‚¹ãƒˆ</td></tr>
            <tr><td><strong>msg.statusCode</strong></td><td>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰</td><td>200, 201, 400, 404, 500</td></tr>
            <tr><td><strong>msg.headers</strong></td><td>ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ˜ãƒƒãƒ€ãƒ¼</td><td>{"Content-Type": "..."}</td></tr>
        </table>
        
        <h3>ä¸»è¦ãªHTTPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰</h3>
        <table>
            <tr><th>ã‚³ãƒ¼ãƒ‰</th><th>æ„å‘³</th><th>ç”¨é€”</th></tr>
            <tr><td><strong>200</strong></td><td>OK</td><td>æˆåŠŸï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰</td></tr>
            <tr><td><strong>201</strong></td><td>Created</td><td>ãƒªã‚½ãƒ¼ã‚¹ä½œæˆæˆåŠŸ</td></tr>
            <tr><td><strong>400</strong></td><td>Bad Request</td><td>ãƒªã‚¯ã‚¨ã‚¹ãƒˆå½¢å¼ã‚¨ãƒ©ãƒ¼</td></tr>
            <tr><td><strong>401</strong></td><td>Unauthorized</td><td>èªè¨¼å¿…è¦</td></tr>
            <tr><td><strong>404</strong></td><td>Not Found</td><td>ãƒªã‚½ãƒ¼ã‚¹ãŒå­˜åœ¨ã—ãªã„</td></tr>
            <tr><td><strong>500</strong></td><td>Internal Server Error</td><td>ã‚µãƒ¼ãƒãƒ¼å†…éƒ¨ã‚¨ãƒ©ãƒ¼</td></tr>
        </table>
        
        <h2 id="section4">ğŸ”§ 4. å®Ÿç”¨çš„ãªä½¿ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³</h2>
        
        <h3>ãƒ‘ã‚¿ãƒ¼ãƒ³1: ã‚·ãƒ³ãƒ—ãƒ«ãªGET API</h3>
        <div class="node-example">
            <span class="node node-http-in">GET /api/hello</span>
            <span class="arrow">â†’</span>
            <span class="node node-change">ãƒ¬ã‚¹ãƒãƒ³ã‚¹è¨­å®š</span>
            <span class="arrow">â†’</span>
            <span class="node node-http-response">Response</span>
        </div>
        <p><strong>ç”¨é€”:</strong> å›ºå®šãƒ‡ãƒ¼ã‚¿ã‚„çŠ¶æ…‹ã‚’è¿”ã™ã‚·ãƒ³ãƒ—ãƒ«ãªã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ</p>
        
        <h3>ãƒ‘ã‚¿ãƒ¼ãƒ³2: POST ã§ãƒ‡ãƒ¼ã‚¿å—ä¿¡</h3>
        <div class="node-example">
            <span class="node node-http-in">POST /api/data</span>
            <span class="arrow">â†’</span>
            <span class="node node-function">ãƒ‡ãƒ¼ã‚¿å‡¦ç†</span>
            <span class="arrow">â†’</span>
            <span class="node node-http-response">Response</span>
        </div>
        <p><strong>ç”¨é€”:</strong> ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã®å—ä¿¡ã€ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡ã®å‡¦ç†</p>
        
        <h3>ãƒ‘ã‚¿ãƒ¼ãƒ³3: URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§å‹•çš„å‡¦ç†</h3>
        <div class="node-example">
            <span class="node node-http-in">GET /users/:id</span>
            <span class="arrow">â†’</span>
            <span class="node node-function">IDå–å¾—ãƒ»æ¤œç´¢</span>
            <span class="arrow">â†’</span>
            <span class="node node-http-response">Response</span>
        </div>
        <p><strong>ç”¨é€”:</strong> ç‰¹å®šãƒªã‚½ãƒ¼ã‚¹ã®å–å¾—ï¼ˆREST APIï¼‰</p>
        
        <h3>ãƒ‘ã‚¿ãƒ¼ãƒ³4: HTMLãƒšãƒ¼ã‚¸ã®æä¾›</h3>
        <div class="node-example">
            <span class="node node-http-in">GET /page</span>
            <span class="arrow">â†’</span>
            <span class="node node-template">HTMLç”Ÿæˆ</span>
            <span class="arrow">â†’</span>
            <span class="node node-http-response">Response</span>
        </div>
        <p><strong>ç”¨é€”:</strong> å‹•çš„ãªWebãƒšãƒ¼ã‚¸ã€ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</p>
        
        <h2 id="section5">ğŸ“¥ 5. ã‚µãƒ³ãƒ—ãƒ«ãƒ•ãƒ­ãƒ¼</h2>
        
        <div class="tip">
            <p><strong>ğŸ’¡ ãƒ†ã‚¹ãƒˆæ–¹æ³•:</strong></p>
            <ul>
                <li><strong>ãƒ–ãƒ©ã‚¦ã‚¶:</strong> GETãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯URLã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã«ç›´æ¥å…¥åŠ›</li>
                <li><strong>curl:</strong> ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‹ã‚‰ <code>curl http://localhost:1880/api/hello</code></li>
                <li><strong>Postman:</strong> GUIã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆä½œæˆãƒ»ãƒ†ã‚¹ãƒˆ</li>
                <li><strong>HTTP Request ãƒãƒ¼ãƒ‰:</strong> Node-REDå†…ã§ã‚»ãƒ«ãƒ•ãƒ†ã‚¹ãƒˆ</li>
            </ul>
        </div>
        
        <details>
            <summary>ğŸ“¥ ã‚µãƒ³ãƒ—ãƒ«ãƒ•ãƒ­ãƒ¼JSONï¼ˆã‚¯ãƒªãƒƒã‚¯ã§å±•é–‹ï¼‰</summary>
            <div class="flow-json">[
    {
        "id": "http_in_sample_tab",
        "type": "tab",
        "label": "HTTP In/Response ã‚µãƒ³ãƒ—ãƒ«",
        "disabled": false,
        "info": ""
    },
    {
        "id": "http_in_comment1",
        "type": "comment",
        "z": "http_in_sample_tab",
        "name": "â”â”â” åŸºæœ¬: Hello World API â”â”â”",
        "info": "GET http://localhost:1880/api/hello",
        "x": 190,
        "y": 40,
        "wires": []
    },
    {
        "id": "http_in_hello",
        "type": "http in",
        "z": "http_in_sample_tab",
        "name": "GET /api/hello",
        "url": "/api/hello",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 160,
        "y": 100,
        "wires": [["http_in_change_hello"]]
    },
    {
        "id": "http_in_change_hello",
        "type": "change",
        "z": "http_in_sample_tab",
        "name": "ãƒ¬ã‚¹ãƒãƒ³ã‚¹è¨­å®š",
        "rules": [
            {"t": "set", "p": "payload", "pt": "msg", "to": "{\"message\":\"Hello from Node-RED!\",\"timestamp\":\"\"}", "tot": "json"},
            {"t": "set", "p": "payload.timestamp", "pt": "msg", "to": "", "tot": "date"},
            {"t": "set", "p": "headers", "pt": "msg", "to": "{\"Content-Type\":\"application/json\"}", "tot": "json"}
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 380,
        "y": 100,
        "wires": [["http_in_response_hello", "http_in_debug1"]]
    },
    {
        "id": "http_in_response_hello",
        "type": "http response",
        "z": "http_in_sample_tab",
        "name": "Response",
        "statusCode": "200",
        "headers": {},
        "x": 580,
        "y": 100,
        "wires": []
    },
    {
        "id": "http_in_debug1",
        "type": "debug",
        "z": "http_in_sample_tab",
        "name": "ãƒªã‚¯ã‚¨ã‚¹ãƒˆç¢ºèª",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "req.headers.host",
        "targetType": "msg",
        "statusVal": "\"ãƒªã‚¯ã‚¨ã‚¹ãƒˆå—ä¿¡\"",
        "statusType": "str",
        "x": 600,
        "y": 140,
        "wires": []
    },
    {
        "id": "http_in_comment2",
        "type": "comment",
        "z": "http_in_sample_tab",
        "name": "â”â”â” POST: ãƒ‡ãƒ¼ã‚¿å—ä¿¡API â”â”â”",
        "info": "POST http://localhost:1880/api/data",
        "x": 190,
        "y": 200,
        "wires": []
    },
    {
        "id": "http_in_post",
        "type": "http in",
        "z": "http_in_sample_tab",
        "name": "POST /api/data",
        "url": "/api/data",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 160,
        "y": 260,
        "wires": [["http_in_func_post"]]
    },
    {
        "id": "http_in_func_post",
        "type": "function",
        "z": "http_in_sample_tab",
        "name": "ãƒ‡ãƒ¼ã‚¿å‡¦ç†",
        "func": "// å—ä¿¡ãƒ‡ãƒ¼ã‚¿ã‚’å‡¦ç†\nvar receivedData = msg.payload;\n\n// ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ï¼ˆflowå¤‰æ•°ï¼‰\nvar dataStore = flow.get('dataStore') || [];\ndataStore.push({\n    id: Date.now(),\n    data: receivedData,\n    receivedAt: new Date().toISOString()\n});\nflow.set('dataStore', dataStore);\n\n// ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä½œæˆ\nmsg.payload = {\n    success: true,\n    message: \"ãƒ‡ãƒ¼ã‚¿ã‚’å—ä¿¡ã—ã¾ã—ãŸ\",\n    received: receivedData,\n    totalCount: dataStore.length\n};\nmsg.statusCode = 201;\nmsg.headers = {\"Content-Type\": \"application/json\"};\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 260,
        "wires": [["http_in_response_post", "http_in_debug2"]]
    },
    {
        "id": "http_in_response_post",
        "type": "http response",
        "z": "http_in_sample_tab",
        "name": "Response",
        "statusCode": "",
        "headers": {},
        "x": 540,
        "y": 260,
        "wires": []
    },
    {
        "id": "http_in_debug2",
        "type": "debug",
        "z": "http_in_sample_tab",
        "name": "å—ä¿¡ãƒ‡ãƒ¼ã‚¿",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "\"ãƒ‡ãƒ¼ã‚¿å—ä¿¡\"",
        "statusType": "str",
        "x": 550,
        "y": 300,
        "wires": []
    },
    {
        "id": "http_in_comment3",
        "type": "comment",
        "z": "http_in_sample_tab",
        "name": "â”â”â” URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿: /users/:id â”â”â”",
        "info": "GET http://localhost:1880/api/users/123",
        "x": 200,
        "y": 360,
        "wires": []
    },
    {
        "id": "http_in_params",
        "type": "http in",
        "z": "http_in_sample_tab",
        "name": "GET /api/users/:id",
        "url": "/api/users/:id",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 170,
        "y": 420,
        "wires": [["http_in_func_params"]]
    },
    {
        "id": "http_in_func_params",
        "type": "function",
        "z": "http_in_sample_tab",
        "name": "ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¤œç´¢",
        "func": "// URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‹ã‚‰IDã‚’å–å¾—\nvar userId = msg.req.params.id;\n\n// ã‚µãƒ³ãƒ—ãƒ«ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿\nvar users = {\n    \"1\": {name: \"ç”°ä¸­å¤ªéƒ\", email: \"tanaka@example.com\"},\n    \"2\": {name: \"éˆ´æœ¨èŠ±å­\", email: \"suzuki@example.com\"},\n    \"3\": {name: \"ä½è—¤æ¬¡éƒ\", email: \"sato@example.com\"}\n};\n\n// ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¤œç´¢\nif (users[userId]) {\n    msg.payload = {\n        success: true,\n        user: {\n            id: userId,\n            ...users[userId]\n        }\n    };\n    msg.statusCode = 200;\n} else {\n    msg.payload = {\n        success: false,\n        error: \"ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“\",\n        requestedId: userId\n    };\n    msg.statusCode = 404;\n}\n\nmsg.headers = {\"Content-Type\": \"application/json\"};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 420,
        "wires": [["http_in_response_params", "http_in_debug3"]]
    },
    {
        "id": "http_in_response_params",
        "type": "http response",
        "z": "http_in_sample_tab",
        "name": "Response",
        "statusCode": "",
        "headers": {},
        "x": 580,
        "y": 420,
        "wires": []
    },
    {
        "id": "http_in_debug3",
        "type": "debug",
        "z": "http_in_sample_tab",
        "name": "æ¤œç´¢çµæœ",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "req.params.id",
        "statusType": "msg",
        "x": 570,
        "y": 460,
        "wires": []
    },
    {
        "id": "http_in_comment4",
        "type": "comment",
        "z": "http_in_sample_tab",
        "name": "â”â”â” ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿: ?name=xxx â”â”â”",
        "info": "GET http://localhost:1880/api/search?name=ç”°ä¸­",
        "x": 210,
        "y": 520,
        "wires": []
    },
    {
        "id": "http_in_query",
        "type": "http in",
        "z": "http_in_sample_tab",
        "name": "GET /api/search",
        "url": "/api/search",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 160,
        "y": 580,
        "wires": [["http_in_func_query"]]
    },
    {
        "id": "http_in_func_query",
        "type": "function",
        "z": "http_in_sample_tab",
        "name": "ã‚¯ã‚¨ãƒªå‡¦ç†",
        "func": "// ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å–å¾—\nvar query = msg.req.query;\nvar searchName = query.name || \"\";\nvar limit = parseInt(query.limit) || 10;\n\n// ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿\nvar allUsers = [\n    {id: 1, name: \"ç”°ä¸­å¤ªéƒ\"},\n    {id: 2, name: \"ç”°ä¸­èŠ±å­\"},\n    {id: 3, name: \"éˆ´æœ¨ä¸€éƒ\"},\n    {id: 4, name: \"ä½è—¤æ¬¡éƒ\"}\n];\n\n// æ¤œç´¢å®Ÿè¡Œ\nvar results = allUsers.filter(function(user) {\n    return user.name.includes(searchName);\n}).slice(0, limit);\n\nmsg.payload = {\n    query: {\n        name: searchName,\n        limit: limit\n    },\n    results: results,\n    count: results.length\n};\nmsg.statusCode = 200;\nmsg.headers = {\"Content-Type\": \"application/json\"};\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 580,
        "wires": [["http_in_response_query", "http_in_debug4"]]
    },
    {
        "id": "http_in_response_query",
        "type": "http response",
        "z": "http_in_sample_tab",
        "name": "Response",
        "statusCode": "",
        "headers": {},
        "x": 540,
        "y": 580,
        "wires": []
    },
    {
        "id": "http_in_debug4",
        "type": "debug",
        "z": "http_in_sample_tab",
        "name": "æ¤œç´¢çµæœ",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload.count",
        "statusType": "msg",
        "x": 550,
        "y": 620,
        "wires": []
    },
    {
        "id": "http_in_comment5",
        "type": "comment",
        "z": "http_in_sample_tab",
        "name": "â”â”â” HTMLãƒšãƒ¼ã‚¸æä¾› â”â”â”",
        "info": "GET http://localhost:1880/page",
        "x": 180,
        "y": 680,
        "wires": []
    },
    {
        "id": "http_in_page",
        "type": "http in",
        "z": "http_in_sample_tab",
        "name": "GET /page",
        "url": "/page",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 140,
        "y": 740,
        "wires": [["http_in_template"]]
    },
    {
        "id": "http_in_template",
        "type": "template",
        "z": "http_in_sample_tab",
        "name": "HTMLç”Ÿæˆ",
        "field": "payload",
        "fieldType": "msg",
        "format": "html",
        "syntax": "mustache",
        "template": "<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Node-RED Page</title>\n    <style>\n        body { font-family: Arial, sans-serif; padding: 40px; background: #f0f0f0; }\n        .container { background: white; padding: 30px; border-radius: 10px; max-width: 600px; margin: 0 auto; }\n        h1 { color: #b92d5d; }\n        .info { background: #e8f5e9; padding: 15px; border-radius: 5px; }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <h1>ğŸ‰ Node-RED Webãƒšãƒ¼ã‚¸</h1>\n        <p>ã“ã®ãƒšãƒ¼ã‚¸ã¯Node-REDã«ã‚ˆã£ã¦å‹•çš„ã«ç”Ÿæˆã•ã‚Œã¦ã„ã¾ã™ã€‚</p>\n        <div class=\"info\">\n            <p><strong>ç¾åœ¨æ™‚åˆ»:</strong> {{timestamp}}</p>\n            <p><strong>ãƒªã‚¯ã‚¨ã‚¹ãƒˆå…ƒ:</strong> {{req.headers.host}}</p>\n        </div>\n    </div>\n    <!-- ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ›ãƒ¼ãƒ ãƒœã‚¿ãƒ³ -->
    <a href="index.html" style="position: fixed; bottom: 20px; right: 20px; width: 56px; height: 56px; background: linear-gradient(135deg, #42b883 0%, #35495e 100%); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; text-decoration: none; font-size: 24px; box-shadow: 0 4px 12px rgba(0,0,0,0.3); z-index: 1000; transition: transform 0.3s, box-shadow 0.3s;" onmouseover="this.style.transform='scale(1.1)'; this.style.boxShadow='0 6px 16px rgba(0,0,0,0.4)';" onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.3)';" title="ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã¸">ğŸ </a>
</body>\n</html>",
        "output": "str",
        "x": 310,
        "y": 740,
        "wires": [["http_in_change_html"]]
    },
    {
        "id": "http_in_change_html",
        "type": "change",
        "z": "http_in_sample_tab",
        "name": "ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—è¨­å®š",
        "rules": [
            {"t": "set", "p": "timestamp", "pt": "msg", "to": "", "tot": "date"},
            {"t": "set", "p": "headers", "pt": "msg", "to": "{\"Content-Type\":\"text/html; charset=utf-8\"}", "tot": "json"}
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 510,
        "y": 740,
        "wires": [["http_in_response_page"]]
    },
    {
        "id": "http_in_response_page",
        "type": "http response",
        "z": "http_in_sample_tab",
        "name": "Response",
        "statusCode": "200",
        "headers": {},
        "x": 700,
        "y": 740,
        "wires": []
    },
    {
        "id": "http_in_comment6",
        "type": "comment",
        "z": "http_in_sample_tab",
        "name": "â”â”â” ã‚»ãƒ«ãƒ•ãƒ†ã‚¹ãƒˆï¼ˆHTTP Requestã§å‘¼ã³å‡ºã—ï¼‰ â”â”â”",
        "info": "",
        "x": 240,
        "y": 820,
        "wires": []
    },
    {
        "id": "http_in_inject_test",
        "type": "inject",
        "z": "http_in_sample_tab",
        "name": "APIãƒ†ã‚¹ãƒˆ",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 140,
        "y": 880,
        "wires": [["http_in_request_test"]]
    },
    {
        "id": "http_in_request_test",
        "type": "http request",
        "z": "http_in_sample_tab",
        "name": "è‡ªåˆ†ã®APIã‚’å‘¼å‡º",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "http://localhost:1880/api/hello",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 350,
        "y": 880,
        "wires": [["http_in_debug_test"]]
    },
    {
        "id": "http_in_debug_test",
        "type": "debug",
        "z": "http_in_sample_tab",
        "name": "ãƒ†ã‚¹ãƒˆçµæœ",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload.message",
        "statusType": "msg",
        "x": 550,
        "y": 880,
        "wires": []
    }
]</div>
        </details>
        
        <h2 id="section6">ğŸ“ 6. æ¼”ç¿’å•é¡Œ</h2>
        
        <div class="exercise">
            <h3>æ¼”ç¿’1: ã‚·ãƒ³ãƒ—ãƒ«ãªJSON API <span class="difficulty difficulty-easy">åˆç´š</span></h3>
            <p><strong>ğŸ“‹ èª²é¡Œ:</strong> <code>GET /api/status</code> ã§ã‚·ã‚¹ãƒ†ãƒ ã®çŠ¶æ…‹ã‚’è¿”ã™APIã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚</p>
            
            <p><strong>ğŸ¯ è¦æ±‚ä»•æ§˜:</strong></p>
            <ul>
                <li>ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ: <code>/api/status</code></li>
                <li>ãƒ¬ã‚¹ãƒãƒ³ã‚¹: <code>{"status": "running", "version": "1.0.0"}</code></li>
                <li>Content-Type: application/json</li>
            </ul>
            
            <details>
                <summary>ğŸ’¡ ãƒ’ãƒ³ãƒˆ</summary>
                <p><strong>HTTP In ãƒãƒ¼ãƒ‰:</strong></p>
                <ul>
                    <li>Method: GET</li>
                    <li>URL: /api/status</li>
                </ul>
                <p><strong>Change ãƒãƒ¼ãƒ‰:</strong></p>
                <ul>
                    <li>msg.payload ã« JSONã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¨­å®š</li>
                    <li>msg.headers ã« Content-Type ã‚’è¨­å®š</li>
                </ul>
                <p><strong>HTTP Response ãƒãƒ¼ãƒ‰:</strong> ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã§OK</p>
            </details>
            
            <details>
                <summary>âœ… è§£ç­”ä¾‹ãƒ•ãƒ­ãƒ¼</summary>
                <div class="flow-json">[
    {"id": "ex1_tab", "type": "tab", "label": "æ¼”ç¿’1"},
    {"id": "ex1_http_in", "type": "http in", "z": "ex1_tab", "name": "GET /api/status", "url": "/api/status", "method": "get", "upload": false, "swaggerDoc": "", "x": 170, "y": 100, "wires": [["ex1_change"]]},
    {"id": "ex1_change", "type": "change", "z": "ex1_tab", "name": "ãƒ¬ã‚¹ãƒãƒ³ã‚¹è¨­å®š", "rules": [{"t": "set", "p": "payload", "pt": "msg", "to": "{\"status\":\"running\",\"version\":\"1.0.0\"}", "tot": "json"}, {"t": "set", "p": "headers", "pt": "msg", "to": "{\"Content-Type\":\"application/json\"}", "tot": "json"}], "action": "", "property": "", "from": "", "to": "", "reg": false, "x": 390, "y": 100, "wires": [["ex1_response"]]},
    {"id": "ex1_response", "type": "http response", "z": "ex1_tab", "name": "Response", "statusCode": "200", "headers": {}, "x": 580, "y": 100, "wires": []}
]</div>
            </details>
        </div>
        
        <div class="exercise">
            <h3>æ¼”ç¿’2: POSTã§ãƒ‡ãƒ¼ã‚¿ã‚’å—ã‘å–ã‚‹ <span class="difficulty difficulty-easy">åˆç´š</span></h3>
            <p><strong>ğŸ“‹ èª²é¡Œ:</strong> <code>POST /api/sensor</code> ã§ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’å—ã‘å–ã‚Šã€ç¢ºèªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿”ã™APIã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚</p>
            
            <p><strong>ğŸ¯ è¦æ±‚ä»•æ§˜:</strong></p>
            <ul>
                <li>ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ: <code>/api/sensor</code></li>
                <li>å—ä¿¡ãƒ‡ãƒ¼ã‚¿ä¾‹: <code>{"temperature": 25.5, "humidity": 60}</code></li>
                <li>ãƒ¬ã‚¹ãƒãƒ³ã‚¹: <code>{"received": true, "data": {å—ä¿¡ãƒ‡ãƒ¼ã‚¿}}</code></li>
            </ul>
            
            <details>
                <summary>ğŸ’¡ ãƒ’ãƒ³ãƒˆ</summary>
                <p><strong>HTTP In ãƒãƒ¼ãƒ‰:</strong> Method: POST, URL: /api/sensor</p>
                <p><strong>Function ãƒãƒ¼ãƒ‰:</strong></p>
                <div class="code-block">// å—ä¿¡ãƒ‡ãƒ¼ã‚¿ã¯ msg.payload ã«å…¥ã£ã¦ã„ã‚‹
var receivedData = msg.payload;

msg.payload = {
    received: true,
    data: receivedData
};
msg.headers = {"Content-Type": "application/json"};

return msg;</div>
            </details>
            
            <details>
                <summary>âœ… è§£ç­”ä¾‹ãƒ•ãƒ­ãƒ¼</summary>
                <div class="flow-json">[
    {"id": "ex2_tab", "type": "tab", "label": "æ¼”ç¿’2"},
    {"id": "ex2_http_in", "type": "http in", "z": "ex2_tab", "name": "POST /api/sensor", "url": "/api/sensor", "method": "post", "upload": false, "swaggerDoc": "", "x": 170, "y": 100, "wires": [["ex2_func"]]},
    {"id": "ex2_func", "type": "function", "z": "ex2_tab", "name": "ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä½œæˆ", "func": "var receivedData = msg.payload;\n\nmsg.payload = {\n    received: true,\n    data: receivedData,\n    timestamp: new Date().toISOString()\n};\nmsg.headers = {\"Content-Type\": \"application/json\"};\nmsg.statusCode = 201;\n\nreturn msg;", "outputs": 1, "timeout": 0, "noerr": 0, "initialize": "", "finalize": "", "libs": [], "x": 380, "y": 100, "wires": [["ex2_response"]]},
    {"id": "ex2_response", "type": "http response", "z": "ex2_tab", "name": "Response", "statusCode": "", "headers": {}, "x": 560, "y": 100, "wires": []}
]</div>
            </details>
        </div>
        
        <div class="exercise">
            <h3>æ¼”ç¿’3: URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ä½¿ã£ãŸAPI <span class="difficulty difficulty-medium">ä¸­ç´š</span></h3>
            <p><strong>ğŸ“‹ èª²é¡Œ:</strong> <code>GET /api/items/:id</code> ã§å•†å“æƒ…å ±ã‚’è¿”ã™APIã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚</p>
            
            <p><strong>ğŸ¯ è¦æ±‚ä»•æ§˜:</strong></p>
            <ul>
                <li>ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ: <code>/api/items/:id</code></li>
                <li>å•†å“ãƒ‡ãƒ¼ã‚¿: id=1ã€Œã‚Šã‚“ã”ã€, id=2ã€Œã¿ã‹ã‚“ã€, id=3ã€ŒãƒãƒŠãƒŠã€</li>
                <li>å­˜åœ¨ã™ã‚‹å ´åˆ: 200 + å•†å“æƒ…å ±</li>
                <li>å­˜åœ¨ã—ãªã„å ´åˆ: 404 + ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</li>
            </ul>
            
            <details>
                <summary>ğŸ’¡ ãƒ’ãƒ³ãƒˆ</summary>
                <p><strong>URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å–å¾—:</strong> <code>msg.req.params.id</code></p>
                <p><strong>å•†å“ãƒ‡ãƒ¼ã‚¿ã®å®šç¾©:</strong> Functionãƒãƒ¼ãƒ‰å†…ã§ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦å®šç¾©</p>
                <p><strong>å­˜åœ¨ãƒã‚§ãƒƒã‚¯:</strong> ifæ–‡ã§å•†å“ã®å­˜åœ¨ã‚’ç¢ºèªã—ã€msg.statusCodeã‚’åˆ†å²</p>
            </details>
            
            <details>
                <summary>âœ… è§£ç­”ä¾‹ãƒ•ãƒ­ãƒ¼</summary>
                <div class="flow-json">[
    {"id": "ex3_tab", "type": "tab", "label": "æ¼”ç¿’3"},
    {"id": "ex3_http_in", "type": "http in", "z": "ex3_tab", "name": "GET /api/items/:id", "url": "/api/items/:id", "method": "get", "upload": false, "swaggerDoc": "", "x": 180, "y": 100, "wires": [["ex3_func"]]},
    {"id": "ex3_func", "type": "function", "z": "ex3_tab", "name": "å•†å“æ¤œç´¢", "func": "var itemId = msg.req.params.id;\n\nvar items = {\n    \"1\": {name: \"ã‚Šã‚“ã”\", price: 150},\n    \"2\": {name: \"ã¿ã‹ã‚“\", price: 100},\n    \"3\": {name: \"ãƒãƒŠãƒŠ\", price: 120}\n};\n\nif (items[itemId]) {\n    msg.payload = {\n        success: true,\n        item: {id: itemId, ...items[itemId]}\n    };\n    msg.statusCode = 200;\n} else {\n    msg.payload = {\n        success: false,\n        error: \"å•†å“ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“\",\n        requestedId: itemId\n    };\n    msg.statusCode = 404;\n}\n\nmsg.headers = {\"Content-Type\": \"application/json\"};\nreturn msg;", "outputs": 1, "timeout": 0, "noerr": 0, "initialize": "", "finalize": "", "libs": [], "x": 400, "y": 100, "wires": [["ex3_response"]]},
    {"id": "ex3_response", "type": "http response", "z": "ex3_tab", "name": "Response", "statusCode": "", "headers": {}, "x": 580, "y": 100, "wires": []}
]</div>
            </details>
        </div>
        
        <div class="exercise">
            <h3>æ¼”ç¿’4: CRUD APIã®ä½œæˆ <span class="difficulty difficulty-hard">ä¸Šç´š</span></h3>
            <p><strong>ğŸ“‹ èª²é¡Œ:</strong> ãƒ¡ãƒ¢ã‚’ç®¡ç†ã™ã‚‹ã‚·ãƒ³ãƒ—ãƒ«ãªREST APIã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚</p>
            
            <p><strong>ğŸ¯ è¦æ±‚ä»•æ§˜:</strong></p>
            <ul>
                <li><code>GET /api/notes</code> - å…¨ãƒ¡ãƒ¢ä¸€è¦§å–å¾—</li>
                <li><code>POST /api/notes</code> - æ–°è¦ãƒ¡ãƒ¢ä½œæˆ</li>
                <li><code>GET /api/notes/:id</code> - ç‰¹å®šãƒ¡ãƒ¢å–å¾—</li>
                <li><code>DELETE /api/notes/:id</code> - ãƒ¡ãƒ¢å‰Šé™¤</li>
                <li>ãƒ‡ãƒ¼ã‚¿ã¯flowå¤‰æ•°ã«ä¿å­˜</li>
            </ul>
            
            <details>
                <summary>ğŸ’¡ ãƒ’ãƒ³ãƒˆ</summary>
                <p><strong>ãƒ‡ãƒ¼ã‚¿ä¿å­˜:</strong> <code>flow.set('notes', notesArray)</code></p>
                <p><strong>ãƒ‡ãƒ¼ã‚¿å–å¾—:</strong> <code>flow.get('notes') || []</code></p>
                <p><strong>æ–°è¦IDç”Ÿæˆ:</strong> <code>Date.now()</code></p>
                <p><strong>å‰Šé™¤:</strong> <code>array.filter()</code> ã§è©²å½“IDã‚’é™¤å¤–</p>
            </details>
            
            <details>
                <summary>âœ… è§£ç­”ä¾‹ãƒ•ãƒ­ãƒ¼</summary>
                <div class="flow-json">[
    {"id": "ex4_tab", "type": "tab", "label": "æ¼”ç¿’4"},
    {"id": "ex4_get_all", "type": "http in", "z": "ex4_tab", "name": "GET /api/notes", "url": "/api/notes", "method": "get", "upload": false, "swaggerDoc": "", "x": 160, "y": 80, "wires": [["ex4_func_get_all"]]},
    {"id": "ex4_func_get_all", "type": "function", "z": "ex4_tab", "name": "å…¨ä»¶å–å¾—", "func": "var notes = flow.get('notes') || [];\nmsg.payload = {notes: notes, count: notes.length};\nmsg.headers = {\"Content-Type\": \"application/json\"};\nreturn msg;", "outputs": 1, "timeout": 0, "noerr": 0, "initialize": "", "finalize": "", "libs": [], "x": 370, "y": 80, "wires": [["ex4_response"]]},
    {"id": "ex4_post", "type": "http in", "z": "ex4_tab", "name": "POST /api/notes", "url": "/api/notes", "method": "post", "upload": false, "swaggerDoc": "", "x": 170, "y": 140, "wires": [["ex4_func_post"]]},
    {"id": "ex4_func_post", "type": "function", "z": "ex4_tab", "name": "æ–°è¦ä½œæˆ", "func": "var notes = flow.get('notes') || [];\nvar newNote = {\n    id: Date.now(),\n    text: msg.payload.text || \"(å†…å®¹ãªã—)\",\n    createdAt: new Date().toISOString()\n};\nnotes.push(newNote);\nflow.set('notes', notes);\nmsg.payload = {success: true, note: newNote};\nmsg.statusCode = 201;\nmsg.headers = {\"Content-Type\": \"application/json\"};\nreturn msg;", "outputs": 1, "timeout": 0, "noerr": 0, "initialize": "", "finalize": "", "libs": [], "x": 370, "y": 140, "wires": [["ex4_response"]]},
    {"id": "ex4_get_one", "type": "http in", "z": "ex4_tab", "name": "GET /api/notes/:id", "url": "/api/notes/:id", "method": "get", "upload": false, "swaggerDoc": "", "x": 180, "y": 200, "wires": [["ex4_func_get_one"]]},
    {"id": "ex4_func_get_one", "type": "function", "z": "ex4_tab", "name": "1ä»¶å–å¾—", "func": "var notes = flow.get('notes') || [];\nvar noteId = parseInt(msg.req.params.id);\nvar note = notes.find(n => n.id === noteId);\nif (note) {\n    msg.payload = {success: true, note: note};\n    msg.statusCode = 200;\n} else {\n    msg.payload = {success: false, error: \"Not found\"};\n    msg.statusCode = 404;\n}\nmsg.headers = {\"Content-Type\": \"application/json\"};\nreturn msg;", "outputs": 1, "timeout": 0, "noerr": 0, "initialize": "", "finalize": "", "libs": [], "x": 370, "y": 200, "wires": [["ex4_response"]]},
    {"id": "ex4_delete", "type": "http in", "z": "ex4_tab", "name": "DELETE /api/notes/:id", "url": "/api/notes/:id", "method": "delete", "upload": false, "swaggerDoc": "", "x": 190, "y": 260, "wires": [["ex4_func_delete"]]},
    {"id": "ex4_func_delete", "type": "function", "z": "ex4_tab", "name": "å‰Šé™¤", "func": "var notes = flow.get('notes') || [];\nvar noteId = parseInt(msg.req.params.id);\nvar originalLength = notes.length;\nnotes = notes.filter(n => n.id !== noteId);\nflow.set('notes', notes);\nif (notes.length < originalLength) {\n    msg.payload = {success: true, message: \"Deleted\"};\n    msg.statusCode = 200;\n} else {\n    msg.payload = {success: false, error: \"Not found\"};\n    msg.statusCode = 404;\n}\nmsg.headers = {\"Content-Type\": \"application/json\"};\nreturn msg;", "outputs": 1, "timeout": 0, "noerr": 0, "initialize": "", "finalize": "", "libs": [], "x": 370, "y": 260, "wires": [["ex4_response"]]},
    {"id": "ex4_response", "type": "http response", "z": "ex4_tab", "name": "Response", "statusCode": "", "headers": {}, "x": 560, "y": 160, "wires": []}
]</div>
            </details>
        </div>
        
        <h2 id="section7">âœ… 7. ã¾ã¨ã‚</h2>
        
        <div class="important">
            <p><strong>ğŸ¯ é‡è¦ãƒã‚¤ãƒ³ãƒˆ:</strong></p>
            <ul>
                <li><strong>HTTP In + HTTP Response</strong> ã¯å¿…ãšãƒšã‚¢ã§ä½¿ç”¨</li>
                <li><strong>URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿</strong>: <code>:id</code> å½¢å¼ã§å®šç¾© â†’ <code>msg.req.params.id</code> ã§å–å¾—</li>
                <li><strong>ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿</strong>: <code>?key=value</code> â†’ <code>msg.req.query.key</code> ã§å–å¾—</li>
                <li><strong>POSTãƒœãƒ‡ã‚£</strong>: <code>msg.payload</code> ã«è‡ªå‹•ã§ãƒ‘ãƒ¼ã‚¹</li>
                <li><strong>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰</strong>: <code>msg.statusCode</code> ã§è¨­å®š</li>
                <li><strong>ãƒ˜ãƒƒãƒ€ãƒ¼</strong>: <code>msg.headers</code> ã§Content-Typeç­‰ã‚’è¨­å®š</li>
            </ul>
        </div>
        
        <div class="warning">
            <p><strong>âš ï¸ æ³¨æ„äº‹é …:</strong></p>
            <ul>
                <li>HTTP Response ã‚’å¿˜ã‚Œã‚‹ã¨<strong>ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ</strong>ã«ãªã‚‹</li>
                <li>å¤–éƒ¨å…¬é–‹æ™‚ã¯<strong>èªè¨¼ãƒ»èªå¯</strong>ã‚’å®Ÿè£…ã™ã‚‹ã“ã¨</li>
                <li>æœ¬ç•ªç’°å¢ƒã§ã¯<strong>HTTPS</strong>ã‚’ä½¿ç”¨ï¼ˆãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·ç­‰ï¼‰</li>
                <li>ã‚¨ãƒ©ãƒ¼æ™‚ã‚‚å¿…ãšãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã™ï¼ˆCatchãƒãƒ¼ãƒ‰æ´»ç”¨ï¼‰</li>
            </ul>
        </div>
        
        <h2 id="section8">ğŸ”§ 8. ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°</h2>
        
        <table>
            <tr><th>ç—‡çŠ¶</th><th>åŸå› </th><th>è§£æ±ºæ–¹æ³•</th></tr>
            <tr>
                <td>ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ</td>
                <td>HTTP Response ãŒãªã„</td>
                <td>å¿…ãš HTTP Response ã‚’é…ç½®</td>
            </tr>
            <tr>
                <td>404 Not Found</td>
                <td>URLãŒé–“é•ã£ã¦ã„ã‚‹</td>
                <td>HTTP In ã®URLè¨­å®šã‚’ç¢ºèª</td>
            </tr>
            <tr>
                <td>POSTã®ãƒœãƒ‡ã‚£ãŒç©º</td>
                <td>Content-TypeãŒãªã„</td>
                <td>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã§ãƒ˜ãƒƒãƒ€ãƒ¼è¨­å®š</td>
            </tr>
            <tr>
                <td>æ–‡å­—åŒ–ã‘</td>
                <td>ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°å•é¡Œ</td>
                <td>charset=utf-8 ã‚’è¿½åŠ </td>
            </tr>
            <tr>
                <td>CORSã‚¨ãƒ©ãƒ¼</td>
                <td>ã‚¯ãƒ­ã‚¹ã‚ªãƒªã‚¸ãƒ³åˆ¶é™</td>
                <td>CORSãƒ˜ãƒƒãƒ€ãƒ¼ã‚’è¿½åŠ </td>
            </tr>
        </table>
        
        <h3>CORSãƒ˜ãƒƒãƒ€ãƒ¼ã®è¿½åŠ æ–¹æ³•</h3>
        <div class="code-block">// Functionãƒãƒ¼ãƒ‰ã§è¨­å®š
msg.headers = {
    "Content-Type": "application/json",
    "Access-Control-Allow-Origin": "*",
    "Access-Control-Allow-Methods": "GET, POST, PUT, DELETE",
    "Access-Control-Allow-Headers": "Content-Type"
};
return msg;</div>
        
        <h2 id="section9">ğŸ­ 9. å®Ÿå‹™æ´»ç”¨ä¾‹</h2>
        
        <h3>ã‚±ãƒ¼ã‚¹1: ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿å—ä¿¡ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ</h3>
        <p>Raspberry Pi ã‹ã‚‰HTTP POSTã§ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’å—ã‘å–ã‚Šã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚„ã‚¯ãƒ©ã‚¦ãƒ‰ã«è»¢é€</p>
        
        <h3>ã‚±ãƒ¼ã‚¹2: Webhookå—ä¿¡</h3>
        <p>GitHubã€Slackã€LINEç­‰ã®å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã‹ã‚‰ã®Webhooké€šçŸ¥ã‚’å—ä¿¡ã—ã¦å‡¦ç†</p>
        
        <h3>ã‚±ãƒ¼ã‚¹3: æ©Ÿå™¨åˆ¶å¾¡API</h3>
        <p>IoTæ©Ÿå™¨ã®çŠ¶æ…‹å–å¾—ãƒ»åˆ¶å¾¡ã‚³ãƒãƒ³ãƒ‰é€ä¿¡ç”¨ã®REST APIã‚’æä¾›</p>
        
        <h3>ã‚±ãƒ¼ã‚¹4: ç°¡æ˜“ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h3>
        <p>HTMLãƒšãƒ¼ã‚¸ã‚’å‹•çš„ã«ç”Ÿæˆã—ã¦ã€ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã®å¯è¦–åŒ–ãƒšãƒ¼ã‚¸ã‚’æä¾›</p>
        
        <p style="margin-top: 40px;"><a href="https://nodered.org/docs/user-guide/nodes#http-in" target="_blank">ğŸ“š Node-RED å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ - HTTP In/Response</a></p>
    </div>
    
    <script>
        document.querySelectorAll('.flow-json').forEach(function(block) {
            var btn = document.createElement('button');
            btn.className = 'copy-btn';
            btn.textContent = 'ã‚³ãƒ”ãƒ¼';
            btn.onclick = function() {
                navigator.clipboard.writeText(block.textContent).then(function() {
                    btn.textContent = 'ã‚³ãƒ”ãƒ¼å®Œäº†!';
                    setTimeout(function() { btn.textContent = 'ã‚³ãƒ”ãƒ¼'; }, 2000);
                });
            };
            block.style.position = 'relative';
            block.appendChild(btn);
        });
    </script>
    <!-- ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ›ãƒ¼ãƒ ãƒœã‚¿ãƒ³ -->
    <a href="index.html" style="position: fixed; bottom: 20px; right: 20px; width: 56px; height: 56px; background: linear-gradient(135deg, #42b883 0%, #35495e 100%); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; text-decoration: none; font-size: 24px; box-shadow: 0 4px 12px rgba(0,0,0,0.3); z-index: 1000; transition: transform 0.3s, box-shadow 0.3s;" onmouseover="this.style.transform='scale(1.1)'; this.style.boxShadow='0 6px 16px rgba(0,0,0,0.4)';" onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.3)';" title="ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã¸">ğŸ </a>
</body>
</html>
